g(5,6,7,8).
g(5,6,1,7).
g(8,6,7,2).
g(1,2,3,4).
g(1,2,5,3).
g(4,2,3,6).
g(7,1,3,4).

b(5,6).
b(6,9).
b(5,7).
b(7,8).
b(8,1).
b(1,9).

g(A,B,C,D) :- g(D,A,B,C).
b(A,B) :- b(B,A).
r(A,B,C) :- g(A,B,C,D), g(A,B,E,C).

w(A) :- b(A,B), w(B).
w(A) :- r(A,B,C), r(B,C,D), r(C,D,A).
:- w(5).