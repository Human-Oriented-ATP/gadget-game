window;import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import r,{createContext as o,memo as i,useState as s,useContext as a,forwardRef as l,useCallback as c,useMemo as u,useRef as d,useEffect as h,useLayoutEffect as f,createElement as p}from"react";import"react-dom";var g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)};function m(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function y(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function x(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}"function"==typeof SuppressedError&&SuppressedError;function E(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=E(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}S("/*\n! tailwindcss v3.4.3 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: currentColor; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */ /* 3 */\n  tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n.pointer-events-none {\n  pointer-events: none;\n}\n.fixed {\n  position: fixed;\n}\n.absolute {\n  position: absolute;\n}\n.relative {\n  position: relative;\n}\n.inset-0 {\n  inset: 0px;\n}\n.bottom-0 {\n  bottom: 0px;\n}\n.left-0 {\n  left: 0px;\n}\n.left-44 {\n  left: 11rem;\n}\n.right-0 {\n  right: 0px;\n}\n.top-0 {\n  top: 0px;\n}\n.top-12 {\n  top: 3rem;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-50 {\n  z-index: 50;\n}\n.float-right {\n  float: right;\n}\n.m-0 {\n  margin: 0px;\n}\n.m-0\\.5 {\n  margin: 0.125rem;\n}\n.m-1 {\n  margin: 0.25rem;\n}\n.m-1\\.5 {\n  margin: 0.375rem;\n}\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n.inline-block {\n  display: inline-block;\n}\n.inline {\n  display: inline;\n}\n.flex {\n  display: flex;\n}\n.table {\n  display: table;\n}\n.grid {\n  display: grid;\n}\n.\\!h-10 {\n  height: 2.5rem !important;\n}\n.h-16 {\n  height: 4rem;\n}\n.h-6 {\n  height: 1.5rem;\n}\n.h-\\[calc\\(100vh-64px\\)\\] {\n  height: calc(100vh - 64px);\n}\n.h-dvh {\n  height: 100dvh;\n}\n.h-full {\n  height: 100%;\n}\n.h-screen {\n  height: 100vh;\n}\n.\\!max-h-none {\n  max-height: none !important;\n}\n.\\!w-10 {\n  width: 2.5rem !important;\n}\n.w-16 {\n  width: 4rem;\n}\n.w-28 {\n  width: 7rem;\n}\n.w-6 {\n  width: 1.5rem;\n}\n.w-full {\n  width: 100%;\n}\n.w-screen {\n  width: 100vw;\n}\n.min-w-40 {\n  min-width: 10rem;\n}\n.\\!max-w-none {\n  max-width: none !important;\n}\n.max-w-3xl {\n  max-width: 48rem;\n}\n.max-w-full {\n  max-width: 100%;\n}\n.grow {\n  flex-grow: 1;\n}\n.translate-x-1 {\n  --tw-translate-x: 0.25rem;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.translate-x-1\\/2 {\n  --tw-translate-x: 50%;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.translate-y-1 {\n  --tw-translate-y: 0.25rem;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.scale-110 {\n  --tw-scale-x: 1.1;\n  --tw-scale-y: 1.1;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n@keyframes stroke {\n\n  0% {\n    stroke: #ff0000;\n  }\n\n  10% {\n    stroke: #ff0000;\n  }\n\n  50% {\n    stroke: #000000;\n  }\n\n  90% {\n    stroke: #ff0000;\n  }\n\n  100% {\n    stroke: #ff0000;\n  }\n}\n.animate-stroke-animation {\n  animation: stroke 2s linear infinite;\n}\n.select-none {\n  -webkit-user-select: none;\n          user-select: none;\n}\n.grid-cols-3 {\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n}\n.grid-cols-5 {\n  grid-template-columns: repeat(5, minmax(0, 1fr));\n}\n.flex-col {\n  flex-direction: column;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-center {\n  align-items: center;\n}\n.justify-center {\n  justify-content: center;\n}\n.space-x-5 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(1.25rem * var(--tw-space-x-reverse));\n  margin-left: calc(1.25rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-x-8 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(2rem * var(--tw-space-x-reverse));\n  margin-left: calc(2rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-y-12 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(3rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(3rem * var(--tw-space-y-reverse));\n}\n.overflow-y-scroll {\n  overflow-y: scroll;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.border-2 {\n  border-width: 2px;\n}\n.border-black {\n  --tw-border-opacity: 1;\n  border-color: rgb(61 61 61 / var(--tw-border-opacity));\n}\n.bg-black {\n  --tw-bg-opacity: 1;\n  background-color: rgb(61 61 61 / var(--tw-bg-opacity));\n}\n.bg-blue {\n  --tw-bg-opacity: 1;\n  background-color: rgb(125 95 255 / var(--tw-bg-opacity));\n}\n.bg-cyan {\n  --tw-bg-opacity: 1;\n  background-color: rgb(126 255 245 / var(--tw-bg-opacity));\n}\n.bg-green {\n  --tw-bg-opacity: 1;\n  background-color: rgb(50 255 126 / var(--tw-bg-opacity));\n}\n.bg-light-gray {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 254 254 / var(--tw-bg-opacity));\n}\n.bg-orange {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 159 26 / var(--tw-bg-opacity));\n}\n.bg-palette-gray\\/50 {\n  background-color: rgb(221 221 221 / 0.5);\n}\n.bg-pink {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 204 204 / var(--tw-bg-opacity));\n}\n.bg-purple {\n  --tw-bg-opacity: 1;\n  background-color: rgb(197 108 240 / var(--tw-bg-opacity));\n}\n.bg-red {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 56 56 / var(--tw-bg-opacity));\n}\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgb(238 238 238 / var(--tw-bg-opacity));\n}\n.bg-white\\/30 {\n  background-color: rgb(238 238 238 / 0.3);\n}\n.bg-yellow {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 242 0 / var(--tw-bg-opacity));\n}\n.bg-yellow-highlight {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 250 101 / var(--tw-bg-opacity));\n}\n.bg-striped {\n  background-image: url('/diagonal-stripes.svg');\n}\n.fill-green {\n  fill: #32ff7e;\n}\n.fill-white {\n  fill: #eeeeee;\n}\n.stroke-black {\n  stroke: #3d3d3d;\n}\n.stroke-\\[1\\.5px\\] {\n  stroke-width: 1.5px;\n}\n.p-0 {\n  padding: 0px;\n}\n.p-0\\.5 {\n  padding: 0.125rem;\n}\n.p-1 {\n  padding: 0.25rem;\n}\n.p-12 {\n  padding: 3rem;\n}\n.p-2 {\n  padding: 0.5rem;\n}\n.p-2\\.5 {\n  padding: 0.625rem;\n}\n.p-3 {\n  padding: 0.75rem;\n}\n.p-4 {\n  padding: 1rem;\n}\n.p-5 {\n  padding: 1.25rem;\n}\n.p-6 {\n  padding: 1.5rem;\n}\n.p-8 {\n  padding: 2rem;\n}\n.px-1 {\n  padding-left: 0.25rem;\n  padding-right: 0.25rem;\n}\n.px-10 {\n  padding-left: 2.5rem;\n  padding-right: 2.5rem;\n}\n.pt-10 {\n  padding-top: 2.5rem;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.font-mono {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n}\n.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n.leading-10 {\n  line-height: 2.5rem;\n}\n.text-red {\n  --tw-text-opacity: 1;\n  color: rgb(255 56 56 / var(--tw-text-opacity));\n}\n.shadow-lg {\n  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.outline {\n  outline-style: solid;\n}\n.outline-2 {\n  outline-width: 2px;\n}\n.outline-offset-2 {\n  outline-offset: 2px;\n}\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.backdrop-blur-sm {\n  --tw-backdrop-blur: blur(4px);\n  -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n          backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n}\n.hover\\:bg-black:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(61 61 61 / var(--tw-bg-opacity));\n}\n.hover\\:text-white:hover {\n  --tw-text-opacity: 1;\n  color: rgb(238 238 238 / var(--tw-text-opacity));\n}\n.enabled\\:hover\\:bg-black:hover:enabled {\n  --tw-bg-opacity: 1;\n  background-color: rgb(61 61 61 / var(--tw-bg-opacity));\n}\n.enabled\\:hover\\:text-white:hover:enabled {\n  --tw-text-opacity: 1;\n  color: rgb(238 238 238 / var(--tw-text-opacity));\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n.disabled\\:bg-palette-gray:disabled {\n  --tw-bg-opacity: 1;\n  background-color: rgb(221 221 221 / var(--tw-bg-opacity));\n}\n.disabled\\:opacity-40:disabled {\n  opacity: 0.4;\n}\n@media (min-width: 768px) {\n\n  .md\\:w-36 {\n    width: 9rem;\n  }\n\n  .md\\:grid-cols-5 {\n    grid-template-columns: repeat(5, minmax(0, 1fr));\n  }\n\n  .md\\:text-base {\n    font-size: 1rem;\n    line-height: 1.5rem;\n  }\n}");var k={value:()=>{}};function C(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new M(r)}function M(e){this._=e}function A(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function P(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=k,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}M.prototype=C.prototype={constructor:M,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),s=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=i[s]).type)o[n]=P(o[n],e.name,t);else if(null==t)for(n in o)o[n]=P(o[n],e.name,null);return this}for(;++s<a;)if((n=(e=i[s]).type)&&(n=A(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new M(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var I="http://www.w3.org/1999/xhtml",N={svg:"http://www.w3.org/2000/svg",xhtml:I,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),N.hasOwnProperty(t)?{space:N[t],local:e}:e}function R(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===I&&t.documentElement.namespaceURI===I?t.createElement(e):t.createElementNS(n,e)}}function T(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function L(e){var t=O(e);return(t.local?T:R)(t)}function D(){}function B(e){return null==e?D:function(){return this.querySelector(e)}}function z(){return[]}function $(e){return null==e?z:function(){return this.querySelectorAll(e)}}function j(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function H(e){return function(){return this.matches(e)}}function F(e){return function(t){return t.matches(e)}}var U=Array.prototype.find;function V(){return this.firstElementChild}var q=Array.prototype.filter;function Q(){return Array.from(this.children)}function W(e){return new Array(e.length)}function G(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Y(e,t,n,r,o,i){for(var s,a=0,l=t.length,c=i.length;a<c;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new G(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function Z(e,t,n,r,o,i,s){var a,l,c,u=new Map,d=t.length,h=i.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,i[a],a,i)+"",(l=u.get(c))?(r[a]=l,l.__data__=i[a],u.delete(c)):n[a]=new G(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(o[a]=l)}function X(e){return e.__data__}function K(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function J(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ee(e){return function(){this.removeAttribute(e)}}function te(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ne(e,t){return function(){this.setAttribute(e,t)}}function re(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ie(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function se(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ae(e){return function(){this.style.removeProperty(e)}}function le(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ce(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ue(e,t){return e.style.getPropertyValue(t)||se(e).getComputedStyle(e,null).getPropertyValue(t)}function de(e){return function(){delete this[e]}}function he(e,t){return function(){this[e]=t}}function fe(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function pe(e){return e.trim().split(/^|\s+/)}function ge(e){return e.classList||new me(e)}function me(e){this._node=e,this._names=pe(e.getAttribute("class")||"")}function ye(e,t){for(var n=ge(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function be(e,t){for(var n=ge(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ve(e){return function(){ye(this,e)}}function we(e){return function(){be(this,e)}}function xe(e,t){return function(){(t.apply(this,arguments)?ye:be)(this,e)}}function _e(){this.textContent=""}function Se(e){return function(){this.textContent=e}}function Ee(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ke(){this.innerHTML=""}function Ce(e){return function(){this.innerHTML=e}}function Me(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ae(){this.nextSibling&&this.parentNode.appendChild(this)}function Pe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ie(){return null}function Ne(){var e=this.parentNode;e&&e.removeChild(this)}function Oe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Re(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Te(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Le(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function De(e,t,n){var r=se(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Be(e,t){return function(){return De(this,e,t)}}function ze(e,t){return function(){return De(this,e,t.apply(this,arguments))}}G.prototype={constructor:G,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},me.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var $e=[null];function je(e,t){this._groups=e,this._parents=t}function He(){return new je([[document.documentElement]],$e)}function Fe(e){return"string"==typeof e?new je([[document.querySelector(e)]],[document.documentElement]):new je([[e]],$e)}function Ue(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}je.prototype=He.prototype={constructor:je,select:function(e){"function"!=typeof e&&(e=B(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s,a=t[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=a[u])&&(s=e.call(i,i.__data__,u,a))&&("__data__"in i&&(s.__data__=i.__data__),c[u]=s);return new je(r,this._parents)},selectAll:function(e){e="function"==typeof e?j(e):$(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s,a=t[i],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),o.push(s));return new je(r,o)},selectChild:function(e){return this.select(null==e?V:function(e){return function(){return U.call(this.children,e)}}("function"==typeof e?e:F(e)))},selectChildren:function(e){return this.selectAll(null==e?Q:function(e){return function(){return q.call(this.children,e)}}("function"==typeof e?e:F(e)))},filter:function(e){"function"!=typeof e&&(e=H(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new je(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,X);var n,r=t?Z:Y,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=i.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],h=i[u],f=h.length,p=K(e.call(d,d&&d.__data__,u,o)),g=p.length,m=l[u]=new Array(g),y=a[u]=new Array(g);r(d,h,m,y,c[u]=new Array(f),p,t);for(var b,v,w=0,x=0;w<g;++w)if(b=m[w]){for(w>=x&&(x=w+1);!(v=y[x])&&++x<g;);b._next=v||null}}return(a=new je(a,o))._enter=l,a._exit=c,a},enter:function(){return new je(this._enter||this._groups.map(W),this._parents)},exit:function(){return new je(this._exit||this._groups.map(W),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var c,u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<o;++l)a[l]=n[l];return new je(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,s=o[i];--i>=0;)(r=o[i])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=J);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s,a=n[i],l=a.length,c=o[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new je(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],s=0,a=i.length;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this},attr:function(e,t){var n=O(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?te:ee:"function"==typeof t?n.local?ie:oe:n.local?re:ne)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ae:"function"==typeof t?ce:le)(e,t,null==n?"":n)):ue(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?de:"function"==typeof t?fe:he)(e,t)):this.node()[e]},classed:function(e,t){var n=pe(e+"");if(arguments.length<2){for(var r=ge(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?xe:t?ve:we)(n,t))},text:function(e){return arguments.length?this.each(null==e?_e:("function"==typeof e?Ee:Se)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ke:("function"==typeof e?Me:Ce)(e)):this.node().innerHTML},raise:function(){return this.each(Ae)},lower:function(){return this.each(Pe)},append:function(e){var t="function"==typeof e?e:L(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:L(e),r=null==t?Ie:"function"==typeof t?t:B(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ne)},clone:function(e){return this.select(e?Re:Oe)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),s=i.length;if(!(arguments.length<2)){for(a=t?Le:Te,r=0;r<s;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?ze:Be)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,s=o.length;i<s;++i)(r=o[i])&&(yield r)}};const Ve={passive:!1},qe={capture:!0,passive:!1};function Qe(e){e.stopImmediatePropagation()}function We(e){e.preventDefault(),e.stopImmediatePropagation()}function Ge(e){var t=e.document.documentElement,n=Fe(e).on("dragstart.drag",We,qe);"onselectstart"in t?n.on("selectstart.drag",We,qe):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ye(e,t){var n=e.document.documentElement,r=Fe(e).on("dragstart.drag",null);t&&(r.on("click.drag",We,qe),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ze=e=>()=>e;function Xe(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function Ke(e){return!e.ctrlKey&&!e.button}function Je(){return this.parentNode}function et(e,t){return null==t?{x:e.x,y:e.y}:t}function tt(){return navigator.maxTouchPoints||"ontouchstart"in this}function nt(){var e,t,n,r,o=Ke,i=Je,s=et,a=tt,l={},c=C("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,Ve).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&o.call(this,s,a)){var l=v(this,i.call(this,s,a),s,a,"mouse");l&&(Fe(s.view).on("mousemove.drag",p,qe).on("mouseup.drag",g,qe),Ge(s.view),Qe(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(r){if(We(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function g(e){Fe(e.view).on("mousemove.drag mouseup.drag",null),Ye(e.view,n),We(e),l.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,s=e.changedTouches,a=i.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=v(this,a,e,t,s[n].identifier,s[n]))&&(Qe(e),r("start",e,s[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(We(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(n=l[o[t].identifier])&&(Qe(e),n("end",e,o[t]))}function v(e,t,n,r,o,i){var a,d,f,p=c.copy(),g=Ue(i||n,t);if(null!=(f=s.call(e,new Xe("beforestart",{sourceEvent:n,target:h,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-g[0]||0,d=f.y-g[1]||0,function n(i,s,c){var m,y=g;switch(i){case"start":l[o]=n,m=u++;break;case"end":delete l[o],--u;case"drag":g=Ue(c||s,t),m=u}p.call(i,e,new Xe(i,{sourceEvent:s,subject:f,target:h,identifier:o,active:m,x:g[0]+a,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:Ze(!!e),h):o},h.container=function(e){return arguments.length?(i="function"==typeof e?e:Ze(e),h):i},h.subject=function(e){return arguments.length?(s="function"==typeof e?e:Ze(e),h):s},h.touchable=function(e){return arguments.length?(a="function"==typeof e?e:Ze(!!e),h):a},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}function rt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ot(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function it(){}Xe.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var st=.7,at=1/st,lt="\\s*([+-]?\\d+)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dt=/^#([0-9a-f]{3,8})$/,ht=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),ft=new RegExp(`^rgb\\(${ut},${ut},${ut}\\)$`),pt=new RegExp(`^rgba\\(${lt},${lt},${lt},${ct}\\)$`),gt=new RegExp(`^rgba\\(${ut},${ut},${ut},${ct}\\)$`),mt=new RegExp(`^hsl\\(${ct},${ut},${ut}\\)$`),yt=new RegExp(`^hsla\\(${ct},${ut},${ut},${ct}\\)$`),bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vt(){return this.rgb().formatHex()}function wt(){return this.rgb().formatRgb()}function xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?_t(t):3===n?new kt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?St(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?St(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ht.exec(e))?new kt(t[1],t[2],t[3],1):(t=ft.exec(e))?new kt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pt.exec(e))?St(t[1],t[2],t[3],t[4]):(t=gt.exec(e))?St(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mt.exec(e))?Nt(t[1],t[2]/100,t[3]/100,1):(t=yt.exec(e))?Nt(t[1],t[2]/100,t[3]/100,t[4]):bt.hasOwnProperty(e)?_t(bt[e]):"transparent"===e?new kt(NaN,NaN,NaN,0):null}function _t(e){return new kt(e>>16&255,e>>8&255,255&e,1)}function St(e,t,n,r){return r<=0&&(e=t=n=NaN),new kt(e,t,n,r)}function Et(e,t,n,r){return 1===arguments.length?((o=e)instanceof it||(o=xt(o)),o?new kt((o=o.rgb()).r,o.g,o.b,o.opacity):new kt):new kt(e,t,n,null==r?1:r);var o}function kt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ct(){return`#${It(this.r)}${It(this.g)}${It(this.b)}`}function Mt(){const e=At(this.opacity);return`${1===e?"rgb(":"rgba("}${Pt(this.r)}, ${Pt(this.g)}, ${Pt(this.b)}${1===e?")":`, ${e})`}`}function At(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function It(e){return((e=Pt(e))<16?"0":"")+e.toString(16)}function Nt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rt(e,t,n,r)}function Ot(e){if(e instanceof Rt)return new Rt(e.h,e.s,e.l,e.opacity);if(e instanceof it||(e=xt(e)),!e)return new Rt;if(e instanceof Rt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new Rt(s,a,l,e.opacity)}function Rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Tt(e){return(e=(e||0)%360)<0?e+360:e}function Lt(e){return Math.max(0,Math.min(1,e||0))}function Dt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}rt(it,xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vt,formatHex:vt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ot(this).formatHsl()},formatRgb:wt,toString:wt}),rt(kt,Et,ot(it,{brighter(e){return e=null==e?at:Math.pow(at,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?st:Math.pow(st,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kt(Pt(this.r),Pt(this.g),Pt(this.b),At(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ct,formatHex:Ct,formatHex8:function(){return`#${It(this.r)}${It(this.g)}${It(this.b)}${It(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mt,toString:Mt})),rt(Rt,(function(e,t,n,r){return 1===arguments.length?Ot(e):new Rt(e,t,n,null==r?1:r)}),ot(it,{brighter(e){return e=null==e?at:Math.pow(at,e),new Rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?st:Math.pow(st,e),new Rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new kt(Dt(e>=240?e-240:e+120,o,r),Dt(e,o,r),Dt(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Rt(Tt(this.h),Lt(this.s),Lt(this.l),At(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=At(this.opacity);return`${1===e?"hsl(":"hsla("}${Tt(this.h)}, ${100*Lt(this.s)}%, ${100*Lt(this.l)}%${1===e?")":`, ${e})`}`}}));var Bt=e=>()=>e;function zt(e){return 1==(e=+e)?$t:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Bt(isNaN(t)?n:t)}}function $t(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Bt(isNaN(e)?t:e)}var jt=function e(t){var n=zt(t);function r(e,t){var r=n((e=Et(e)).r,(t=Et(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),s=$t(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Ht(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ut=new RegExp(Ft.source,"g");function Vt(e,t){var n,r,o,i=Ft.lastIndex=Ut.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=Ft.exec(e))&&(r=Ut.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Ht(n,r)})),i=Ut.lastIndex;return i<t.length&&(o=t.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}var qt,Qt=180/Math.PI,Wt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gt(e,t,n,r,o,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Qt,skewX:Math.atan(l)*Qt,scaleX:s,scaleY:a}}function Yt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,s){var a=[],l=[];return i=e(i),s=e(s),function(e,r,o,i,s,a){if(e!==o||r!==i){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:Ht(e,o)},{i:l-2,x:Ht(r,i)})}else(o||i)&&s.push("translate("+o+t+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,a,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Ht(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,s.rotate,a,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Ht(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,s.skewX,a,l),function(e,t,n,r,i,s){if(e!==n||t!==r){var a=i.push(o(i)+"scale(",null,",",null,")");s.push({i:a-4,x:Ht(e,n)},{i:a-2,x:Ht(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,a,l),i=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var Zt=Yt((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wt:Gt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Xt=Yt((function(e){return null==e?Wt:(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",e),(e=qt.transform.baseVal.consolidate())?Gt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Wt)}),", ",")",")");function Kt(e){return((e=Math.exp(e))+1/e)/2}var Jt,en,tn=function e(t,n,r){function o(e,o){var i,s,a=e[0],l=e[1],c=e[2],u=o[0],d=o[1],h=o[2],f=u-a,p=d-l,g=f*f+p*p;if(g<1e-12)s=Math.log(h/c)/t,i=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),y=(h*h-c*c+r*g)/(2*c*n*m),b=(h*h-c*c-r*g)/(2*h*n*m),v=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(b*b+1)-b);s=(w-v)/t,i=function(e){var r,o=e*s,i=Kt(v),u=c/(n*m)*(i*(r=t*o+v,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+u*f,l+u*p,c*i/Kt(t*o+v)]}}return i.duration=1e3*s*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),nn=0,rn=0,on=0,sn=1e3,an=0,ln=0,cn=0,un="object"==typeof performance&&performance.now?performance:Date,dn=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hn(){return ln||(dn(fn),ln=un.now()+cn)}function fn(){ln=0}function pn(){this._call=this._time=this._next=null}function gn(e,t,n){var r=new pn;return r.restart(e,t,n),r}function mn(){ln=(an=un.now())+cn,nn=rn=0;try{!function(){hn(),++nn;for(var e,t=Jt;t;)(e=ln-t._time)>=0&&t._call.call(void 0,e),t=t._next;--nn}()}finally{nn=0,function(){var e,t,n=Jt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Jt=t);en=e,bn(r)}(),ln=0}}function yn(){var e=un.now(),t=e-an;t>sn&&(cn-=t,an=e)}function bn(e){nn||(rn&&(rn=clearTimeout(rn)),e-ln>24?(e<1/0&&(rn=setTimeout(mn,e-un.now()-cn)),on&&(on=clearInterval(on))):(on||(an=un.now(),on=setInterval(yn,sn)),nn=1,dn(mn)))}function vn(e,t,n){var r=new pn;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}pn.prototype=gn.prototype={constructor:pn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?hn():+n)+(null==t?0:+t),this._next||en===this||(en?en._next=this:Jt=this,en=this),this._call=e,this._time=n,bn()},stop:function(){this._call&&(this._call=null,this._time=1/0,bn())}};var wn=C("start","end","cancel","interrupt"),xn=[],_n=0,Sn=1,En=2,kn=3,Cn=4,Mn=5,An=6;function Pn(e,t,n,r,o,i){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=Sn,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(i){var c,u,d,h;if(n.state!==Sn)return l();for(c in o)if((h=o[c]).name===n.name){if(h.state===kn)return vn(s);h.state===Cn?(h.state=An,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=An,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(vn((function(){n.state===kn&&(n.state=Cn,n.timer.restart(a,n.delay,n.time),a(i))})),n.state=En,n.on.call("start",e,e.__data__,n.index,n.group),n.state===En){for(n.state=kn,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=Mn,1),i=-1,s=r.length;++i<s;)r[i].call(e,o);n.state===Mn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=An,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=gn(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:wn,tween:xn,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:_n})}function In(e,t){var n=On(e,t);if(n.state>_n)throw new Error("too late; already scheduled");return n}function Nn(e,t){var n=On(e,t);if(n.state>kn)throw new Error("too late; already running");return n}function On(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rn(e,t){var n,r,o,i=e.__transition,s=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>En&&n.state<Mn,n.state=An,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):s=!1;s&&delete e.__transition}}function Tn(e,t){var n,r;return function(){var o=Nn(this,e),i=o.tween;if(i!==n)for(var s=0,a=(r=n=i).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}o.tween=r}}function Ln(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=Nn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}i.tween=o}}function Dn(e,t,n){var r=e._id;return e.each((function(){var e=Nn(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return On(e,r).value[t]}}function Bn(e,t){var n;return("number"==typeof t?Ht:t instanceof xt?jt:(n=xt(t))?(t=n,jt):Vt)(e,t)}function zn(e){return function(){this.removeAttribute(e)}}function $n(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jn(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Hn(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Fn(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttribute(e)}}function Un(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function Vn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function qn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Qn(e,t){return function(){In(this,e).delay=+t.apply(this,arguments)}}function Wn(e,t){return t=+t,function(){In(this,e).delay=t}}function Gn(e,t){return function(){Nn(this,e).duration=+t.apply(this,arguments)}}function Yn(e,t){return t=+t,function(){Nn(this,e).duration=t}}var Zn=He.prototype.constructor;function Xn(e){return function(){this.style.removeProperty(e)}}var Kn=0;function Jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function er(){return++Kn}var tr=He.prototype;Jn.prototype={constructor:Jn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=B(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a,l,c=r[s],u=c.length,d=i[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,Pn(d[h],t,n,h,d,On(a,n)));return new Jn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=$(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var l,c=r[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=On(l,n),g=0,m=f.length;g<m;++g)(h=f[g])&&Pn(h,t,n,g,f,p);i.push(f),s.push(l)}return new Jn(i,s,t,n)},selectChild:tr.selectChild,selectChildren:tr.selectChildren,filter:function(e){"function"!=typeof e&&(e=H(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new Jn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<r;++a)s[a]=t[a];return new Jn(s,this._parents,this._name,this._id)},selection:function(){return new Zn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=er(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=On(s,t);Pn(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Jn(r,this._parents,e,n)},call:tr.call,nodes:tr.nodes,node:tr.node,size:tr.size,empty:tr.empty,each:tr.each,on:function(e,t){var n=this._id;return arguments.length<2?On(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?In:Nn;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}(n,e,t))},attr:function(e,t){var n=O(e),r="transform"===n?Xt:Bn;return this.attrTween(e,"function"==typeof t?(n.local?Un:Fn)(n,r,Dn(this,"attr."+e,t)):null==t?(n.local?$n:zn)(n):(n.local?Hn:jn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=O(e);return this.tween(n,(r.local?Vn:qn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Zt:Bn;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=ue(this,e),s=(this.style.removeProperty(e),ue(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}(e,r)).on("end.style."+e,Xn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var s=ue(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=ue(this,e)),s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a))}}(e,r,Dn(this,"style."+e,t))).each(function(e,t){var n,r,o,i,s="style."+t,a="end."+s;return function(){var l=Nn(this,e),c=l.on,u=null==l.value[s]?i||(i=Xn(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(a,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var s=ue(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Dn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=On(this.node(),n).tween,i=0,s=o.length;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Tn:Ln)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Qn:Wn)(t,e)):On(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Gn:Yn)(t,e)):On(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Nn(this,e).ease=t}}(t,e)):On(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Nn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,s){var a={value:s},l={value:function(){0==--o&&i()}};n.each((function(){var n=Nn(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:tr[Symbol.iterator]};var nr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function rr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}He.prototype.interrupt=function(e){return this.each((function(){Rn(this,e)}))},He.prototype.transition=function(e){var t,n;e instanceof Jn?(t=e._id,e=e._name):(t=er(),(n=nr).time=hn(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)(s=a[c])&&Pn(s,e,t,c,a,n||rr(s,t));return new Jn(r,this._parents,e,t)};var or=e=>()=>e;function ir(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function sr(e,t,n){this.k=e,this.x=t,this.y=n}sr.prototype={constructor:sr,scale:function(e){return 1===e?this:new sr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new sr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ar=new sr(1,0,0);function lr(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ar;return e.__zoom}function cr(e){e.stopImmediatePropagation()}function ur(e){e.preventDefault(),e.stopImmediatePropagation()}function dr(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function hr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function fr(){return this.__zoom||ar}function pr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gr(){return navigator.maxTouchPoints||"ontouchstart"in this}function mr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function yr(){var e,t,n,r=dr,o=hr,i=mr,s=pr,a=gr,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=tn,h=C("start","zoom","end"),f=500,p=150,g=0,m=10;function y(e){e.property("__zoom",fr).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new sr(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new sr(e.k,r,o)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,r){e.on("start.zoom",(function(){_(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,s=_(e,i).event(r),a=o.apply(e,i),l=null==n?w(a):"function"==typeof n?n.apply(e,i):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new sr(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function _(e,t,n){return!n&&e.__zooming||new S(e,t)}function S(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function E(e,...t){if(r.apply(this,arguments)){var n=_(this,t).event(e),o=this.__zoom,a=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,s.apply(this,arguments)))),u=Ue(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=o.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(o.k===a)return;n.mouse=[u,o.invert(u)],Rn(this),n.start()}ur(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),p),n.zoom("mouse",i(v(b(o,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function k(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,s=_(this,t,!0).event(e),a=Fe(e.view).on("mousemove.zoom",(function(e){if(ur(e),!s.moved){var t=e.clientX-u,n=e.clientY-d;s.moved=t*t+n*n>g}s.event(e).zoom("mouse",i(v(s.that.__zoom,s.mouse[0]=Ue(e,o),s.mouse[1]),s.extent,c))}),!0).on("mouseup.zoom",(function(e){a.on("mousemove.zoom mouseup.zoom",null),Ye(e.view,s.moved),ur(e),s.event(e).end()}),!0),l=Ue(e,o),u=e.clientX,d=e.clientY;Ge(e.view),cr(e),s.mouse=[l,this.__zoom.invert(l)],Rn(this),s.start()}}function M(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,s=Ue(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(s),l=n.k*(e.shiftKey?.5:2),d=i(v(b(n,l),s,a),o.apply(this,t),c);ur(e),u>0?Fe(this).transition().duration(u).call(x,d,s,e):Fe(this).call(y.transform,d,s,e)}}function A(n,...o){if(r.apply(this,arguments)){var i,s,a,l,c=n.touches,u=c.length,d=_(this,o,n.changedTouches.length===u).event(n);for(cr(n),s=0;s<u;++s)l=[l=Ue(a=c[s],this),this.__zoom.invert(l),a.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),f)),Rn(this),d.start())}}function P(e,...t){if(this.__zooming){var n,r,o,s,a=_(this,t).event(e),l=e.changedTouches,u=l.length;for(ur(e),n=0;n<u;++n)o=Ue(r=l[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=o);if(r=a.that.__zoom,a.touch1){var d=a.touch0[0],h=a.touch0[1],f=a.touch1[0],p=a.touch1[1],g=(g=f[0]-d[0])*g+(g=f[1]-d[1])*g,m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m;r=b(r,Math.sqrt(g/m)),o=[(d[0]+f[0])/2,(d[1]+f[1])/2],s=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],s=a.touch0[1]}a.zoom("touch",i(v(r,o,s),a.extent,c))}}function I(e,...r){if(this.__zooming){var o,i,s=_(this,r).event(e),a=e.changedTouches,l=a.length;for(cr(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),o=0;o<l;++o)i=a[o],s.touch0&&s.touch0[2]===i.identifier?delete s.touch0:s.touch1&&s.touch1[2]===i.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(i=Ue(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<m)){var c=Fe(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return y.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",fr),e!==o?x(e,t,n,r):o.interrupt().each((function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,r){y.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},y.scaleTo=function(e,t,n,r){y.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,s=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return i(v(b(r,l),s,a),e,c)}),n,r)},y.translateBy=function(e,t,n,r){y.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},y.translateTo=function(e,t,n,r,s){y.transform(e,(function(){var e=o.apply(this,arguments),s=this.__zoom,a=null==r?w(e):"function"==typeof r?r.apply(this,arguments):r;return i(ar.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,s)},S.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Fe(this.that).datum();h.call(e,this.that,new ir(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:h}),t)}},y.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:or(+e),y):s},y.filter=function(e){return arguments.length?(r="function"==typeof e?e:or(!!e),y):r},y.touchable=function(e){return arguments.length?(a="function"==typeof e?e:or(!!e),y):a},y.extent=function(e){return arguments.length?(o="function"==typeof e?e:or([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):o},y.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],y):[l[0],l[1]]},y.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(e){return arguments.length?(i=e,y):i},y.duration=function(e){return arguments.length?(u=+e,y):u},y.interpolate=function(e){return arguments.length?(d=e,y):d},y.on=function(){var e=h.on.apply(h,arguments);return e===h?y:e},y.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,y):Math.sqrt(g)},y.tapDistance=function(e){return arguments.length?(m=+e,y):m},y}lr.prototype=sr.prototype;const br={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${n?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},vr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wr=["Enter"," ","Escape"];var xr,_r,Sr;!function(e){e.Strict="strict",e.Loose="loose"}(xr||(xr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(_r||(_r={})),function(e){e.Partial="partial",e.Full="full"}(Sr||(Sr={}));const Er={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var kr,Cr,Mr;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(kr||(kr={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Cr||(Cr={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Mr||(Mr={}));const Ar={[Mr.Left]:Mr.Right,[Mr.Right]:Mr.Left,[Mr.Top]:Mr.Bottom,[Mr.Bottom]:Mr.Top};function Pr(e){return null===e?null:e?"valid":"invalid"}const Ir=e=>"id"in e&&"source"in e&&"target"in e,Nr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Or=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach((t=>{t.source===e.id&&r.add(t.target)})),t.filter((e=>r.has(e.id)))},Rr=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach((t=>{t.target===e.id&&r.add(t.source)})),t.filter((e=>r.has(e.id)))},Tr=(e,t=[0,0])=>{const{width:n,height:r}=ao(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},Lr=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Yr(e);n=qr(n,t)}})),Wr(n)},Dr=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...no(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(const[,t]of e){const{measured:e,selectable:n=!0,hidden:r=!1}=t,o=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null;if(s&&!n||r)continue;const u=Xr(a,Gr(t));(null===o||null===c||i&&u>0||u>=(o??0)*(c??0)||t.dragging)&&l.push(t)}return l},Br=(e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))};function zr(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!(e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden))||r&&!r.has(e.id)||n.set(e.id,e)})),n}async function $r({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(0===e.size)return Promise.resolve(!1);const a=Lr(e),l=oo(a,t,n,s?.minZoom??o,s?.maxZoom??i,s?.padding??.1);return await r.setViewport(l,{duration:s?.duration}),Promise.resolve(!0)}function jr({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let d=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.measured?.width??0),t[1][1]-(e.measured?.height??0)]]:t}(s,s.extent||o);if("parent"!==s.extent||s.expandParent)a&&so(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);else if(a){const e=s.measured.width,t=s.measured.height,n=a.measured.width,r=a.measured.height;e&&t&&n&&r&&(d=[[l,c],[l+n-e,c+r-t]])}else i?.("005",br.error005());const h=so(d)?Fr(t,d):t;return{position:{x:h.x-l+s.measured.width*u[0],y:h.y-c+s.measured.height*u[1]},positionAbsolute:h}}const Hr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Fr=(e={x:0,y:0},t)=>({x:Hr(e.x,t[0][0],t[1][0]),y:Hr(e.y,t[0][1],t[1][1])}),Ur=(e,t,n)=>e<t?Hr(Math.abs(e-t),1,t)/t:e>n?-Hr(Math.abs(e-n),1,t)/t:0,Vr=(e,t,n=15,r=40)=>[Ur(e.x,r,t.width-r)*n,Ur(e.y,r,t.height-r)*n],qr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Wr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Gr=(e,t=[0,0])=>{const{x:n,y:r}=Nr(e)?e.internals.positionAbsolute:Tr(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Yr=(e,t=[0,0])=>{const{x:n,y:r}=Nr(e)?e.internals.positionAbsolute:Tr(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Zr=(e,t)=>Wr(qr(Qr(e),Qr(t))),Xr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Kr=e=>Jr(e.width)&&Jr(e.height)&&Jr(e.x)&&Jr(e.y),Jr=e=>!isNaN(e)&&isFinite(e),eo=(e,t)=>{},to=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),no=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?to(a,s):a},ro=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),oo=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),l=Math.min(s,a),c=Hr(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},io=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function so(e){return void 0!==e&&"parent"!==e}function ao(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function lo(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function co(e,t={width:0,height:0},n,r,o){let i=n;const s={...e};for(;i;){const e=r.get(i);if(i=e?.parentId,e){const n=e.origin||o;s.x+=e.internals.positionAbsolute.x-(t.width??0)*n[0],s.y+=e.internals.positionAbsolute.y-(t.height??0)*n[1]}}return s}function uo(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){const{x:o,y:i}=yo(e),s=no({x:o,y:i},r),{x:a,y:l}=n?to(s,t):s;return{xSnapped:a,ySnapped:l,...s}}const ho=e=>({width:e.offsetWidth,height:e.offsetHeight}),fo=e=>e.getRootNode?.()||window?.document,po=["INPUT","SELECT","TEXTAREA"];function go(e){const t=e.composedPath?.()?.[0]||e.target;return po.includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const mo=e=>"clientX"in e,yo=(e,t)=>{const n=mo(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},bo=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...ho(t)}})):null};function vo({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=.125*e+.375*o+.375*s+.125*n,c=.125*t+.375*i+.375*a+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function wo(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function xo({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Mr.Left:return[t-wo(t-r,i),n];case Mr.Right:return[t+wo(r-t,i),n];case Mr.Top:return[t,n-wo(n-o,i)];case Mr.Bottom:return[t,n+wo(o-n,i)]}}function _o({sourceX:e,sourceY:t,sourcePosition:n=Mr.Bottom,targetX:r,targetY:o,targetPosition:i=Mr.Top,curvature:s=.25}){const[a,l]=xo({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,u]=xo({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[d,h,f,p]=vo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${o}`,d,h,f,p]}function So({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2;return[i,r<t?r+s:r-s,o,s]}function Eo({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=qr(Yr(e),Yr(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Xr(s,Wr(i))>0}const ko=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Co=(e,t)=>{if(!e.source||!e.target)return t;let n;return n=Ir(e)?{...e}:{...e,id:ko(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function Mo({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=So({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const Ao={[Mr.Left]:{x:-1,y:0},[Mr.Right]:{x:1,y:0},[Mr.Top]:{x:0,y:-1},[Mr.Bottom]:{x:0,y:1}},Po=({source:e,sourcePosition:t=Mr.Bottom,target:n})=>t===Mr.Left||t===Mr.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Io=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function No({sourceX:e,sourceY:t,sourcePosition:n=Mr.Bottom,targetX:r,targetY:o,targetPosition:i=Mr.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[u,d,h,f,p]=function({source:e,sourcePosition:t=Mr.Bottom,target:n,targetPosition:r=Mr.Top,center:o,offset:i}){const s=Ao[t],a=Ao[r],l={x:e.x+s.x*i,y:e.y+s.y*i},c={x:n.x+a.x*i,y:n.y+a.y*i},u=Po({source:l,sourcePosition:t,target:c}),d=0!==u.x?"x":"y",h=u[d];let f,p,g=[];const m={x:0,y:0},y={x:0,y:0},[b,v,w,x]=So({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]==-1){f=o.x??b,p=o.y??v;const e=[{x:f,y:l.y},{x:f,y:c.y}],t=[{x:l.x,y:p},{x:c.x,y:p}];g=s[d]===h?"x"===d?e:t:"x"===d?t:e}else{const o=[{x:l.x,y:c.y}],u=[{x:c.x,y:l.y}];if(g="x"===d?s.x===h?u:o:s.y===h?o:u,t===r){const t=Math.abs(e[d]-n[d]);if(t<=i){const r=Math.min(i-1,i-t);s[d]===h?m[d]=(l[d]>e[d]?-1:1)*r:y[d]=(c[d]>n[d]?-1:1)*r}}if(t!==r){const e="x"===d?"y":"x",t=s[d]===a[e],n=l[e]>c[e],r=l[e]<c[e];(1===s[d]&&(!t&&n||t&&r)||1!==s[d]&&(!t&&r||t&&n))&&(g="x"===d?o:u)}const b={x:l.x+m.x,y:l.y+m.y},v={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(b.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(b.y-g[0].y),Math.abs(v.y-g[0].y))?(f=(b.x+v.x)/2,p=g[0].y):(f=g[0].x,p=(b.y+v.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+y.x,y:c.y+y.y},n],f,p,w,x]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:l},offset:c}),g=u.reduce(((e,t,n)=>{let r="";return r=n>0&&n<u.length-1?function(e,t,n,r){const o=Math.min(Io(e,t)/2,Io(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s)return`L ${i+o*(e.x<n.x?-1:1)},${s}Q ${i},${s} ${i},${s+o*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${i},${s+o*(e.y<n.y?-1:1)}Q ${i},${s} ${i+o*a},${s}`}(u[n-1],t,u[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r}),"");return[g,d,h,f,p]}function Oo(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ro(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function To(e,t,n=Mr.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??ao(e);if(r)return{x:o+s/2,y:i+a/2};switch(t?.position??n){case Mr.Top:return{x:o+s/2,y:i};case Mr.Right:return{x:o+s,y:i+a/2};case Mr.Bottom:return{x:o+s/2,y:i+a};case Mr.Left:return{x:o,y:i+a/2}}}function Lo(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Do(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}const Bo={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},zo={...Bo,checkEquality:!0};function $o(e,t,n,r){const o={...zo,...r},i=new Map(t);t.clear(),n.clear();const s=r?.elevateNodesOnSelect?1e3:0;for(const a of e){let e=i.get(a.id);o.checkEquality&&a===e?.internals.userNode||(e={...o.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:Tr(a,o.nodeOrigin),handleBounds:a.measured?e?.internals.handleBounds:void 0,z:Ho(a,s),userNode:a}}),t.set(a.id,e),a.parentId&&jo(e,t,n,r)}}function jo(e,t,n,r){const o={...Bo,...r},i=e.parentId,s=t.get(i);if(!s)return void console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);const a=n.get(i);a?a.set(e.id,e):n.set(i,new Map([[e.id,e]]));const l=r?.elevateNodesOnSelect?1e3:0,{x:c,y:u,z:d}=function(e,t,n,r){const o=Tr(e,n),i=Ho(e,r),s=t.internals.z??0;return{x:t.internals.positionAbsolute.x+o.x,y:t.internals.positionAbsolute.y+o.y,z:s>i?s:i}}(e,s,o.nodeOrigin,l),h=e.internals.positionAbsolute,f=c!==h.x||u!==h.y;(f||d!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:f?{x:c,y:u}:h,z:d})}function Ho(e,t){return(Jr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Fo(e,t,n,r=[0,0]){const o=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const r=i.get(n.parentId)?.expandedRect??Gr(e),o=Zr(r,n.rect);i.set(n.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},s)=>{const a=i.internals.positionAbsolute,l=ao(i),c=i.origin??r,u=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,d=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),p=(h-l.width)*c[0],g=(f-l.height)*c[1];(u>0||d>0||p||g)&&(o.push({id:s,type:"position",position:{x:i.position.x-u+p,y:i.position.y-d+g}}),n.get(s)?.forEach((t=>{e.some((e=>e.id===t.id))||o.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+d}})}))),(l.width<t.width||l.height<t.height||u||d)&&o.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:h+(u?c[0]*u-p:0),height:f+(d?c[1]*d-g:0)}})})),o}function Uo(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:s=null}=r,a=`${n}-source-${i}`,l=`${o}-target-${s}`,c=e.get(a)||new Map,u=e.get(l)||new Map,d={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(a,c.set(`${o}-${s}`,d)),e.set(l,u.set(`${n}-${i}`,d))}}function Vo(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Vo(n,t))}function qo(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Qo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];const i=n.get(e).internals.userNode;return[{...i,position:t.get(e)?.position||i.position,dragging:r},o]}function Wo({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,d=!1,h=null,f=!1;return{update:function({noDragClassName:p,handleSelector:g,domNode:m,isSelectable:y,nodeId:b,nodeClickDistance:v=0}){function w({x:e,y:n},o){const{nodeLookup:s,nodeExtent:l,snapGrid:c,snapToGrid:u,nodeOrigin:d,onNodeDrag:h,onSelectionDrag:f,onError:p,updateNodePositions:g}=t();i={x:e,y:n};let m=!1,y={x:0,y:0,x2:0,y2:0};if(a.size>1&&l){const e=Lr(a);y=Qr(e)}for(const[t,r]of a){let o={x:e-r.distance.x,y:n-r.distance.y};u&&(o=to(o,c));let i=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(a.size>1&&l&&!r.extent){const{positionAbsolute:e}=r.internals,t=e.x-y.x+l[0][0],n=e.x+r.measured.width-y.x2+l[1][0];i=[[t,e.y-y.y+l[0][1]],[n,e.y+r.measured.height-y.y2+l[1][1]]]}const{position:h,positionAbsolute:f}=jr({nodeId:t,nextPosition:o,nodeLookup:s,nodeExtent:i,nodeOrigin:d,onError:p});m=m||r.position.x!==h.x||r.position.y!==h.y,r.position=h,r.internals.positionAbsolute=f}if(m&&(g(a,!0),o&&(r||h||!b&&f))){const[e,t]=Qo({nodeId:b,dragItems:a,nodeLookup:s});r?.(o,a,e,t),h?.(o,e,t),b||f?.(o,t)}}async function x(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:r}=t(),[o,a]=Vr(c,u,r);0===o&&0===a||(i.x=(i.x??0)-o/e[2],i.y=(i.y??0)-a/e[2],await n({x:o,y:a})&&w(i,null)),s=requestAnimationFrame(x)}function _(r){const{nodeLookup:o,multiSelectionActive:s,nodesDraggable:l,transform:c,snapGrid:u,snapToGrid:h,selectNodesOnDrag:f,onNodeDragStart:p,onSelectionDragStart:g,unselectNodesAndEdges:m}=t();d=!0,f&&y||s||!b||o.get(b)?.selected||m(),y&&f&&b&&e?.(b);const v=uo(r.sourceEvent,{transform:c,snapGrid:u,snapToGrid:h});if(i=v,a=function(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Vo(s,e))&&(s.draggable||t&&void 0===s.draggable)){const t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,v,b),a.size>0&&(n||p||!b&&g)){const[e,t]=Qo({nodeId:b,dragItems:a,nodeLookup:o});n?.(r.sourceEvent,a,e,t),p?.(r.sourceEvent,e,t),b||g?.(r.sourceEvent,t)}}h=Fe(m);const S=nt().clickDistance(v).on("start",(e=>{const{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:s,snapToGrid:a}=t();f=!1,0===r&&_(e);const l=uo(e.sourceEvent,{transform:o,snapGrid:s,snapToGrid:a});i=l,u=n?.getBoundingClientRect()||null,c=yo(e.sourceEvent,u)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:s,nodeDragThreshold:h}=t(),p=uo(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:s});if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(f=!0),!f){if(!l&&n&&d&&(l=!0,x()),!d){const t=p.xSnapped-(i.x??0),n=p.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>h&&_(e)}(i.x!==p.xSnapped||i.y!==p.ySnapped)&&a&&d&&(c=yo(e.sourceEvent,u),w(p,e.sourceEvent))}})).on("end",(e=>{if(d&&!f&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:s}=t();if(r(a,!1),o||i||!b&&s){const[t,r]=Qo({nodeId:b,dragItems:a,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,a,t,r),i?.(e.sourceEvent,t,r),b||s?.(e.sourceEvent,r)}}})).filter((e=>{const t=e.target;return!e.button&&(!p||!qo(t,`.${p}`,m))&&(!g||qo(t,g,m))}));h.call(S)},destroy:function(){h?.on(".drag",null)}}}function Go(e,t,n,r){let o=null;return[(t[n]||[]).reduce(((t,i)=>{if(e.id===r.nodeId&&n===r.handleType&&i.id===r.handleId)o=i;else{const n=To(e,i,i.position,!0);t.push({...i,...n})}return t}),[]),o]}function Yo(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Zo=()=>!0;function Xo(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:c=Zo,handleLookup:u}){const d="target"===i,h=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:p}=yo(e),g=s.elementFromPoint(f,p),m=g?.classList.contains(`${a}-flow__handle`)?g:h,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=Yo(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),s=m.classList.contains("connectable"),a=m.classList.contains("connectableend");if(!t)return y;const l={source:d?t:r,sourceHandle:d?i:o,target:d?r:t,targetHandle:d?o:i};y.connection=l;const h=s&&a&&(n===xr.Strict?d&&"source"===e||!d&&"target"===e:t!==r||i!==o);y.isValid=h&&c(l);const f=u?.get(`${t}-${e}-${i}`);f&&(y.toHandle={...f})}return y}const Ko={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:h,cancelConnection:f,onConnectStart:p,onConnect:g,onConnectEnd:m,isValidConnection:y=Zo,onReconnectEnd:b,updateConnection:v,getTransform:w,getFromHandle:x,autoPanSpeed:_}){const S=fo(e.target);let E,k=0;const{x:C,y:M}=yo(e),A=S?.elementFromPoint(C,M),P=Yo(i,A),I=a?.getBoundingClientRect();if(!I||!P)return;let N=yo(e,I),O=!1,R=null,T=!1,L=null;const[D,B]=function({nodeLookup:e,nodeId:t,handleId:n,handleType:r}){const o=new Map,i={nodeId:t,handleId:n,handleType:r};let s=null;for(const t of e.values())if(t.internals.handleBounds){const[e,n]=Go(t,t.internals.handleBounds,"source",i),[r,a]=Go(t,t.internals.handleBounds,"target",i);s=s||(n??a),[...e,...r].forEach((e=>o.set(`${e.nodeId}-${e.type}-${e.id}`,e)))}if(!s){const n=e.get(t);if(n?.internals.handleBounds){i.handleType="source"===r?"target":"source";const[,e]=Go(n,n.internals.handleBounds,i.handleType,i);s=e}}return[o,s]}({nodeLookup:l,nodeId:o,handleId:r,handleType:P});function z(){if(!u||!I)return;const[e,t]=Vr(N,I,_);h({x:e,y:t}),k=requestAnimationFrame(z)}const $={...B,nodeId:o,type:P,position:B.position},j=l.get(o),H={inProgress:!0,isValid:null,from:To(j,$,Mr.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:j,to:N,toHandle:null,toPosition:Ar[$.position],toNode:null};v(H);let F=H;function U(e){if(!x()||!$)return void V(e);const i=w();N=yo(e,I),E=function(e,t,n){let r=[],o=1/0;for(const i of n.values()){const n=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));n<=t&&(n<o?r=[i]:n===o&&r.push(i),o=n)}return r.length?1===r.length?r[0]:r.find((e=>"target"===e.type))||r[0]:null}(no(N,i,!1,[1,1]),n,D),O||(z(),O=!0);const a=Xo(e,{handle:E,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:S,lib:c,flowId:d,handleLookup:D});L=a.handleDomNode,R=a.connection,T=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!E,a.isValid);const u={...F,isValid:T,to:E&&T?ro({x:E.x,y:E.y},i):N,toHandle:a.toHandle,toPosition:T&&a.toHandle?a.toHandle.position:Ar[$.position],toNode:a.toHandle?l.get(a.toHandle.nodeId):null};T&&E&&F.toHandle&&u.toHandle&&F.toHandle.type===u.toHandle.type&&F.toHandle.nodeId===u.toHandle.nodeId&&F.toHandle.id===u.toHandle.id||(v(u),F=u)}function V(e){(E||L)&&R&&T&&g?.(R),m?.(e),i&&b?.(e),f(),cancelAnimationFrame(k),O=!1,T=!1,R=null,L=null,S.removeEventListener("mousemove",U),S.removeEventListener("mouseup",V),S.removeEventListener("touchmove",U),S.removeEventListener("touchend",V)}p?.(e,{nodeId:o,handleId:r,handleType:P}),S.addEventListener("mousemove",U),S.addEventListener("mouseup",V),S.addEventListener("touchmove",U),S.addEventListener("touchend",V)},isValid:Xo};const Jo=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ei=e=>({x:e.x,y:e.y,zoom:e.k}),ti=({x:e,y:t,zoom:n})=>ar.translate(e,t).scale(n),ni=(e,t)=>e.target.closest(`.${t}`),ri=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),oi=(e,t=0,n=()=>{})=>{const r="number"==typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},ii=e=>{const t=e.ctrlKey&&io()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function si({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onTransformChange:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=yr().clickDistance(!Jr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=Fe(e).call(f);v({x:i.x,y:i.y,zoom:Hr(i.zoom,t,n)},[[0,0],[h.width,h.height]],o);const g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function y(e,t){return p?new Promise((n=>{f?.transform(oi(p,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function b(){f.on("zoom",null)}async function v(e,t,n){const r=ti(e),o=f?.constrain()(r,t,n);return o&&await y(o),new Promise((e=>e(o)))}return f.wheelDelta(ii),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:i,panOnScrollMode:h,panOnScrollSpeed:y,preventScrolling:v,zoomOnPinch:w,zoomOnScroll:x,zoomOnDoubleClick:_,zoomActivationKeyPressed:S,lib:E}){r&&!d.isZoomingOrPanning&&b();const k=o&&!S&&!r?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(ni(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&s){const e=Ue(u),t=ii(u),o=d*Math.pow(2,t);return void r.scaleTo(n,o,e,u)}const h=1===u.deltaMode?20:1;let f=o===_r.Vertical?0:u.deltaX*h,p=o===_r.Horizontal?0:u.deltaY*h;!io()&&u.shiftKey&&o!==_r.Vertical&&(f=u.deltaY*h,p=0),r.translateBy(n,-f/d*i,-p/d*i,{internal:!0});const g=ei(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(u,g)),e.isPanScrolling&&(l?.(u,g),e.panScrollTimeout=setTimeout((()=>{c?.(u,g),e.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:p,d3Zoom:f,panOnScrollMode:h,panOnScrollSpeed:y,zoomOnPinch:w,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&"wheel"===r.type&&!r.ctrlKey||ni(r,e))return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:g});if(p.on("wheel.zoom",k,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=ei(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,"mousedown"===r.sourceEvent?.type&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!(!n||!ri(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,ei(i.transform))}}({zoomPanValues:d,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:s,onTransformChange:c});f.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&ri(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&Jo(e.prevViewport,s.transform))){const t=ei(s.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{o?.(s.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:d,panOnDrag:i,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:u});f.on("end",r)}const C=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{const d=e||t,h=n&&u.ctrlKey;if(1===u.button&&"mousedown"===u.type&&(ni(u,`${c}-flow__node`)||ni(u,`${c}-flow__edge`)))return!0;if(!(r||d||o||i||n))return!1;if(s)return!1;if(ni(u,a)&&"wheel"===u.type)return!1;if(ni(u,l)&&("wheel"!==u.type||o&&"wheel"===u.type&&!e))return!1;if(!n&&u.ctrlKey&&"wheel"===u.type)return!1;if(!n&&"touchstart"===u.type&&u.touches?.length>1)return u.preventDefault(),!1;if(!d&&!o&&!h&&"wheel"===u.type)return!1;if(!r&&("mousedown"===u.type||"touchstart"===u.type))return!1;if(Array.isArray(r)&&!r.includes(u.button)&&"mousedown"===u.type)return!1;const f=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||"wheel"===u.type)&&f}}({zoomActivationKeyPressed:S,panOnDrag:i,zoomOnScroll:x,panOnScroll:o,zoomOnDoubleClick:_,zoomOnPinch:w,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:E});f.filter(C),_?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:b,setViewport:async function(e,t){const n=ti(e);return await y(n,t),new Promise((e=>e(n)))},setViewportConstrained:v,getViewport:function(){const e=p?lr(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise((n=>{f?.scaleTo(oi(p,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise((n=>{f?.scaleBy(oi(p,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(p){const t=ti(e),n=p.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||f?.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Jr(e)||e<0?0:e;f?.clickDistance(t)}}}var ai;function li(e,t){return Math.max(0,t-e)}function ci(e,t){return Math.max(0,e-t)}function ui(e,t,n){return Math.max(0,t-e,e-n)}function di(e,t){return e?!t:t}!function(e){e.Line="line",e.Handle="handle"}(ai||(ai={}));const hi={width:0,height:0,x:0,y:0},fi={...hi,pointerX:0,pointerY:0,aspectRatio:1};function pi(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,l=n[1]*s;return[[r-a,o-l],[r+i-a,o+s-l]]}function gi({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Fe(e);return{update:function({controlPosition:e,boundaries:s,keepAspectRatio:a,onResizeStart:l,onResize:c,onResizeEnd:u,shouldResize:d}){let h={...hi},f={...fi};const p=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let g,m,y,b,v=[];const w=nt().on("start",(e=>{const{nodeLookup:r,transform:o,snapGrid:i,snapToGrid:s,nodeOrigin:a}=n();if(g=r.get(t),!g)return;const{xSnapped:c,ySnapped:u}=uo(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s});h={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},f={...h,pointerX:c,pointerY:u,aspectRatio:h.width/h.height},m=void 0,g.parentId&&("parent"===g.extent||g.expandParent)&&(m=r.get(g.parentId),y=m&&"parent"===g.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(m):void 0),v=[],b=void 0;for(const[e,n]of r)if(n.parentId===t&&(v.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=pi(n,g,n.origin??a);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}l?.(e,{...h})})).on("drag",(e=>{const{transform:t,snapGrid:o,snapToGrid:i,nodeOrigin:l}=n(),u=uo(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:i}),w=[];if(!g)return;const{x:x,y:_,width:S,height:E}=h,k={},C=g.origin??l,{width:M,height:A,x:P,y:I}=function(e,t,n,r,o,i,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,h=u&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:b}=r,{x:v,y:w,width:x,height:_,aspectRatio:S}=e;let E=Math.floor(u?f-e.pointerX:0),k=Math.floor(d?p-e.pointerY:0);const C=x+(l?-E:E),M=_+(c?-k:k),A=-i[0]*x,P=-i[1]*_;let I=ui(C,g,m),N=ui(M,y,b);if(s){let e=0,t=0;l&&E<0?e=li(v+E+A,s[0][0]):!l&&E>0&&(e=ci(v+C+A,s[1][0])),c&&k<0?t=li(w+k+P,s[0][1]):!c&&k>0&&(t=ci(w+M+P,s[1][1])),I=Math.max(I,e),N=Math.max(N,t)}if(a){let e=0,t=0;l&&E>0?e=ci(v+E,a[0][0]):!l&&E<0&&(e=li(v+C,a[1][0])),c&&k>0?t=ci(w+k,a[0][1]):!c&&k<0&&(t=li(w+M,a[1][1])),I=Math.max(I,e),N=Math.max(N,t)}if(o){if(u){const e=ui(C/S,y,b)*S;if(I=Math.max(I,e),s){let e=0;e=!l&&!c||l&&!c&&h?ci(w+P+C/S,s[1][1])*S:li(w+P+(l?E:-E)/S,s[0][1])*S,I=Math.max(I,e)}if(a){let e=0;e=!l&&!c||l&&!c&&h?li(w+C/S,a[1][1])*S:ci(w+(l?E:-E)/S,a[0][1])*S,I=Math.max(I,e)}}if(d){const e=ui(M*S,g,m)/S;if(N=Math.max(N,e),s){let e=0;e=!l&&!c||c&&!l&&h?ci(v+M*S+A,s[1][0])/S:li(v+(c?k:-k)*S+A,s[0][0])/S,N=Math.max(N,e)}if(a){let e=0;e=!l&&!c||c&&!l&&h?li(v+M*S,a[1][0])/S:ci(v+(c?k:-k)*S,a[0][0])/S,N=Math.max(N,e)}}}k+=k<0?N:-N,E+=E<0?I:-I,o&&(h?C>M*S?k=(di(l,c)?-E:E)/S:E=(di(l,c)?-k:k)*S:u?(k=E/S,c=l):(E=k*S,l=c));const O=l?v+E:v,R=c?w+k:w;return{width:x+(l?-E:E),height:_+(c?-k:k),x:i[0]*E*(l?-1:1)+O,y:i[1]*k*(c?-1:1)+R}}(f,p,u,s,a,C,y,b),N=M!==S,O=A!==E,R=P!==x&&N,T=I!==_&&O;if(!(R||T||N||O))return;if((R||T||1===C[0]||1===C[1])&&(k.x=R?P:h.x,k.y=T?I:h.y,h.x=k.x,h.y=k.y,v.length>0)){const e=P-x,t=I-_;for(const n of v)n.position={x:n.position.x-e+C[0]*(M-S),y:n.position.y-t+C[1]*(A-E)},w.push(n)}if((N||O)&&(k.width=N?M:h.width,k.height=O?A:h.height,h.width=k.width,h.height=k.height),m&&g.expandParent){const e=C[0]*(k.width??0);k.x&&k.x<e&&(h.x=e,f.x=f.x-(k.x-e));const t=C[1]*(k.height??0);k.y&&k.y<t&&(h.y=t,f.y=f.y-(k.y-t))}const L=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(l[0]=-1*l[0]),a&&i&&(l[1]=-1*l[1]),l}({width:h.width,prevWidth:S,height:h.height,prevHeight:E,affectsX:p.affectsX,affectsY:p.affectsY}),D={...h,direction:L},B=d?.(e,D);!1!==B&&(c?.(e,D),r(k,w))})).on("end",(e=>{u?.(e,{...h}),o?.()}));i.call(w)},destroy:function(){i.on(".drag",null)}}}function mi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yi={exports:{}},bi={},vi={exports:{}},wi={},xi=r;var _i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Si=xi.useState,Ei=xi.useEffect,ki=xi.useLayoutEffect,Ci=xi.useDebugValue;function Mi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_i(e,n)}catch(e){return!0}}var Ai=void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=Si({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return ki((function(){o.value=n,o.getSnapshot=t,Mi(o)&&i({inst:o})}),[e,n,t]),Ei((function(){return Mi(o)&&i({inst:o}),e((function(){Mi(o)&&i({inst:o})}))}),[e]),Ci(n),n};wi.useSyncExternalStore=void 0!==xi.useSyncExternalStore?xi.useSyncExternalStore:Ai,vi.exports=wi;var Pi=vi.exports,Ii=r,Ni=Pi;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ri=Ni.useSyncExternalStore,Ti=Ii.useRef,Li=Ii.useEffect,Di=Ii.useMemo,Bi=Ii.useDebugValue;bi.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=Ti(null);if(null===i.current){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Di((function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==o&&s.hasValue){var t=s.value;if(o(t,e))return a=t}return a=e}if(t=a,Oi(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(i=e,a=n)}var i,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,o]);var a=Ri(e,i[0],i[1]);return Li((function(){s.hasValue=!0,s.value=a}),[a]),Bi(a),a},yi.exports=bi;var zi=mi(yi.exports);const $i=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!==(import.meta.env?import.meta.env.MODE:void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,o,i);return i},{useDebugValue:ji}=r,{useSyncExternalStoreWithSelector:Hi}=zi,Fi=e=>e;function Ui(e,t=Fi,n){const r=Hi(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ji(r),r}const Vi=(e,t)=>{const n=(e=>e?$i(e):$i)(e),r=(e,r=t)=>Ui(n,e,r);return Object.assign(r,n),r};function qi(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Qi=o(null),Wi=Qi.Provider,Gi=br.error001();function Yi(e,t){const n=a(Qi);if(null===n)throw new Error(Gi);return Ui(n,e,t)}function Zi(){const e=a(Qi);if(null===e)throw new Error(Gi);return u((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Xi={display:"none"},Ki={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ji="react-flow__node-desc",es="react-flow__edge-desc",ts="react-flow__aria-live",ns=e=>e.ariaLiveMessage;function rs({rfId:t}){const n=Yi(ns);return e("div",{id:`${ts}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Ki,children:n})}function os({rfId:r,disableKeyboardA11y:o}){return t(n,{children:[t("div",{id:`${Ji}-${r}`,style:Xi,children:["Press enter or space to select a node.",!o&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),e("div",{id:`${es}-${r}`,style:Xi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!o&&e(rs,{rfId:r})]})}const is=e=>e.userSelectionActive?"none":"all";function ss({position:t="top-left",children:n,className:r,style:o,...i}){const s=Yi(is),a=`${t}`.split("-");return e("div",{className:E(["react-flow__panel",r,...a]),style:{...o,pointerEvents:s},...i,children:n})}function as({proOptions:t,position:n="bottom-right"}){return t?.hideAttribution?null:e(ss,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:e("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ls=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},cs=e=>e.id;function us(e,t){return qi(e.selectedNodes.map(cs),t.selectedNodes.map(cs))&&qi(e.selectedEdges.map(cs),t.selectedEdges.map(cs))}function ds({onSelectionChange:e}){const t=Zi(),{selectedNodes:n,selectedEdges:r}=Yi(ls,us);return h((()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach((e=>e(o)))}),[n,r,e]),null}const hs=e=>!!e.onSelectionChangeHandlers;function fs({onSelectionChange:t}){const n=Yi(hs);return t||n?e(ds,{onSelectionChange:t}):null}const ps=[0,0],gs={x:0,y:0,zoom:1},ms=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],ys=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),bs={translateExtent:vr,nodeOrigin:ps,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function vs(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=Yi(ys,qi),u=Zi();h((()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=bs,a()})),[]);const f=d(bs);return h((()=>{for(const a of ms){const l=e[a];l!==f.current[a]&&(void 0!==e[a]&&("nodes"===a?t(l):"edges"===a?n(l):"minZoom"===a?r(l):"maxZoom"===a?o(l):"translateExtent"===a?i(l):"nodeExtent"===a?s(l):"paneClickDistance"===a?c(l):"fitView"===a?u.setState({fitViewOnInit:l}):"fitViewOptions"===a?u.setState({fitViewOnInitOptions:l}):u.setState({[a]:l})))}f.current=e}),ms.map((t=>e[t]))),null}function ws(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const xs="undefined"!=typeof document?document:null;function _s(e=null,t={target:xs,actInsideInputWithModifier:!0}){const[n,r]=s(!1),o=d(!1),i=d(new Set([])),[a,l]=u((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.split("+"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return h((()=>{const n=t?.target||xs;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!o.current||o.current&&!t.actInsideInputWithModifier)&&go(e))return!1;const n=Es(e.code,l);i.current.add(e[n]),Ss(a,i.current,!1)&&(e.preventDefault(),r(!0))},s=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&go(e))return!1;const n=Es(e.code,l);Ss(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(e[n]),"Meta"===e.key&&i.current.clear(),o.current=!1},c=()=>{i.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",s),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",s),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,r]),n}function Ss(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function Es(e,t){return t.includes(e)?"code":"key"}const ks=()=>{const e=Zi();return u((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=zr(n,t);return a?$r({nodes:l,width:r,height:o,minZoom:i,maxZoom:s,panZoom:a},t):Promise.resolve(!1)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),l=void 0!==r?.zoom?r.zoom:s,c=o/2-t*l,u=i/2-n*l;return a?(await a.setViewport({x:c,y:u,zoom:l},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=oo(t,r,o,i,s,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),l={x:t.x-s,y:t.y-a};return no(l,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=ro(t,n);return{x:s.x+o,y:s.y+i}}})),[])};function Cs(e,t){const n=[],r=new Map;for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{const e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}else n.push(t.item);for(const e of t){const t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const o={...e};for(const e of t)Ms(e,o);n.push(o)}return n}function Ms(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function As(e,t){return Cs(e,t)}function Ps(e,t){return Cs(e,t)}function Is(e,t){return{id:e,type:"select",selected:t}}function Ns(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push(Is(i.id,e)))}return r}function Os({items:e=[],lookup:t}){const n=[],r=new Map(e.map((e=>[e.id,e])));for(const r of e){const e=t.get(r.id),o=e?.internals?.userNode??e;void 0!==o&&o!==r&&n.push({id:r.id,item:r,type:"replace"}),void 0===o&&n.push({item:r,type:"add"})}for(const[e]of t){void 0===r.get(e)&&n.push({id:e,type:"remove"})}return n}function Rs(e){return{id:e.id,type:"remove"}}const Ts=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e),Ls=e=>Ir(e);function Ds(e){return l(e)}const Bs=f;function zs(e){const[t,n]=s(!1),[r]=s((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n(!0)))));return Bs((()=>{if(!t)return void r.reset();const o=r.get();o.length&&(e(o),r.reset()),n(!1)}),[t]),r}const $s=o(null);function js({children:t}){const n=Zi(),r=zs(c((e=>{const{nodes:t=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:s}=n.getState();let a=t;for(const t of e)a="function"==typeof t?t(a):t;o?r(a):i&&i(Os({items:a,lookup:s}))}),[])),o=zs(c((e=>{const{edges:t=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:s}=n.getState();let a=t;for(const t of e)a="function"==typeof t?t(a):t;o?r(a):i&&i(Os({items:a,lookup:s}))}),[])),i=u((()=>({nodeQueue:r,edgeQueue:o})),[]);return e($s.Provider,{value:i,children:t})}const Hs=e=>!!e.panZoom;function Fs(){const e=ks(),t=Zi(),n=function(){const e=a($s);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=Yi(Hs),o=u((()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState(),o=Ts(e)?e:n.get(e.id),i=o.parentId?co(o.position,o.measured,o.parentId,n,r):o.position,s={id:o.id,position:i,width:o.measured?.width??o.width,height:o.measured?.height??o.height,data:o.data};return Gr(s)},s=(e,t,n={replace:!1})=>{r((r=>r.map((r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&Ts(e)?e:{...r,...e}}return r}))))},a=(e,t,n={replace:!1})=>{o((r=>r.map((r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&Ls(e)?e:{...r,...e}}return r}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,s]=r;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:o,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:s,triggerNodeChanges:a,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=t.getState(),{nodes:d,edges:h}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map((e=>e.id))),s=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&s.find((t=>t.id===e.parentId));(t||n)&&s.push(e)}const a=new Set(t.map((e=>e.id))),l=r.filter((e=>!1!==e.deletable)),c=Br(s,l);for(const e of l)a.has(e.id)&&!c.find((t=>t.id===e.id))&&c.push(e);if(!o)return{edges:c,nodes:s};const u=await o({nodes:s,edges:c});return"boolean"==typeof u?u?{edges:c,nodes:s}:{edges:[],nodes:[]}:u}({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:u}),f=h.length>0,p=d.length>0;if(f){const e=h.map(Rs);s?.(h),l(e)}if(p){const e=d.map(Rs);i?.(d),a(e)}return(p||f)&&c?.({nodes:d,edges:h}),{deletedNodes:d,deletedEdges:h}},getIntersectingNodes:(e,n=!0,r)=>{const o=Kr(e),s=o?e:i(e),a=void 0!==r;return s?(r||t.getState().nodes).filter((r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const l=Gr(a?r:i),c=Xr(l,s);return n&&c>0||c>=s.width*s.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=Kr(e)?e:i(e);if(!r)return!1;const o=Xr(r,t);return n&&o>0||o>=r.width*r.height},updateNode:s,updateNodeData:(e,t,n={replace:!1})=>{s(e,(e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}}),n)},updateEdge:a,updateEdgeData:(e,t,n={replace:!1})=>{a(e,(e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}}),n)}}}),[]);return u((()=>({...o,...e,viewportInitialized:r})),[r])}const Us=e=>e.selected,Vs={actInsideInputWithModifier:!1},qs=window;const Qs={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ws=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Gs({onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:o=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=_r.Free,zoomOnDoubleClick:a=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:u,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:m=!0,children:y,noWheelClassName:b,noPanClassName:v,onViewportChange:w,isControlledViewport:x,paneClickDistance:_}){const S=Zi(),E=d(null),{userSelectionActive:k,lib:C}=Yi(Ws,qi),M=_s(g),A=d();return function(e){const t=Zi();h((()=>{const n=()=>{if(!e.current)return!1;const n=ho(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",br.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(E),h((()=>{if(E.current){A.current=si({domNode:E.current,minZoom:f,maxZoom:p,translateExtent:u,viewport:c,paneClickDistance:_,onTransformChange:e=>{w?.({x:e[0],y:e[1],zoom:e[2]}),x||S.setState({transform:e})},onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=S.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=S.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=S.getState();r?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=A.current.getViewport();return S.setState({panZoom:A.current,transform:[e,t,n],domNode:E.current.closest(".react-flow")}),()=>{A.current?.destroy()}}}),[]),h((()=>{A.current?.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:o,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:a,panOnDrag:l,zoomActivationKeyPressed:M,preventScrolling:m,noPanClassName:v,userSelectionActive:k,noWheelClassName:b,lib:C})}),[t,n,r,o,i,s,a,l,M,m,v,k,b,C]),e("div",{className:"react-flow__renderer",ref:E,style:Qs,children:y})}const Ys=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Zs(){const{userSelectionActive:t,userSelectionRect:n}=Yi(Ys,qi);return t&&n?e("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Xs=(e,t)=>n=>{n.target===t.current&&e?.(n)},Ks=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Js({isSelecting:n,selectionKeyPressed:r,selectionMode:o=Sr.Full,panOnDrag:i,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:g,children:m}){const y=d(null),b=Zi(),v=d(0),w=d(0),x=d(),_=d(new Map),{userSelectionActive:S,elementsSelectable:k,dragging:C}=Yi(Ks,qi),M=k&&(n||S),A=d(!1),P=d(!1),I=e=>{A.current?A.current=!1:(c?.(e),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1}))},N=h?e=>h(e):void 0;return t("div",{className:E(["react-flow__pane",{draggable:i,dragging:C,selection:n}]),onClick:M?void 0:Xs(I,y),onContextMenu:Xs((e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():u?.(e)}),y),onWheel:Xs(N,y),onPointerEnter:M?void 0:f,onPointerDown:M?e=>{const{resetSelectedElements:t,domNode:r,edgeLookup:o}=b.getState();if(x.current=r?.getBoundingClientRect(),e.target?.setPointerCapture?.(e.pointerId),!k||!n||0!==e.button||e.target!==y.current||!x.current)return;P.current=!0,A.current=!1,_.current=new Map;for(const[e,t]of o)_.current.set(t.source,_.current.get(t.source)?.add(e)||new Set([e])),_.current.set(t.target,_.current.get(t.target)?.add(e)||new Set([e]));const{x:i,y:s}=yo(e.nativeEvent,x.current);t(),b.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),a?.(e)}:p,onPointerMove:M?e=>{const{userSelectionRect:t,edgeLookup:n,transform:r,nodeLookup:i,triggerNodeChanges:s,triggerEdgeChanges:a}=b.getState();if(!x.current||!t)return;A.current=!0;const{x:l,y:c}=yo(e.nativeEvent,x.current),{startX:u,startY:d}=t,h={startX:u,startY:d,x:l<u?l:u,y:c<d?c:d,width:Math.abs(l-u),height:Math.abs(c-d)},f=Dr(i,h,r,o===Sr.Partial,!0),p=new Set,g=new Set;for(const e of f){g.add(e.id);const t=_.current.get(e.id);if(t)for(const e of t)p.add(e)}if(v.current!==g.size){v.current=g.size;s(Ns(i,g,!0))}if(w.current!==p.size){w.current=p.size;a(Ns(n,p))}b.setState({userSelectionRect:h,userSelectionActive:!0,nodesSelectionActive:!1})}:p,onPointerUp:M?e=>{if(0!==e.button||!P.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:t}=b.getState();!S&&t&&e.target===y.current&&I?.(e),v.current>0&&b.setState({nodesSelectionActive:!0}),b.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,w.current=0,l?.(e),(r||s)&&(A.current=!1),P.current=!1}:void 0,onPointerLeave:g,ref:y,style:Qs,children:[m,e(Zs,{})]})}function ea({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),c=a.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame((()=>r?.current?.blur()))):o([e])):l?.("012",br.error012(e))}function ta({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:a}){const l=Zi(),[c,u]=s(!1),f=d();return h((()=>{f.current=Wo({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{ea({id:t,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})}),[]),h((()=>{if(t)f.current?.destroy();else if(e.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:a}),()=>{f.current?.destroy()}}),[n,r,t,i,e,o]),c}const na=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function ra(){const e=Zi();return c((t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:s,updateNodePositions:a,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=na(i),h=r?o[0]:5,f=r?o[1]:5,p=t.direction.x*h*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=to(t,o));const{position:i,positionAbsolute:a}=jr({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:s});e.position=i,e.internals.positionAbsolute=a,u.set(e.id,e)}a(u)}),[])}const oa=o(null),ia=oa.Provider;oa.Consumer;const sa=()=>a(oa),aa=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const la=i(Ds((function({type:t="source",position:n=Mr.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:h,...f},p){const g=a||null,m="target"===t,y=Zi(),b=sa(),{connectOnClick:v,noPanClassName:w,rfId:x}=Yi(aa,qi),{connectingFrom:_,connectingTo:S,clickConnecting:k,isPossibleEndHandle:C,connectionInProcess:M,valid:A}=Yi(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:l,isValid:c}=s,u=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:u,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:i===xr.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,valid:u&&c}})(b,g,t),qi);b||y.getState().onError?.("010",br.error010());const P=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=y.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=y.getState();t(Co(o,e))}n?.(o),l?.(o)},I=e=>{if(!b)return;const t=mo(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=y.getState();Ko.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:m,handleId:g,nodeId:b,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:P,isValidConnection:r||t.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?d?.(e):h?.(e)};return e("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":n,"data-id":`${x}-${b}-${g}-${t}`,className:E(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",w,u,{source:!m,target:m,connectable:o,connectablestart:i,connectableend:s,clickconnecting:k,connectingfrom:_,connectingto:S,valid:A,connectionindicator:o&&(!M||C)&&(M?s:i)}]),onMouseDown:I,onTouchStart:I,onClick:v?e=>{const{onClickConnectStart:n,onClickConnectEnd:o,connectionClickStartHandle:s,connectionMode:a,isValidConnection:l,lib:c,rfId:u}=y.getState();if(!b||!s&&!i)return;if(!s)return n?.(e.nativeEvent,{nodeId:b,handleId:g,handleType:t}),void y.setState({connectionClickStartHandle:{nodeId:b,type:t,id:g}});const d=fo(e.target),h=r||l,{connection:f,isValid:p}=Ko.isValid(e.nativeEvent,{handle:{nodeId:b,id:g,type:t},connectionMode:a,fromNodeId:s.nodeId,fromHandleId:s.id||null,fromType:s.type,isValidConnection:h,flowId:u,doc:d,lib:c});p&&f&&P(f),o?.(e),y.setState({connectionClickStartHandle:null})}:void 0,ref:p,...f,children:c})})));const ca={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ua={input:function({data:r,isConnectable:o,sourcePosition:i=Mr.Bottom}){return t(n,{children:[r?.label,e(la,{type:"source",position:i,isConnectable:o})]})},default:function({data:r,isConnectable:o,targetPosition:i=Mr.Top,sourcePosition:s=Mr.Bottom}){return t(n,{children:[e(la,{type:"target",position:i,isConnectable:o}),r?.label,e(la,{type:"source",position:s,isConnectable:o})]})},output:function({data:r,isConnectable:o,targetPosition:i=Mr.Top}){return t(n,{children:[e(la,{type:"target",position:i,isConnectable:o}),r?.label]})},group:function(){return null}};const da=e=>{const{width:t,height:n,x:r,y:o}=Lr(e.nodeLookup,{filter:e=>!!e.selected});return{width:Jr(t)?t:null,height:Jr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function ha({onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:r}){const o=Zi(),{width:i,height:s,transformString:a,userSelectionActive:l}=Yi(da,qi),c=ra(),u=d(null);if(h((()=>{r||u.current?.focus({preventScroll:!0})}),[r]),ta({nodeRef:u}),l||!i||!s)return null;const f=t?e=>{const n=o.getState().nodes.filter((e=>e.selected));t(e,n)}:void 0;return e("div",{className:E(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:e("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:r?void 0:-1,onKeyDown:r?void 0:e=>{Object.prototype.hasOwnProperty.call(ca,e.key)&&c({direction:ca[e.key],factor:e.shiftKey?4:1})},style:{width:i,height:s}})})}const fa=window,pa=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ga({children:n,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:b,zoomActivationKeyCode:v,elementsSelectable:w,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:M,defaultViewport:A,translateExtent:P,minZoom:I,maxZoom:N,preventScrolling:O,onSelectionContextMenu:R,noWheelClassName:T,noPanClassName:L,disableKeyboardA11y:D,onViewportChange:B,isControlledViewport:z}){const{nodesSelectionActive:$,userSelectionActive:j}=Yi(pa),H=_s(d,{target:fa}),F=_s(b,{target:fa}),U=F||M,V=F||S,q=f&&!0!==U,Q=H||j||q;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Zi(),{deleteElements:r}=Fs(),o=_s(e,Vs),i=_s(t,{target:qs});h((()=>{if(o){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(Us),edges:e.filter(Us)}),n.setState({nodesSelectionActive:!1})}}),[o]),h((()=>{n.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:u,multiSelectionKeyCode:y}),e(Gs,{onPaneContextMenu:a,elementsSelectable:w,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:V,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:!H&&U,defaultViewport:A,translateExtent:P,minZoom:I,maxZoom:N,zoomActivationKeyCode:v,preventScrolling:O,noWheelClassName:T,noPanClassName:L,onViewportChange:B,isControlledViewport:z,paneClickDistance:c,children:t(Js,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:U,isSelecting:!!Q,selectionMode:p,selectionKeyPressed:H,selectionOnDrag:q,children:[n,$&&e(ha,{onSelectionContextMenu:R,noPanClassName:L,disableKeyboardA11y:D})]})})}ga.displayName="FlowRenderer";const ma=i(ga),ya=e=>t=>e?Dr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys());const ba=e=>e.updateNodeInternals;function va({id:t,onClick:n,onMouseEnter:r,onMouseMove:o,onMouseLeave:i,onContextMenu:s,onDoubleClick:a,nodesDraggable:l,elementsSelectable:c,nodesConnectable:u,nodesFocusable:f,resizeObserver:p,noDragClassName:g,noPanClassName:m,disableKeyboardA11y:y,rfId:b,nodeTypes:v,nodeExtent:w,nodeClickDistance:x,onError:_}){const{node:S,internals:k,isParent:C}=Yi((e=>{const n=e.nodeLookup.get(t),r=e.parentLookup.has(t);return{node:n,internals:n.internals,isParent:r}}),qi);let M=S.type||"default",A=v?.[M]||ua[M];void 0===A&&(_?.("003",br.error003(M)),M="default",A=ua.default);const P=!!(S.draggable||l&&void 0===S.draggable),I=!!(S.selectable||c&&void 0===S.selectable),N=!!(S.connectable||u&&void 0===S.connectable),O=!!(S.focusable||f&&void 0===S.focusable),R=Zi(),T=lo(S),L=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=Zi(),i=d(null),s=d(null),a=d(e.sourcePosition),l=d(e.targetPosition),c=d(t),u=n&&!!e.internals.handleBounds;return h((()=>{!i.current||e.hidden||u&&s.current===i.current||(s.current&&r?.unobserve(s.current),r?.observe(i.current),s.current=i.current)}),[u,e.hidden]),h((()=>()=>{s.current&&(r?.unobserve(s.current),s.current=null)}),[]),h((()=>{if(i.current){const n=c.current!==t,r=a.current!==e.sourcePosition,s=l.current!==e.targetPosition;(n||r||s)&&(c.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:S,nodeType:M,hasDimensions:T,resizeObserver:p}),D=ta({nodeRef:L,disabled:S.hidden||!P,noDragClassName:g,handleSelector:S.dragHandle,nodeId:t,isSelectable:I,nodeClickDistance:x}),B=ra();if(S.hidden)return null;const z=ao(S),$=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(S),j=w?Fr(k.positionAbsolute,w):k.positionAbsolute,H=I||P||n||r||o||i,F=r?e=>r(e,{...k.userNode}):void 0,U=o?e=>o(e,{...k.userNode}):void 0,V=i?e=>i(e,{...k.userNode}):void 0,q=s?e=>s(e,{...k.userNode}):void 0,Q=a?e=>a(e,{...k.userNode}):void 0;return e("div",{className:E(["react-flow__node",`react-flow__node-${M}`,{[m]:P},S.className,{selected:S.selected,selectable:I,parent:C,draggable:P,dragging:D}]),ref:L,style:{zIndex:k.z,transform:`translate(${j.x}px,${j.y}px)`,pointerEvents:H?"all":"none",visibility:T?"visible":"hidden",...S.style,...$},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:F,onMouseMove:U,onMouseLeave:V,onContextMenu:q,onClick:e=>{const{selectNodesOnDrag:r,nodeDragThreshold:o}=R.getState();I&&(!r||!P||o>0)&&ea({id:t,store:R,nodeRef:L}),n&&n(e,{...k.userNode})},onDoubleClick:Q,onKeyDown:O?e=>{if(!go(e.nativeEvent)&&!y)if(wr.includes(e.key)&&I){const n="Escape"===e.key;ea({id:t,store:R,unselect:n,nodeRef:L})}else P&&S.selected&&Object.prototype.hasOwnProperty.call(ca,e.key)&&(R.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.x}, y: ${~~j.y}`}),B({direction:ca[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":y?void 0:`${Ji}-${b}`,"aria-label":S.ariaLabel,children:e(ia,{value:t,children:e(A,{id:t,data:S.data,type:M,positionAbsoluteX:j.x,positionAbsoluteY:j.y,selected:S.selected,selectable:I,draggable:P,deletable:S.deletable??!0,isConnectable:N,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:D,dragHandle:S.dragHandle,zIndex:k.z,parentId:S.parentId,...z})})})}const wa=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function xa(t){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,onError:a}=Yi(wa,qi),l=(u=t.onlyRenderVisibleElements,Yi(c(ya(u),[u]),qi));var u;const d=function(){const e=Yi(ba),[t]=s((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return h((()=>()=>{t?.disconnect()}),[t]),t}();return e("div",{className:"react-flow__nodes",style:Qs,children:l.map((s=>e(va,{id:s,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:a},s)))})}xa.displayName="NodeRenderer";const _a=i(xa);const Sa={[Cr.Arrow]:({color:t="none",strokeWidth:n=1})=>e("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Cr.ArrowClosed]:({color:t="none",strokeWidth:n=1})=>e("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const Ea=({id:t,type:n,color:r,width:o=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const c=function(e){const t=Zi();return u((()=>Object.prototype.hasOwnProperty.call(Sa,e)?Sa[e]:(t.getState().onError?.("009",br.error009(e)),null)),[e])}(n);return c?e("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:e(c,{color:r,strokeWidth:a})}):null},ka=({defaultColor:t,rfId:n})=>{const r=Yi((e=>e.edges)),o=Yi((e=>e.defaultEdgeOptions)),i=u((()=>{const e=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce(((e,s)=>([s.markerStart||r,s.markerEnd||o].forEach((r=>{if(r&&"object"==typeof r){const o=Do(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(r,{id:n,defaultColor:t,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd});return e}),[r,o,n,t]);return i.length?e("svg",{className:"react-flow__marker",children:e("defs",{children:i.map((t=>e(Ea,{id:t.id,type:t.type,color:t.color,width:t.width,height:t.height,markerUnits:t.markerUnits,strokeWidth:t.strokeWidth,orient:t.orient},t.id)))})}):null};ka.displayName="MarkerDefinitions";var Ca=i(ka);function Ma({x:n,y:r,label:o,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:f,className:p,...g}){const[m,y]=s({x:1,y:0,width:0,height:0}),b=E(["react-flow__edge-textwrapper",p]),v=d(null);return h((()=>{if(v.current){const e=v.current.getBBox();y({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),void 0!==o&&o?t("g",{transform:`translate(${n-m.width/2} ${r-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...g,children:[a&&e("rect",{width:m.width+2*c[0],x:-c[0],y:-c[1],height:m.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:u,ry:u}),e("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:v,style:i,children:o}),f]}):null}Ma.displayName="EdgeText";const Aa=i(Ma);function Pa({id:r,path:o,labelX:i,labelY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,className:m,interactionWidth:y=20}){return t(n,{children:[e("path",{id:r,style:f,d:o,fill:"none",className:E(["react-flow__edge-path",m]),markerEnd:p,markerStart:g}),y&&e("path",{d:o,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),a&&Jr(i)&&Jr(s)?e(Aa,{x:i,y:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h}):null]})}function Ia({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Mr.Left||e===Mr.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Na({sourceX:e,sourceY:t,sourcePosition:n=Mr.Bottom,targetX:r,targetY:o,targetPosition:i=Mr.Top}){const[s,a]=Ia({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=Ia({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,d,h,f]=vo({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${a} ${l},${c} ${r},${o}`,u,d,h,f]}function Oa(t){return i((({id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a=Mr.Bottom,targetPosition:l=Mr.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:b})=>{const[v,w,x]=Na({sourceX:r,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l}),_=t.isInternal?void 0:n;return e(Pa,{id:_,path:v,labelX:w,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:b})}))}const Ra=Oa({isInternal:!1}),Ta=Oa({isInternal:!0});function La(t){return i((({id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,sourcePosition:p=Mr.Bottom,targetPosition:g=Mr.Top,markerEnd:m,markerStart:y,pathOptions:b,interactionWidth:v})=>{const[w,x,_]=No({sourceX:r,sourceY:o,sourcePosition:p,targetX:i,targetY:s,targetPosition:g,borderRadius:b?.borderRadius,offset:b?.offset}),S=t.isInternal?void 0:n;return e(Pa,{id:S,path:w,labelX:x,labelY:_,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:y,interactionWidth:v})}))}Ra.displayName="SimpleBezierEdge",Ta.displayName="SimpleBezierEdgeInternal";const Da=La({isInternal:!1}),Ba=La({isInternal:!0});function za(t){return i((({id:n,...r})=>{const o=t.isInternal?void 0:n;return e(Da,{...r,id:o,pathOptions:u((()=>({borderRadius:0,offset:r.pathOptions?.offset})),[r.pathOptions?.offset])})}))}Da.displayName="SmoothStepEdge",Ba.displayName="SmoothStepEdgeInternal";const $a=za({isInternal:!1}),ja=za({isInternal:!0});function Ha(t){return i((({id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:m})=>{const[y,b,v]=Mo({sourceX:r,sourceY:o,targetX:i,targetY:s}),w=t.isInternal?void 0:n;return e(Pa,{id:w,path:y,labelX:b,labelY:v,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:m})}))}$a.displayName="StepEdge",ja.displayName="StepEdgeInternal";const Fa=Ha({isInternal:!1}),Ua=Ha({isInternal:!0});function Va(t){return i((({id:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a=Mr.Bottom,targetPosition:l=Mr.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,pathOptions:b,interactionWidth:v})=>{const[w,x,_]=_o({sourceX:r,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l,curvature:b?.curvature}),S=t.isInternal?void 0:n;return e(Pa,{id:S,path:w,labelX:x,labelY:_,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:v})}))}Fa.displayName="StraightEdge",Ua.displayName="StraightEdgeInternal";const qa=Va({isInternal:!1}),Qa=Va({isInternal:!0});qa.displayName="BezierEdge",Qa.displayName="BezierEdgeInternal";const Wa={default:Qa,straight:Ua,step:ja,smoothstep:Ba,simplebezier:Ta},Ga={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ya=(e,t,n)=>n===Mr.Left?e-t:n===Mr.Right?e+t:e,Za=(e,t,n)=>n===Mr.Top?e-t:n===Mr.Bottom?e+t:e,Xa="react-flow__edgeupdater";function Ka({position:t,centerX:n,centerY:r,radius:o=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:l}){return e("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:E([Xa,`${Xa}-${l}`]),cx:Ya(n,o,t),cy:Za(r,o,t),r:o,stroke:"transparent",fill:"transparent"})}function Ja({isReconnectable:r,reconnectRadius:o,edge:i,targetHandleId:s,sourceHandleId:a,sourceX:l,sourceY:c,targetX:u,targetY:d,sourcePosition:h,targetPosition:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:m,setReconnecting:y,setUpdateHover:b}){const v=Zi(),w=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:r,isValidConnection:o,connectionMode:l,connectionRadius:c,lib:u,onConnectStart:d,onConnectEnd:h,cancelConnection:f,nodeLookup:b,rfId:w,panBy:x,updateConnection:_}=v.getState(),S=t?i.target:i.source,E=(t?s:a)||null,k=t?"target":"source",C=t;y(!0),g?.(e,i,k);Ko.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:l,connectionRadius:c,domNode:r,handleId:E,nodeId:S,nodeLookup:b,isTarget:C,edgeUpdaterType:k,lib:u,flowId:w,cancelConnection:f,panBy:x,isValidConnection:o,onConnect:e=>p?.(i,e),onConnectStart:d,onConnectEnd:h,onReconnectEnd:e=>{y(!1),m?.(e,i,k)},updateConnection:_,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},x=()=>b(!0),_=()=>b(!1);return t(n,{children:[("source"===r||!0===r)&&e(Ka,{position:h,centerX:l,centerY:c,radius:o,onMouseDown:e=>w(e,!0),onMouseEnter:x,onMouseOut:_,type:"source"}),("target"===r||!0===r)&&e(Ka,{position:f,centerX:u,centerY:d,radius:o,onMouseDown:e=>w(e,!1),onMouseEnter:x,onMouseOut:_,type:"target"})]})}function el({id:n,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:i,onClick:a,onDoubleClick:l,onContextMenu:h,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,reconnectRadius:m,onReconnect:y,onReconnectStart:b,onReconnectEnd:v,rfId:w,edgeTypes:x,noPanClassName:_,onError:S,disableKeyboardA11y:k}){let C=Yi((e=>e.edgeLookup.get(n)));const M=Yi((e=>e.defaultEdgeOptions));C=M?{...M,...C}:C;let A=C.type||"default",P=x?.[A]||Wa[A];void 0===P&&(S?.("011",br.error011(A)),A="default",P=Wa.default);const I=!!(C.focusable||r&&void 0===C.focusable),N=void 0!==y&&(C.reconnectable||o&&void 0===C.reconnectable),O=!!(C.selectable||i&&void 0===C.selectable),R=d(null),[T,L]=s(!1),[D,B]=s(!1),z=Zi(),{zIndex:$,sourceX:j,sourceY:H,targetX:F,targetY:U,sourcePosition:V,targetPosition:q}=Yi(c((e=>{const t=e.nodeLookup.get(C.source),r=e.nodeLookup.get(C.target);if(!t||!r)return{zIndex:C.zIndex,...Ga};const o=function(e){const{sourceNode:t,targetNode:n}=e;if(!Oo(t)||!Oo(n))return null;const r=t.internals.handleBounds||Ro(t.handles),o=n.internals.handleBounds||Ro(n.handles),i=Lo(r?.source??[],e.sourceHandle),s=Lo(e.connectionMode===xr.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",br.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||Mr.Bottom,l=s?.position||Mr.Top,c=To(t,i,a),u=To(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}({id:n,sourceNode:t,targetNode:r,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:e.connectionMode,onError:S}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}({selected:C.selected,zIndex:C.zIndex,sourceNode:t,targetNode:r,elevateOnSelect:e.elevateEdgesOnSelect});return{zIndex:i,...o||Ga}}),[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),qi),Q=u((()=>C.markerStart?`url('#${Do(C.markerStart,w)}')`:void 0),[C.markerStart,w]),W=u((()=>C.markerEnd?`url('#${Do(C.markerEnd,w)}')`:void 0),[C.markerEnd,w]);if(C.hidden||null===j||null===H||null===F||null===U)return null;const G=l?e=>{l(e,{...C})}:void 0,Y=h?e=>{h(e,{...C})}:void 0,Z=f?e=>{f(e,{...C})}:void 0,X=p?e=>{p(e,{...C})}:void 0,K=g?e=>{g(e,{...C})}:void 0;return e("svg",{style:{zIndex:$},children:t("g",{className:E(["react-flow__edge",`react-flow__edge-${A}`,C.className,_,{selected:C.selected,animated:C.animated,inactive:!O&&!a,updating:T,selectable:O}]),onClick:e=>{const{addSelectedEdges:t,unselectNodesAndEdges:r,multiSelectionActive:o}=z.getState();O&&(z.setState({nodesSelectionActive:!1}),C.selected&&o?(r({nodes:[],edges:[C]}),R.current?.blur()):t([n])),a&&a(e,C)},onDoubleClick:G,onContextMenu:Y,onMouseEnter:Z,onMouseMove:X,onMouseLeave:K,onKeyDown:I?e=>{if(!k&&wr.includes(e.key)&&O){const{unselectNodesAndEdges:t,addSelectedEdges:r}=z.getState();"Escape"===e.key?(R.current?.blur(),t({edges:[C]})):r([n])}}:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":null===C.ariaLabel?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":I?`${es}-${w}`:void 0,ref:R,children:[!D&&e(P,{id:n,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:O,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:j,sourceY:H,targetX:F,targetY:U,sourcePosition:V,targetPosition:q,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Q,markerEnd:W,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),N&&e(Ja,{edge:C,isReconnectable:N,reconnectRadius:m,onReconnect:y,onReconnectStart:b,onReconnectEnd:v,sourceX:j,sourceY:H,targetX:F,targetY:U,sourcePosition:V,targetPosition:q,setUpdateHover:L,setReconnecting:B,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle})]})})}const tl=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function nl({defaultMarkerColor:n,onlyRenderVisibleElements:r,rfId:o,edgeTypes:i,noPanClassName:s,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,disableKeyboardA11y:b}){const{edgesFocusable:v,edgesReconnectable:w,elementsSelectable:x,onError:_}=Yi(tl,qi),S=Yi(c((e=>{if(!E)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&Eo({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[E=r]),qi);var E;return t("div",{className:"react-flow__edges",children:[e(Ca,{defaultColor:n,rfId:o}),S.map((t=>e(el,{id:t,edgesFocusable:v,edgesReconnectable:w,elementsSelectable:x,noPanClassName:s,onReconnect:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,rfId:o,onError:_,edgeTypes:i,disableKeyboardA11y:b},t)))]})}nl.displayName="EdgeRenderer";const rl=i(nl),ol=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function il({children:t}){const n=Yi(ol);return e("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const sl=e=>e.panZoom?.syncViewport;const al=e=>e.connection.inProgress?{...e.connection,to:no(e.connection.to,e.transform)}:{...e.connection};const ll=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function cl({containerStyle:t,style:n,type:r,component:o}){const{nodesConnectable:i,width:s,height:a,isValid:l,inProgress:c}=Yi(ll,qi);return!!(s&&i&&c)?e("svg",{style:t,width:s,height:a,className:"react-flow__connectionline react-flow__container",children:e("g",{className:E(["react-flow__connection",Pr(l)]),children:e(ul,{style:n,type:r,CustomComponent:o,isValid:l})})}):null}const ul=({style:t,type:n=kr.Bezier,CustomComponent:r,isValid:o})=>{const{inProgress:i,from:s,fromNode:a,fromHandle:l,fromPosition:c,to:u,toNode:d,toHandle:h,toPosition:f}=Yi(al,qi);if(!i)return;if(r)return e(r,{connectionLineType:n,connectionLineStyle:t,fromNode:a,fromHandle:l,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:Pr(o),toNode:d,toHandle:h});let p="";const g={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(n){case kr.Bezier:[p]=_o(g);break;case kr.SimpleBezier:[p]=Na(g);break;case kr.Step:[p]=No({...g,borderRadius:0});break;case kr.SmoothStep:[p]=No(g);break;default:[p]=Mo(g)}return e("path",{d:p,fill:"none",className:"react-flow__connection-path",style:t})};ul.displayName="ConnectionLine";const dl={};function hl(e=dl){d(e),Zi(),h((()=>{}),[e])}function fl({nodeTypes:n,edgeTypes:r,onInit:o,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:m,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:_,selectionOnDrag:S,selectionMode:E,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:M,deleteKeyCode:A,onlyRenderVisibleElements:P,elementsSelectable:I,defaultViewport:N,translateExtent:O,minZoom:R,maxZoom:T,preventScrolling:L,defaultMarkerColor:D,zoomOnScroll:B,zoomOnPinch:z,panOnScroll:$,panOnScrollSpeed:j,panOnScrollMode:H,zoomOnDoubleClick:F,panOnDrag:U,onPaneClick:V,onPaneMouseEnter:q,onPaneMouseMove:Q,onPaneMouseLeave:W,onPaneScroll:G,onPaneContextMenu:Y,paneClickDistance:Z,nodeClickDistance:X,onEdgeContextMenu:K,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,reconnectRadius:ne,onReconnect:re,onReconnectStart:oe,onReconnectEnd:ie,noDragClassName:se,noWheelClassName:ae,noPanClassName:le,disableKeyboardA11y:ce,nodeExtent:ue,rfId:de,viewport:he,onViewportChange:fe}){return hl(n),hl(r),Zi(),d(!1),h((()=>{}),[]),function(e){const t=Fs(),n=d(!1);h((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(o),function(e){const t=Yi(sl),n=Zi();h((()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(he),e(ma,{onPaneClick:V,onPaneMouseEnter:q,onPaneMouseMove:Q,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:G,paneClickDistance:Z,deleteKeyCode:A,selectionKeyCode:_,selectionOnDrag:S,selectionMode:E,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:M,elementsSelectable:I,zoomOnScroll:B,zoomOnPinch:z,zoomOnDoubleClick:F,panOnScroll:$,panOnScrollSpeed:j,panOnScrollMode:H,panOnDrag:U,defaultViewport:N,translateExtent:O,minZoom:R,maxZoom:T,onSelectionContextMenu:g,preventScrolling:L,noDragClassName:se,noWheelClassName:ae,noPanClassName:le,disableKeyboardA11y:ce,onViewportChange:fe,isControlledViewport:!!he,children:t(il,{children:[e(rl,{edgeTypes:r,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:re,onReconnectStart:oe,onReconnectEnd:ie,onlyRenderVisibleElements:P,onEdgeContextMenu:K,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,reconnectRadius:ne,defaultMarkerColor:D,noPanClassName:le,disableKeyboardA11y:ce,rfId:de}),e(cl,{style:v,type:b,component:w,containerStyle:x}),e("div",{className:"react-flow__edgelabel-renderer"}),e(_a,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:X,onlyRenderVisibleElements:P,noPanClassName:le,noDragClassName:se,disableKeyboardA11y:ce,nodeExtent:ue,rfId:de}),e("div",{className:"react-flow__viewport-portal"})]})})}fl.displayName="GraphView";const pl=i(fl),gl=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a}={})=>{const l=new Map,c=new Map,u=new Map,d=new Map,h=r??t??[],f=n??e??[],p=a??[0,0];Uo(u,d,h),$o(f,l,c,{nodeOrigin:p,elevateNodesOnSelect:!1});let g=[0,0,1];if(s&&o&&i){const e=Lr(l,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=oo(e,o,i,.5,2,.1);g=[t,n,r]}return{rfId:"1",width:0,height:0,transform:g,nodes:f,nodeLookup:l,parentLookup:c,edges:h,edgeLookup:d,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:vr,nodeExtent:vr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:xr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:p,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Er},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:eo,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},ml=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a})=>{return l=(l,c)=>({...gl({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:a,defaultNodes:n,defaultEdges:r}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o}=c();$o(e,t,n,{nodeOrigin:r,elevateNodesOnSelect:o,checkEquality:!0}),l({nodes:e})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=c();Uo(t,n,e),l({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=c();t(e),l({hasDefaultNodes:!0})}if(t){const{setEdges:e}=c();e(t),l({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,fitViewOnInit:o,fitViewDone:i,fitViewOnInitOptions:s,domNode:a,nodeOrigin:u,debug:d,fitViewSync:h}=c(),{changes:f,updatedInternals:p}=function(e,t,n,r,o){const i=r?.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const a=[],l=window.getComputedStyle(i),{m22:c}=new window.DOMMatrixReadOnly(l.transform),u=[];for(const r of e.values()){const e=t.get(r.id);if(e)if(e.hidden)e.internals={...e.internals,handleBounds:void 0},s=!0;else{const i=ho(r.nodeElement),l=e.measured.width!==i.width||e.measured.height!==i.height;if(i.width&&i.height&&(l||!e.internals.handleBounds||r.force)){const d=r.nodeElement.getBoundingClientRect();e.measured=i,e.internals={...e.internals,positionAbsolute:Tr(e,o),handleBounds:{source:bo("source",r.nodeElement,d,c,e.id),target:bo("target",r.nodeElement,d,c,e.id)}},e.parentId&&jo(e,t,n,{nodeOrigin:o}),s=!0,l&&(a.push({id:e.id,type:"dimensions",dimensions:i}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:Gr(e,o)}))}}}if(u.length>0){const e=Fo(u,t,n,o);a.push(...e)}return{changes:a,updatedInternals:s}}(e,n,r,a,u);if(!p)return;!function(e,t,n){const r={...Bo,...n};for(const n of e.values())n.parentId&&jo(n,e,t,r)}(n,r,{nodeOrigin:u});let g=i;!i&&o&&(g=h({...s,nodes:s?.nodes})),l({fitViewDone:g}),f?.length>0&&(d&&console.log("React Flow: trigger node changes",f),t?.(f))},updateNodePositions:(e,t=!1)=>{const n=[],r=[];for(const[o,i]of e){const e={id:o,type:"position",position:i.position,dragging:t};i?.expandParent&&i?.parentId&&e.position&&(n.push({id:o,parentId:i.parentId,rect:{...i.internals.positionAbsolute,width:i.measured.width,height:i.measured.height}}),e.position.x=Math.max(0,e.position.x),e.position.y=Math.max(0,e.position.y)),r.push(e)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:o}=c(),i=Fo(n,e,t,o);r.push(...i)}c().triggerNodeChanges(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=c();e?.length&&(o&&n(As(e,r)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=c();e?.length&&(o&&n(Ps(e,r)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=c();t?o(e.map((e=>Is(e,!0)))):(o(Ns(r,new Set([...e]),!0)),i(Ns(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=c();t?i(e.map((e=>Is(e,!0)))):(i(Ns(n,new Set([...e]))),o(Ns(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,triggerNodeChanges:o,triggerEdgeChanges:i}=c(),s=t||n,a=(e||r).map((e=>(e.selected=!1,Is(e.id,!1)))),l=s.map((e=>Is(e.id,!1)));o(a),i(l)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=c();t?.setScaleExtent([e,n]),l({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=c();t?.setScaleExtent([n,e]),l({maxZoom:e})},setTranslateExtent:e=>{c().panZoom?.setTranslateExtent(e),l({translateExtent:e})},setPaneClickDistance:e=>{c().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r}=c(),o=t.reduce(((e,t)=>t.selected?[...e,Is(t.id,!1)]:e),[]),i=e.reduce(((e,t)=>t.selected?[...e,Is(t.id,!1)]:e),[]);n(o),r(i)},setNodeExtent:e=>{const{nodeLookup:t}=c();for(const[,n]of t){const r=Fr(n.position,e);t.set(n.id,{...n,internals:{...n.internals,positionAbsolute:r}})}l({nodeExtent:e})},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=c();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},fitView:e=>{const{panZoom:t,width:n,height:r,minZoom:o,maxZoom:i,nodeLookup:s}=c();return t?$r({nodes:zr(s,e),width:n,height:r,panZoom:t,minZoom:o,maxZoom:i},e):Promise.resolve(!1)},fitViewSync:e=>{const{panZoom:t,width:n,height:r,minZoom:o,maxZoom:i,nodeLookup:s}=c();if(!t)return!1;const a=zr(s,e);return $r({nodes:a,width:n,height:r,panZoom:t,minZoom:o,maxZoom:i},e),a.size>0},cancelConnection:()=>{l({connection:{...Er}})},updateConnection:e=>{l({connection:e})},reset:()=>l({...gl()})}),c=Object.is,l?Vi(l,c):Vi;var l,c};function yl({initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:a,fitView:l,nodeOrigin:c,children:u}){const[d]=s((()=>ml({nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:l,nodeOrigin:c})));return e(Wi,{value:d,children:e(js,{children:u})})}function bl({children:t,nodes:r,edges:o,defaultNodes:i,defaultEdges:s,width:l,height:c,fitView:u,nodeOrigin:d}){return a(Qi)?e(n,{children:t}):e(yl,{initialNodes:r,initialEdges:o,defaultNodes:i,defaultEdges:s,initialWidth:l,initialHeight:c,fitView:u,nodeOrigin:d,children:t})}const vl={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var wl,xl=Ds((function({nodes:n,edges:r,defaultNodes:o,defaultEdges:i,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:g,onMoveEnd:m,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:C,onNodeDoubleClick:M,onNodeDragStart:A,onNodeDrag:P,onNodeDragStop:I,onNodesDelete:N,onEdgesDelete:O,onDelete:R,onSelectionChange:T,onSelectionDragStart:L,onSelectionDrag:D,onSelectionDragStop:B,onSelectionContextMenu:z,onSelectionStart:$,onSelectionEnd:j,onBeforeDelete:H,connectionMode:F,connectionLineType:U=kr.Bezier,connectionLineStyle:V,connectionLineComponent:q,connectionLineContainerStyle:Q,deleteKeyCode:W="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:Y=!1,selectionMode:Z=Sr.Full,panActivationKeyCode:X="Space",multiSelectionKeyCode:K=(io()?"Meta":"Control"),zoomActivationKeyCode:J=(io()?"Meta":"Control"),snapToGrid:ee,snapGrid:te,onlyRenderVisibleElements:ne=!1,selectNodesOnDrag:re,nodesDraggable:oe,nodesConnectable:ie,nodesFocusable:se,nodeOrigin:ae=ps,edgesFocusable:le,edgesReconnectable:ce,elementsSelectable:ue=!0,defaultViewport:de=gs,minZoom:he=.5,maxZoom:fe=2,translateExtent:pe=vr,preventScrolling:ge=!0,nodeExtent:me,defaultMarkerColor:ye="#b1b1b7",zoomOnScroll:be=!0,zoomOnPinch:ve=!0,panOnScroll:we=!1,panOnScrollSpeed:xe=.5,panOnScrollMode:_e=_r.Free,zoomOnDoubleClick:Se=!0,panOnDrag:Ee=!0,onPaneClick:ke,onPaneMouseEnter:Ce,onPaneMouseMove:Me,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:Ie,paneClickDistance:Ne=0,nodeClickDistance:Oe=0,children:Re,onReconnect:Te,onReconnectStart:Le,onReconnectEnd:De,onEdgeContextMenu:Be,onEdgeDoubleClick:ze,onEdgeMouseEnter:$e,onEdgeMouseMove:je,onEdgeMouseLeave:He,reconnectRadius:Fe=10,onNodesChange:Ue,onEdgesChange:Ve,noDragClassName:qe="nodrag",noWheelClassName:Qe="nowheel",noPanClassName:We="nopan",fitView:Ge,fitViewOptions:Ye,connectOnClick:Ze,attributionPosition:Xe,proOptions:Ke,defaultEdgeOptions:Je,elevateNodesOnSelect:et,elevateEdgesOnSelect:tt,disableKeyboardA11y:nt=!1,autoPanOnConnect:rt,autoPanOnNodeDrag:ot,autoPanSpeed:it,connectionRadius:st,isValidConnection:at,onError:lt,style:ct,id:ut,nodeDragThreshold:dt,viewport:ht,onViewportChange:ft,width:pt,height:gt,colorMode:mt="light",debug:yt,...bt},vt){const wt=ut||"1",xt=function(e){const[t,n]=s("system"===e?null:e);return h((()=>{if("system"!==e)return void n(e);const t=ws(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}}),[e]),null!==t?t:ws()?.matches?"dark":"light"}(mt);return e("div",{...bt,style:{...ct,...vl},ref:vt,className:E(["react-flow",a,xt]),"data-testid":"rf__wrapper",id:ut,children:t(bl,{nodes:n,edges:r,width:pt,height:gt,fitView:Ge,nodeOrigin:ae,children:[e(pl,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:C,onNodeDoubleClick:M,nodeTypes:l,edgeTypes:c,connectionLineType:U,connectionLineStyle:V,connectionLineComponent:q,connectionLineContainerStyle:Q,selectionKeyCode:G,selectionOnDrag:Y,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:K,panActivationKeyCode:X,zoomActivationKeyCode:J,onlyRenderVisibleElements:ne,defaultViewport:de,translateExtent:pe,minZoom:he,maxZoom:fe,preventScrolling:ge,zoomOnScroll:be,zoomOnPinch:ve,zoomOnDoubleClick:Se,panOnScroll:we,panOnScrollSpeed:xe,panOnScrollMode:_e,panOnDrag:Ee,onPaneClick:ke,onPaneMouseEnter:Ce,onPaneMouseMove:Me,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:Ie,paneClickDistance:Ne,nodeClickDistance:Oe,onSelectionContextMenu:z,onSelectionStart:$,onSelectionEnd:j,onReconnect:Te,onReconnectStart:Le,onReconnectEnd:De,onEdgeContextMenu:Be,onEdgeDoubleClick:ze,onEdgeMouseEnter:$e,onEdgeMouseMove:je,onEdgeMouseLeave:He,reconnectRadius:Fe,defaultMarkerColor:ye,noDragClassName:qe,noWheelClassName:Qe,noPanClassName:We,rfId:wt,disableKeyboardA11y:nt,nodeExtent:me,viewport:ht,onViewportChange:ft}),e(vs,{nodes:n,edges:r,defaultNodes:o,defaultEdges:i,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:oe,nodesConnectable:ie,nodesFocusable:se,edgesFocusable:le,edgesReconnectable:ce,elementsSelectable:ue,elevateNodesOnSelect:et,elevateEdgesOnSelect:tt,minZoom:he,maxZoom:fe,nodeExtent:me,onNodesChange:Ue,onEdgesChange:Ve,snapToGrid:ee,snapGrid:te,connectionMode:F,translateExtent:pe,connectOnClick:Ze,defaultEdgeOptions:Je,fitView:Ge,fitViewOptions:Ye,onNodesDelete:N,onEdgesDelete:O,onDelete:R,onNodeDragStart:A,onNodeDrag:P,onNodeDragStop:I,onSelectionDrag:D,onSelectionDragStart:L,onSelectionDragStop:B,onMove:p,onMoveStart:g,onMoveEnd:m,noPanClassName:We,nodeOrigin:ae,rfId:wt,autoPanOnConnect:rt,autoPanOnNodeDrag:ot,autoPanSpeed:it,onError:lt,connectionRadius:st,isValidConnection:at,selectNodesOnDrag:re,nodeDragThreshold:dt,onBeforeDelete:H,paneClickDistance:Ne,debug:yt}),e(fs,{onSelectionChange:T}),Re,e(as,{proOptions:Ke,position:Xe}),e(os,{rfId:wt,disableKeyboardA11y:nt})]})})}));function _l({dimensions:t,lineWidth:n,variant:r,className:o}){return e("path",{strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:E(["react-flow__background-pattern",r,o])})}function Sl({radius:t,className:n}){return e("circle",{cx:t,cy:t,r:t,className:E(["react-flow__background-pattern","dots",n])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(wl||(wl={}));const El={[wl.Dots]:1,[wl.Lines]:1,[wl.Cross]:6},kl=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Cl({id:n,variant:r=wl.Dots,gap:o=20,size:i,lineWidth:s=1,offset:a=2,color:l,bgColor:c,style:u,className:h,patternClassName:f}){const p=d(null),{transform:g,patternId:m}=Yi(kl,qi),y=i||El[r],b=r===wl.Dots,v=r===wl.Cross,w=Array.isArray(o)?o:[o,o],x=[w[0]*g[2]||1,w[1]*g[2]||1],_=y*g[2],S=v?[_,_]:x,k=b?[_/a,_/a]:[S[0]/a,S[1]/a],C=`${m}${n||""}`;return t("svg",{className:E(["react-flow__background",h]),style:{...u,...Qs,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:p,"data-testid":"rf__background",children:[e("pattern",{id:C,x:g[0]%x[0],y:g[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:b?e(Sl,{radius:_/a,className:f}):e(_l,{dimensions:S,lineWidth:s,variant:r,className:f})}),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}function Ml(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:e("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Al(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:e("path",{d:"M0 0h32v4.2H0z"})})}function Pl(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:e("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Il(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:e("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Nl(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:e("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ol({children:t,className:n,...r}){return e("button",{type:"button",className:E(["react-flow__controls-button",n]),...r,children:t})}Cl.displayName="Background",i(Cl);const Rl=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Tl({style:r,showZoom:o=!0,showFitView:i=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:u,onInteractiveChange:d,className:h,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":m="React Flow controls"}){const y=Zi(),{isInteractive:b,minZoomReached:v,maxZoomReached:w}=Yi(Rl,qi),{zoomIn:x,zoomOut:_,fitView:S}=Fs();return t(ss,{className:E(["react-flow__controls","horizontal"===g?"horizontal":"vertical",h]),position:p,style:r,"data-testid":"rf__controls","aria-label":m,children:[o&&t(n,{children:[e(Ol,{onClick:()=>{x(),l?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:e(Ml,{})}),e(Ol,{onClick:()=>{_(),c?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:e(Al,{})})]}),i&&e(Ol,{className:"react-flow__controls-fitview",onClick:()=>{S(a),u?.()},title:"fit view","aria-label":"fit view",children:e(Pl,{})}),s&&e(Ol,{className:"react-flow__controls-interactive",onClick:()=>{y.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d?.(!b)},title:"toggle interactivity","aria-label":"toggle interactivity",children:e(b?Nl:Il,{})}),f]})}Tl.displayName="Controls";const Ll=i(Tl);const Dl=i((function({id:t,x:n,y:r,width:o,height:i,style:s,color:a,strokeColor:l,strokeWidth:c,className:u,borderRadius:d,shapeRendering:h,selected:f,onClick:p}){const{background:g,backgroundColor:m}=s||{},y=a||g||m;return e("rect",{className:E(["react-flow__minimap-node",{selected:f},u]),x:n,y:r,rx:d,ry:d,width:o,height:i,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:h,onClick:p?e=>p(e,t):void 0})})),Bl=e=>e.nodes.map((e=>e.id)),zl=e=>e instanceof Function?e:()=>e;const $l=i((function({id:t,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:l,onClick:c}){const{node:u,x:d,y:h}=Yi((e=>{const n=e.nodeLookup.get(t),{x:r,y:o}=n.internals.positionAbsolute;return{node:n,x:r,y:o}}),qi);if(!u||u.hidden||!lo(u))return null;const{width:f,height:p}=ao(u);return e(l,{x:d,y:h,width:f,height:p,style:u.style,selected:!!u.selected,className:o(u),color:n(u),borderRadius:i,strokeColor:r(u),strokeWidth:s,shapeRendering:a,onClick:c,id:u.id})}));var jl=i((function({nodeStrokeColor:t,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a=Dl,onClick:l}){const c=Yi(Bl,qi),u=zl(r),d=zl(t),h=zl(o),f=window.chrome?"crispEdges":"geometricPrecision";return e(n,{children:c.map((t=>e($l,{id:t,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:i,nodeStrokeWidth:s,NodeComponent:a,onClick:l,shapeRendering:f},t)))})}));const Hl=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Zr(Lr(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function Fl({style:n,className:r,nodeStrokeColor:o,nodeColor:i,nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:f,maskColor:p,maskStrokeColor:g,maskStrokeWidth:m,position:y="bottom-right",onClick:b,onNodeClick:v,pannable:w=!1,zoomable:x=!1,ariaLabel:_="React Flow mini map",inversePan:S,zoomStep:k=10,offsetScale:C=5}){const M=Zi(),A=d(null),{boundingRect:P,viewBB:I,rfId:N,panZoom:O,translateExtent:R,flowWidth:T,flowHeight:L}=Yi(Hl,qi),D=n?.width??200,B=n?.height??150,z=P.width/D,$=P.height/B,j=Math.max(z,$),H=j*D,F=j*B,U=C*j,V=P.x-(H-P.width)/2-U,q=P.y-(F-P.height)/2-U,Q=H+2*U,W=F+2*U,G=`react-flow__minimap-desc-${N}`,Y=d(0),Z=d();Y.current=j,h((()=>{if(A.current&&O)return Z.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Fe(e);return{update:function({translateExtent:e,width:i,height:s,zoomStep:a=10,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let d=[0,0];const h=yr().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",l?o=>{const a=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;const l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],c=[l[0]-d[0],l[1]-d[1]];d=l;const h=r()*Math.max(a[2],Math.log(a[2]))*(u?-1:1),f={x:a[0]-c[0]*h,y:a[1]-c[1]*h},p=[[0,0],[i,s]];t.setViewportConstrained({x:f.x,y:f.y,zoom:a[2]},p,e)}:null).on("zoom.wheel",c?e=>{const r=n();if("wheel"!==e.sourceEvent.type||!t)return;const o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*a,i=r[2]*Math.pow(2,o);t.scaleTo(i)}:null);o.call(h,{})},destroy:function(){o.on("zoom",null)},pointer:Ue}}({domNode:A.current,panZoom:O,getTransform:()=>M.getState().transform,getViewScale:()=>Y.current}),()=>{Z.current?.destroy()}}),[O]),h((()=>{Z.current?.update({translateExtent:R,width:T,height:L,inversePan:S,pannable:w,zoomStep:k,zoomable:x})}),[w,x,S,k,R,T,L]);const X=b?e=>{const[t,n]=Z.current?.pointer(e)||[0,0];b(e,{x:t,y:n})}:void 0,K=v?c(((e,t)=>{const n=M.getState().nodeLookup.get(t);v(e,n)}),[]):void 0;return e(ss,{position:y,style:{...n,"--xy-minimap-background-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof g?g:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof m?m*j:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof o?o:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof l?l:void 0},className:E(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:t("svg",{width:D,height:B,viewBox:`${V} ${q} ${Q} ${W}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:A,onClick:X,children:[_&&e("title",{id:G,children:_}),e(jl,{onClick:K,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:u}),e("path",{className:"react-flow__minimap-mask",d:`M${V-U},${q-U}h${Q+2*U}v${W+2*U}h${-Q-2*U}z\n        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}function Ul(e){return-1===e}function Vl(e){return!Ul(e)}Fl.displayName="MiniMap",i(Fl),i((function({nodeId:t,position:n,variant:r=ai.Handle,className:o,style:i={},children:s,color:a,minWidth:l=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:g,onResizeStart:m,onResize:y,onResizeEnd:b}){const v=sa(),w="string"==typeof t?t:v,x=Zi(),_=d(null),S=r===ai.Line?"right":"bottom-right",k=n??S,C=d(null);h((()=>{if(_.current&&w)return C.current||(C.current=gi({domNode:_.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o}=x.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=x.getState(),s=[],a={x:e.x,y:e.y},l=r.get(w);if(l&&l.expandParent&&l.parentId){const t=l.origin??i,n=e.width??l.measured.width,c=e.height??l.measured.height,u=Fo([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...co({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,r,t)}}],r,o,i);s.push(...u),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){const e={id:w,type:"position",position:{...a}};s.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:w,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};s.push(t)}for(const e of t){const t={...e,type:"position"};s.push(t)}n(s)},onEnd:()=>{const e={id:w,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([e])}})),C.current.update({controlPosition:k,boundaries:{minWidth:l,minHeight:c,maxWidth:u,maxHeight:f},keepAspectRatio:p,onResizeStart:m,onResize:y,onResizeEnd:b,shouldResize:g}),()=>{C.current?.destroy()}}),[k,l,c,u,f,p,m,y,b,g]);const M=k.split("-"),A=r===ai.Line?"borderColor":"backgroundColor",P=a?{...i,[A]:a}:i;return e("div",{className:E(["react-flow__resize-control","nodrag",...M,r,o]),ref:_,style:P,children:s})}));var ql=-1,Ql=o((function(e){return"y"}));const Wl="-";function Gl(e){const t=function(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]},o=function(e,t){if(!t)return e;return e.map((([e,n])=>[e,n.map((e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,n])=>[t+e,n]))):e))]))}(Object.entries(e.classGroups),n);return o.forEach((([e,n])=>{Xl(n,r,e,t)})),r}(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:function(e){const n=e.split(Wl);return""===n[0]&&1!==n.length&&n.shift(),Yl(n,t)||function(e){if(Zl.test(e)){const t=Zl.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){const o=n[e]||[];return t&&r[e]?[...o,...r[e]]:o}}}function Yl(e,t){if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?Yl(e.slice(1),r):void 0;if(o)return o;if(0===t.validators.length)return;const i=e.join(Wl);return t.validators.find((({validator:e})=>e(i)))?.classGroupId}const Zl=/^\[(.+)\]$/;function Xl(e,t,n,r){e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void Xl(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((([e,o])=>{Xl(o,Kl(t,e),n,r)}))}else{(""===e?t:Kl(t,e)).classGroupId=n}}))}function Kl(e,t){let n=e;return t.split(Wl).forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n}function Jl(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function o(o,i){n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)}return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(o(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):o(e,t)}}}const ec="!";function tc(e){const t=e.separator,n=1===t.length,r=t[0],o=t.length;return function(e){const i=[];let s,a=0,l=0;for(let c=0;c<e.length;c++){let u=e[c];if(0===a){if(u===r&&(n||e.slice(c,c+o)===t)){i.push(e.slice(l,c)),l=c+o;continue}if("/"===u){s=c;continue}}"["===u?a++:"]"===u&&a--}const c=0===i.length?e:e.substring(l),u=c.startsWith(ec);return{modifiers:i,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:s&&s>l?s-l:void 0}}}const nc=/\s+/;function rc(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=oc(e))&&(r&&(r+=" "),r+=t);return r}function oc(e){if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=oc(e[r]))&&(n&&(n+=" "),n+=t);return n}function ic(e,...t){let n,r,o,i=function(a){const l=t.reduce(((e,t)=>t(e)),e());return n=function(e){return{cache:Jl(e.cacheSize),splitModifiers:tc(e),...Gl(e)}}(l),r=n.cache.get,o=n.cache.set,i=s,s(a)};function s(e){const t=r(e);if(t)return t;const i=function(e,t){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,i=new Set;return e.trim().split(nc).map((e=>{const{modifiers:t,hasImportantModifier:o,baseClassName:i,maybePostfixModifierPosition:s}=n(e);let a=r(s?i.substring(0,s):i),l=Boolean(s);if(!a){if(!s)return{isTailwindClass:!1,originalClassName:e};if(a=r(i),!a)return{isTailwindClass:!1,originalClassName:e};l=!1}const c=function(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach((e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)})),t.push(...n.sort()),t}(t).join(":");return{isTailwindClass:!0,modifierId:o?c+ec:c,classGroupId:a,originalClassName:e,hasPostfixModifier:l}})).reverse().filter((e=>{if(!e.isTailwindClass)return!0;const{modifierId:t,classGroupId:n,hasPostfixModifier:r}=e,s=t+n;return!i.has(s)&&(i.add(s),o(n,r).forEach((e=>i.add(t+e))),!0)})).reverse().map((e=>e.originalClassName)).join(" ")}(e,n);return o(e,i),i}return function(){return i(rc.apply(null,arguments))}}function sc(e){const t=t=>t[e]||[];return t.isThemeGetter=!0,t}const ac=/^\[(?:([a-z-]+):)?(.+)\]$/i,lc=/^\d+\/\d+$/,cc=new Set(["px","full","screen"]),uc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function gc(e){return yc(e)||cc.has(e)||lc.test(e)}function mc(e){return Ic(e,"length",Nc)}function yc(e){return Boolean(e)&&!Number.isNaN(Number(e))}function bc(e){return Ic(e,"number",yc)}function vc(e){return Boolean(e)&&Number.isInteger(Number(e))}function wc(e){return e.endsWith("%")&&yc(e.slice(0,-1))}function xc(e){return ac.test(e)}function _c(e){return uc.test(e)}const Sc=new Set(["length","size","percentage"]);function Ec(e){return Ic(e,Sc,Oc)}function kc(e){return Ic(e,"position",Oc)}const Cc=new Set(["image","url"]);function Mc(e){return Ic(e,Cc,Tc)}function Ac(e){return Ic(e,"",Rc)}function Pc(){return!0}function Ic(e,t,n){const r=ac.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))}function Nc(e){return dc.test(e)&&!hc.test(e)}function Oc(){return!1}function Rc(e){return fc.test(e)}function Tc(e){return pc.test(e)}function Lc(){const e=sc("colors"),t=sc("spacing"),n=sc("blur"),r=sc("brightness"),o=sc("borderColor"),i=sc("borderRadius"),s=sc("borderSpacing"),a=sc("borderWidth"),l=sc("contrast"),c=sc("grayscale"),u=sc("hueRotate"),d=sc("invert"),h=sc("gap"),f=sc("gradientColorStops"),p=sc("gradientColorStopPositions"),g=sc("inset"),m=sc("margin"),y=sc("opacity"),b=sc("padding"),v=sc("saturate"),w=sc("scale"),x=sc("sepia"),_=sc("skew"),S=sc("space"),E=sc("translate"),k=()=>["auto",xc,t],C=()=>[xc,t],M=()=>["",gc,mc],A=()=>["auto",yc,xc],P=()=>["","0",xc],I=()=>[yc,bc],N=()=>[yc,xc];return{cacheSize:500,separator:":",theme:{colors:[Pc],spacing:[gc,mc],blur:["none","",_c,xc],brightness:I(),borderColor:[e],borderRadius:["none","","full",_c,xc],borderSpacing:C(),borderWidth:M(),contrast:I(),grayscale:P(),hueRotate:N(),invert:P(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[wc,mc],inset:k(),margin:k(),opacity:I(),padding:C(),saturate:I(),scale:I(),sepia:P(),skew:N(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",xc]}],container:["container"],columns:[{columns:[_c]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",xc]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vc,xc]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xc]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",vc,xc]}],"grid-cols":[{"grid-cols":[Pc]}],"col-start-end":[{col:["auto",{span:["full",vc,xc]},xc]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Pc]}],"row-start-end":[{row:["auto",{span:[vc,xc]},xc]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xc]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xc]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xc,t]}],"min-w":[{"min-w":[xc,t,"min","max","fit"]}],"max-w":[{"max-w":[xc,t,"none","full","min","max","fit","prose",{screen:[_c]},_c]}],h:[{h:[xc,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xc,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xc,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xc,t,"auto","min","max","fit"]}],"font-size":[{text:["base",_c,mc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bc]}],"font-family":[{font:[Pc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xc]}],"line-clamp":[{"line-clamp":["none",yc,bc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gc,xc]}],"list-image":[{"list-image":["none",xc]}],"list-style-type":[{list:["none","disc","decimal",xc]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gc,mc]}],"underline-offset":[{"underline-offset":["auto",gc,xc]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xc]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xc]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",kc]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ec]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mc]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[gc,xc]}],"outline-w":[{outline:[gc,mc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[gc,mc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",_c,Ac]}],"shadow-color":[{shadow:[Pc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_c,xc]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xc]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",xc]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",xc]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[vc,xc]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xc]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xc]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xc]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gc,mc,bc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const Dc=ic(Lc);function Bc(t){var n=JSON.stringify(t.term),r=a(Ql)(t.term),o=t.focus.isFocussed(n);return e("div",g({className:Dc("bg-white w-6 h-6 m-1 border-black border-2 rounded-full select-none relative z-50",!("variable"in t.term)&&0!==t.term.args.length&&"bg-pink",o&&"scale-110 bg-yellow-highlight"),onMouseEnter:function(){return t.focus.focus(n)},onMouseLeave:function(){return t.focus.resetFocus()}},{children:r}))}function zc(){return e("polygon",{points:"3,2 14,2 19,10 14,18 3,18"})}function $c(){return e("polygon",{points:"10,10 5,2 17,2 22,10 17,18 5,18"})}function jc(r){var o=r.type,i=r.isConnected,s=void 0!==i&&i,a=r.isInline;return t("svg",g({className:rc("stroke-[1.5px] stroke-black pointer-events-none fill-white",void 0!==a&&a&&"inline"),width:"24",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:[e("source"===o?zc:$c,{}),"target"===o&&s?e("polyline",{points:"1,2 6,10 1,18",fill:"none"}):e(n,{})]}))}function Hc(t){var n=t.position;return e("div","source"===n?g({className:"react-flow__handle react-flow__handle-right"},{children:e(jc,{type:"source",isConnected:!1})}):g({className:"react-flow__handle react-flow__handle-left"},{children:e(jc,{type:"target",isConnected:!1})}))}function Fc(e){switch(e){case"r":return"bg-red";case"y":return"bg-yellow";case"g":return"bg-green";case"b":return"bg-blue";case"w":return"bg-white";case"bl":return"bg-black";case"o":return"bg-orange";case"p":return"bg-purple";case"c":return"bg-cyan"}}function Uc(e,t){return"handle_".concat(JSON.stringify(e),"_of_").concat(t)}function Vc(e,t){var n,r,o=e.split("_")[1];try{for(var i=v(t),s=i.next();!s.done;s=i.next()){var a=w(s.value,2),l=a[0],c=a[1];if(JSON.stringify(l)===o)return c}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw Error("Term not found for handle "+e)}function qc(r){if("variable"in r.term)return console.error("Term cannot be rendered as node:"+r.term),e(n,{});var o,i="striped_"===(o=r.term.label).substring(0,8)?"bg-striped "+Fc(o.substring(8)):Fc(o);return t("div",g({className:"flex items-center"},{children:[e("div",g({className:Dc("m-1 border-black border-2 rounded-lg p-0.5",i,r.isGoalNode&&"outline outline-offset-2 outline-2")},{children:r.term.args.map((function(t,n){return e(Bc,{term:t,focus:r.holeFocus},n)}))})),function(){if(r.useDummyHandle){var t=Vl(r.position)?"target":"source";return e(Hc,{position:t})}var n=function(e){return Vl(r.position)?{type:"target",position:Mr.Left,id:e}:{type:"source",position:Mr.Right,id:e}}(Uc(r.position,r.gadgetId));return e(la,g({},n,{children:e(jc,{type:n.type,isConnected:!1})}))}()]}))}function Qc(e){return e.x+" "+e.y}function Wc(e,t){return{x:e.x+t,y:e.y}}function Gc(e){var t=e.offsetLeft,n=e.offsetTop;return{x:t+e.offsetWidth/2,y:n+e.offsetHeight/2}}var Yc=30,Zc=10;function Xc(t,n,r){void 0===r&&(r=Yc);var o="M "+Qc(t.start),i=(t.fromInput?r:-r)+n*Zc,s=Wc(t.start,i),a=t.toOutput?-r:r,l=Wc(t.end,a),c="C "+Qc(s)+", "+Qc(l)+", "+Qc(t.end);return e("path",{d:o+" "+c,strokeWidth:"2px",stroke:"black",fill:"transparent"},n)}function Kc(t){var n,r=m(t,[]);return e("svg",g({className:"absolute top-0 left-0 w-full h-full z-5 pointer-events-none stroke-black"},{children:(n=r.connections.map((function(e,t){return Xc(e,t)})),n)}))}var Jc=function(){function e(){this.parent=new Map,this.rank=new Map,this.assignments=new Map}return e.prototype.makeSet=function(e){this.parent.set(e,e),this.rank.set(e,0)},e.prototype.performPathCompression=function(e){this.parent.get(e)!==e&&this.parent.set(e,this.findRepresentative(this.parent.get(e)))},e.prototype.findRepresentative=function(e){return this.parent.has(e)||this.makeSet(e),this.performPathCompression(e),this.parent.get(e)},e.prototype.valueToBeAssigned=function(e,t){return void 0===e?t:e},e.prototype.setIfNotUndefined=function(e,t){void 0!==t&&this.assignments.set(e,t)},e.prototype.unite=function(e,t){var n=this.findRepresentative(e),r=this.findRepresentative(t);if(n!==r){var o=this.assignments.get(n),i=this.assignments.get(r),s=this.valueToBeAssigned(o,i),a=this.rank.get(n),l=this.rank.get(r);a<l?(this.parent.set(n,r),this.setIfNotUndefined(r,s)):a>l?(this.parent.set(r,n),this.setIfNotUndefined(n,s)):(this.parent.set(r,n),this.setIfNotUndefined(n,s),this.rank.set(n,a+1))}},e.prototype.assign=function(e,t){var n=this.findRepresentative(e);this.assignments.set(n,t)},e.prototype.getAssignedValue=function(e){var t=this.findRepresentative(e);return this.assignments.get(t)},e.prototype.isAssigned=function(e){var t=this.findRepresentative(e);return this.assignments.has(t)},e.prototype.getAssignedValues=function(){return new(Array.bind.apply(Array,x([void 0],w(this.assignments.values()),!1)))},e}();function eu(e){return function(e,t){void 0===t&&(t=0);for(var n=3735928559^t,r=1103547991^t,o=0,i=void 0;o<e.length;o++)i=e.charCodeAt(o),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),4294967296*(2097151&(r^=Math.imul(n^n>>>13,3266489909)))+(n>>>0)}(JSON.stringify(e))}function tu(e,t){return"variable"in e?t===e.variable:e.args.map((function(e){return tu(e,t)})).includes(!0)}function nu(e,t){if("variable"in e){var n=t.getAssignedValue(e.variable);return n||e}var r=e.args.map((function(e){return nu(e,t)}));return{label:e.label,args:r}}function ru(e){if("variable"in e)return[e.variable];var t=[];return e.args.forEach((function(e){return t=t.concat(ru(e))})),t}function ou(e){return new Set(ru(e))}function iu(e,t){var n=new Jc;return ou(e).forEach((function(e){return n.assign(e,{variable:t+"_"+e})})),nu(e,n)}function su(e,t){if("args"in t){for(var n=[],r=0;r<t.args.length;r++){var o=t.args[r];"variable"in o&&o.variable===e&&n.push(r)}return n}return[]}function au(e,t,n){var r,o=e.map((function(e,t){return su(n,e).map((function(e){return[t,e]}))})),i=su(n,t).map((function(e){return["output",e]})),s=o.flat();if(0===i.length){for(var a=[],l=0;l<s.length-1;l++)a.push({from:s[l],to:s[l+1]});return a}return 0===s.length?(r=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=n+1;r<e.length;r++)t.push([e[n],e[r]]);return t}(i),r.map((function(e){var t=w(e,2);return{from:t[0],to:t[1]}}))):s.map((function(e){return i.map((function(t){return{from:e,to:t}}))})).flat()}function lu(e,t){var n=w(t,2),r=n[0],o=n[1];return"output"===r?function(e,t){return Gc(e.childNodes[1].childNodes[0].childNodes[0].childNodes[t])}(e,o):function(e,t,n){return Gc(e.childNodes[0].childNodes[t].childNodes[0].childNodes[n])}(e,r,o)}function cu(e,t){var n=document.getElementById(e);if(n)return lu(n,t);throw new Error("Couldn't find gadget with id "+e)}function uu(r){var o=m(r,[]),i=w(s({connections:[]}),2),a=i[0],l=i[1],c=w(s(""),2),u=c[0],d=c[1],h={isFocussed:function(e){return e===u&&o.displayHoleFocus},focus:function(e){return d(e)},resetFocus:function(){return d("")}};function p(){return Array.from(o.terms.keys()).some(Ul)}return f((function(){if(p()){var e=function(e,t){var n=e.concat(t).map(ru),r=Array.from(new Set(n.flat())).map((function(n){return au(e,t,n)}));return r.flat()}(Array.from(o.terms).filter((function(e){return Vl(e[0])})).map((function(e){return e[1]})),o.terms.get(ql)),t=e.map((function(e){return{start:cu(o.id,e.from),end:cu(o.id,e.to),fromInput:"output"!==w(e.from,1)[0],toOutput:"output"===w(e.to,1)[0]}}));l({connections:t})}}),[o.terms,o.id]),t("div",g({className:"text-center relative"},{children:[t("div",g({className:Dc("flex",Array.from(o.terms.keys()).some(Vl)&&"space-x-8"),id:o.id},{children:[e("div",g({className:"flex flex-col items-start"},{children:function(){var t,n,r=[];try{for(var i=v(o.terms),s=i.next();!s.done;s=i.next()){var a=w(s.value,2),l=a[0],c={term:a[1],position:l,gadgetId:o.id,holeFocus:h,useDummyHandle:o.isAxiom,isGoalNode:"goal_gadget"===o.id};Vl(l)&&r.push(e(qc,g({},c),l))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}()})),function(){if(p()){var t={term:o.terms.get(ql),position:ql,gadgetId:o.id,holeFocus:h,useDummyHandle:o.isAxiom,isGoalNode:!1};return e("div",g({className:"flex flex-col justify-center"},{children:e(qc,g({},t))}))}return e(n,{})}()]})),e(Kc,g({},a))]}))}function du(e,t){var n=function(e,t){var n=e.hypotheses.map((function(e){return iu(e,t)}));return{hypotheses:n,conclusion:iu(e.conclusion,t)}}(e,t),r=new Map;return n.hypotheses.forEach((function(e,t){r.set(t,e)})),r.set(ql,n.conclusion),{terms:r,id:t,isAxiom:!1,displayHoleFocus:!0}}function hu(e){return"variable"in e?"":0===e.args.length?e.label:"?"}function fu(e){return"variable"in e?e.variable:0===e.args.length?e.label:e.label+"("+e.args.map(fu).join(", ")+")"}function pu(e){return e.hypotheses.map(fu).join(", ")+" :- "+fu(e.conclusion)}function gu(e){var t=d(0);return[function(){return t.current=t.current+1,e+t.current},function(){t.current=0}]}function mu(t){var n=t.makeGadget,r=t.children,o=d(null);return e("div",g({ref:o,className:"flex justify-center px-1",onMouseDown:function(e){var t;n({x:(t=o.current.getBoundingClientRect()).left+t.width/2,y:t.top+t.height/2})}},{children:r}))}function yu(t){var n=m(t,[]),r=w(gu("axiom_"),2),o=r[0];function i(e){var t=new Map;return e.hypotheses.forEach((function(e,n){t.set(n,e)})),t.set(ql,e.conclusion),{terms:t,id:o(),isAxiom:!0,displayHoleFocus:!0}}return(0,r[1])(),e(ss,g({position:"top-center"},{children:e(Ql.Provider,g({value:hu},{children:e("div",g({id:"gadget_palette",className:"absolute min-w-40 h-[calc(100vh-64px)] flex flex-col left-0 top-0 p-1 overflow-y-scroll bg-palette-gray/50"},{children:n.axioms.map((function(t){return e(mu,g({makeGadget:function(e){return n.makeGadget(t,e)}},{children:e(uu,g({},i(t)))}),JSON.stringify(t))}))}))}))}))}S("/* this will be exported as base.css and can be used for a basic styling */\n/* these are the necessary styles for React/Svelte Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n\n  --xy-edge-stroke-default: #b1b1b7;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #555;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(255, 255, 255, 0.5);\n\n  --xy-minimap-background-color-default: #fff;\n  --xy-minimap-mask-background-color-default: rgb(240, 240, 240, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #e2e2e2;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: transparent;\n  --xy-background-pattern-dots-color-default: #91919a;\n  --xy-background-pattern-lines-color-default: #eee;\n  --xy-background-pattern-cross-color-default: #e2e2e2;\n  background-color: var(--xy-background-color, var(--xy-background-color-default));\n  --xy-node-border-default: 1px solid #bbb;\n  --xy-node-border-selected-default: 1px solid #555;\n\n  --xy-handle-background-color-default: #333;\n\n  --xy-selection-background-color-default: rgba(150, 150, 180, 0.1);\n  --xy-selection-border-default: 1px dotted rgba(155, 155, 155, 0.8);\n  --xy-resize-background-color-default: #3367d9;\n}\n.react-flow.dark {\n  --xy-edge-stroke-default: #3e3e3e;\n  --xy-edge-stroke-width-default: 1;\n  --xy-edge-stroke-selected-default: #727272;\n\n  --xy-connectionline-stroke-default: #b1b1b7;\n  --xy-connectionline-stroke-width-default: 1;\n\n  --xy-attribution-background-color-default: rgba(150, 150, 150, 0.25);\n\n  --xy-minimap-background-color-default: #141414;\n  --xy-minimap-mask-background-color-default: rgb(60, 60, 60, 0.6);\n  --xy-minimap-mask-stroke-color-default: transparent;\n  --xy-minimap-mask-stroke-width-default: 1;\n  --xy-minimap-node-background-color-default: #2b2b2b;\n  --xy-minimap-node-stroke-color-default: transparent;\n  --xy-minimap-node-stroke-width-default: 2;\n\n  --xy-background-color-default: #141414;\n  --xy-background-pattern-dots-color-default: #777;\n  --xy-background-pattern-lines-color-default: #777;\n  --xy-background-pattern-cross-color-default: #777;\n  --xy-node-color-default: #f8f8f8;\n}\n.react-flow__background {\n  background-color: var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));\n  pointer-events: none;\n  z-index: -1;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.draggable {\n    cursor: grab;\n  }\n.react-flow__pane.draggable.dragging {\n      cursor: grabbing;\n    }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow__edge-path {\n  stroke: var(--xy-edge-stroke, var(--xy-edge-stroke-default));\n  stroke-width: var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));\n  fill: none;\n}\n.react-flow__connection-path {\n  stroke: var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));\n  stroke-width: var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));\n  fill: none;\n}\n.react-flow__edges {\n  position: absolute;\n}\n.react-flow__edges svg {\n    overflow: visible;\n    position: absolute;\n    pointer-events: none;\n  }\n.react-flow__edge {\n  pointer-events: visibleStroke;\n}\n.react-flow__edge.selectable {\n    cursor: pointer;\n  }\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge.selectable:focus .react-flow__edge-path,\n  .react-flow__edge.selectable:focus-visible .react-flow__edge-path {\n    stroke: var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default));\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    animation: dashdraw 0.5s linear infinite;\n  }\nsvg.react-flow__connectionline {\n  z-index: 1001;\n  overflow: visible;\n  position: absolute;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: default;\n}\n.react-flow__node.selectable {\n    cursor: pointer;\n  }\n.react-flow__node.draggable {\n    cursor: grab;\n    pointer-events: all;\n  }\n.react-flow__node.draggable.dragging {\n      cursor: grabbing;\n    }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  background-color: var(--xy-handle-background-color, var(--xy-handle-background-color-default));\n}\n.react-flow__handle.connectingfrom {\n    pointer-events: all;\n  }\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: 0;\n    transform: translate(-50%, 50%);\n  }\n.react-flow__handle-top {\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: 0;\n    transform: translate(-50%, -50%);\n  }\n.react-flow__handle-right {\n    top: 50%;\n    right: 0;\n    transform: translate(50%, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n          user-select: none;\n  left: 0;\n  top: 0;\n}\n.react-flow__viewport-portal {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.react-flow__minimap {\n  background: var(\n    --xy-minimap-background-color-props,\n    var(--xy-minimap-background-color, var(--xy-minimap-background-color-default))\n  );\n}\n.react-flow__minimap-svg {\n    display: block;\n  }\n.react-flow__minimap-mask {\n    fill: var(\n      --xy-minimap-mask-background-color-props,\n      var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-mask-stroke-color-props,\n      var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-mask-stroke-width-props,\n      var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default))\n    );\n  }\n.react-flow__minimap-node {\n    fill: var(\n      --xy-minimap-node-background-color-props,\n      var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default))\n    );\n    stroke: var(\n      --xy-minimap-node-stroke-color-props,\n      var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default))\n    );\n    stroke-width: var(\n      --xy-minimap-node-stroke-width-props,\n      var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default))\n    );\n  }\n.react-flow__background-pattern.dots {\n    fill: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default))\n    );\n  }\n.react-flow__background-pattern.lines {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default))\n    );\n  }\n.react-flow__background-pattern.cross {\n    stroke: var(\n      --xy-background-pattern-color-props,\n      var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default))\n    );\n  }\n.react-flow__controls {\n  display: flex;\n  flex-direction: column;\n}\n.react-flow__controls.horizontal {\n    flex-direction: row;\n  }\n.react-flow__controls-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 26px;\n    width: 26px;\n    padding: 4px;\n  }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n      fill: currentColor;\n    }\n.react-flow__node-input,\n.react-flow__node-default,\n.react-flow__node-output,\n.react-flow__node-group {\n  border: var(--xy-node-border, var(--xy-node-border-default));\n  color: var(--xy-node-color, var(--xy-node-color-default));\n}\n.react-flow__node-input.selected,\n  .react-flow__node-input:focus,\n  .react-flow__node-input:focus-visible,\n  .react-flow__node-default.selected,\n  .react-flow__node-default:focus,\n  .react-flow__node-default:focus-visible,\n  .react-flow__node-output.selected,\n  .react-flow__node-output:focus,\n  .react-flow__node-output:focus-visible,\n  .react-flow__node-group.selected,\n  .react-flow__node-group:focus,\n  .react-flow__node-group:focus-visible {\n    outline: none;\n    border: var(--xy-node-border-selected, var(--xy-node-border-selected-default));\n  }\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: var(--xy-selection-background-color, var(--xy-selection-background-color-default));\n  border: var(--xy-selection-border, var(--xy-selection-border-default));\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: var(--xy-resize-background-color, var(--xy-resize-background-color-default));\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n");function bu(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}S(".react-flow__handle {\n    top: auto;\n    width: 24px;\n    height: 20px;\n    transform: none;\n    background-color: transparent;\n}\n\n.react-flow__handle-left {\n    left: -12px;\n}\n\n.react-flow__handle-right {\n    right: -10px;\n}\n\n.react-flow__panel.center {\n    top: auto;\n    left: auto;\n    transform: auto;\n    margin: 0px;\n}\n\n.react-flow__node {\n    border: solid 2px #00000000;\n}\n\n.react-flow__node.selectable:focus {\n    box-shadow: 0px 0px 10px gray;\n    border-radius: 15px\n}\n\n.react-flow__handle.valid svg {\n    fill: #32ff7e;\n}");var vu=["color"],wu=l((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,o=bu(e,vu);return p("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),p("path",{d:"M0.877075 7.50207C0.877075 3.84319 3.84319 0.877075 7.50208 0.877075C11.1609 0.877075 14.1271 3.84319 14.1271 7.50207C14.1271 11.1609 11.1609 14.1271 7.50208 14.1271C3.84319 14.1271 0.877075 11.1609 0.877075 7.50207ZM1.84898 7.00003C2.0886 4.26639 4.26639 2.0886 7.00003 1.84898V4.50003C7.00003 4.77617 7.22388 5.00003 7.50003 5.00003C7.77617 5.00003 8.00003 4.77617 8.00003 4.50003V1.84862C10.7356 2.08643 12.9154 4.26502 13.1552 7.00003H10.5C10.2239 7.00003 10 7.22388 10 7.50003C10 7.77617 10.2239 8.00003 10.5 8.00003H13.1555C12.9176 10.7369 10.7369 12.9176 8.00003 13.1555V10.5C8.00003 10.2239 7.77617 10 7.50003 10C7.22388 10 7.00003 10.2239 7.00003 10.5V13.1552C4.26502 12.9154 2.08643 10.7356 1.84862 8.00003H4.50003C4.77617 8.00003 5.00003 7.77617 5.00003 7.50003C5.00003 7.22388 4.77617 7.00003 4.50003 7.00003H1.84898Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),xu=["color"],_u=l((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,o=bu(e,xu);return p("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),p("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Su=["color"],Eu=l((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,o=bu(e,Su);return p("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),p("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}));function ku(r){var o="!w-10 !h-10 border-black border-2 rounded-lg m-0.5 hover:bg-black hover:text-white",i="!max-w-none !max-h-none h-full";return t(Ll,g({showZoom:!1,showInteractive:!1,showFitView:!1,position:"bottom-right"},{children:[r.zoomEnabled&&t(n,{children:[e(Ol,g({className:o,onClick:function(){return r.rf.zoomIn()}},{children:e(Eu,{className:i})})),e(Ol,g({className:o,onClick:function(){return r.rf.zoomOut()}},{children:e(_u,{className:i})}))]}),e(Ol,g({className:o,onClick:function(){r.rf.fitView({padding:.5})}},{children:e(wu,{className:i})}))]}))}function Cu(e,t){return!!e.targetHandle&&e.targetHandle===t}function Mu(e){var t=Fs(),n=t.getNode,r=t.getEdges;h((function(){function t(e){var t,n=r().filter((function(t){return t.target===e.id}));return(t=e.data,Array.from(t.terms.keys()).filter((function(e){return Vl(e)})).length)!==n.length}(function(){for(var r,o,i=[],s=[n("goal_gadget")];;){try{for(var a=(r=void 0,v(s)),l=a.next();!l.done;l=a.next()){if(t(l.value))return!1}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}i=i.concat(s);var c=s.map((function(t){return Rr(t,e.nodes,e.edges)})).flat();if(0===c.length)break;s=c}return Br(i,e.edges).every((function(e){return!e.animated}))})()&&e.setProblemSolved()}),[n,e])}var Au=60;var Pu={source:{nodeId:"",handleId:"",isSource:!1},target:{nodeId:"",handleId:"",isSource:!1}};function Iu(e,t,n){var r=c((function(e){var t,n,r=e.data,o=[];try{for(var i=v(r.terms),s=i.next();!s.done;s=i.next()){var a=w(s.value,2),l=a[0],c=(a[1],Uc(l,r.id));o.push({nodeId:e.id,handleId:c,isSource:Ul(l)})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o}),[]),o=c((function(t){var n,r=document.querySelector('[data-handleid="'.concat(t,'"]'));if(r){var o={x:(n=r.getBoundingClientRect()).x+n.width/2,y:n.y+n.height/2};return e.screenToFlowPosition(o)}throw Error("Trying to access handle which doesn't exist:"+t)}),[]),i=c((function(e){return r(e).flatMap((function(e){var t=o(e.handleId);return null!==t?{handle:e,position:t}:[]}))}),[]),a=c((function(t){return e.getNodes().filter((function(e){return e.id!==t})).map(i).flat()}),[]),l=w(s(""),2),u=l[0],d=l[1],f=w(s(""),2),p=f[0],g=f[1];function m(e){return{source:e.source.nodeId,target:e.target.nodeId,sourceHandle:e.source.handleId,targetHandle:e.target.handleId}}var y=c((function(e){var n=a(e.nodeId).flatMap((function(t){var n,r,o=(n=e,r=t.handle,n.isSource&&!r.isSource?{source:n,target:r}:r.isSource&&!n.isSource?{source:r,target:n}:null);return o?[o]:[]})).filter((function(e){return t(m(e))})).map((function(e){var t=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(o(e.source.handleId),o(e.target.handleId));return{connection:e,distance:t}}));return n}),[]),b=c((function(e){var t=r(e).flatMap((function(e){return y(e)})).reduce((function(e,t){return t.distance<e.distance?t:e}),{connection:Pu,distance:1/0});return t.distance<Au?t.connection:null}),[]),x=c((function(e,t){var n=b(t);n?(d(n.source.handleId),g(n.target.handleId)):(d(""),g(""))}),[]),_=c((function(e){var t=document.querySelector('[data-handleid="'.concat(e,'"]'));t&&(t.children[0].classList.remove("fill-white"),t.children[0].classList.add("fill-green"))}),[]);return h((function(){document.querySelectorAll("[data-handleid]").forEach((function(e){e.children[0].classList.remove("fill-green"),e.children[0].classList.add("fill-white")})),_(u),_(p)}),[u,p]),[x,c((function(e,t){var r=b(t);r&&n(m(r)),d(""),g("")}),[])]}var Nu=["animate-stroke-animation"];function Ou(e){return"goal"in e}function Ru(e){return{statement:e.statement,position:e.position}}function Tu(e){return e instanceof Map?e:new Map(e.map((function(e){return[e.id,Ru(e)]})))}var Lu={gadgetNode:function(t){var n=t.data;return e("div",{children:e(uu,g({},n))})}},Du={edgeWithEquation:function(t){var n=m(t,[]),r={start:{x:n.sourceX-5,y:n.sourceY},end:{x:n.targetX+9,y:n.targetY},fromInput:!0,toOutput:!0};return e("g",g({className:"stroke-black"},{children:Xc(r,0,20)}))}},Bu=function(e){return Array.from(e.nodeLookup.values()).length||0};function zu(e,t){return"axiom"in t.statement?du(t.statement.axiom,e):{id:e,terms:new Map([[0,t.statement.goal]]),isAxiom:!1,displayHoleFocus:!0}}function $u(r){var o=Array.from(Tu(r.initData.initialDiagram.gadgets)).map((function(e){var t=w(e,2);return function(e,t){return{id:e,type:"gadgetNode",position:t.position,deletable:"goal_gadget"!==e,data:zu(e,t)}}(t[0],t[1])})),i=c((function(e,t){return{id:t,source:e.from,sourceHandle:Uc(ql,e.from),target:e.to[0],targetHandle:Uc(e.to[1],e.to[0]),type:"edgeWithEquation",animated:!0,data:{eq:dp(e.from,e.to)}}}),[]),a=c((function(e){return e.connections.map((function(e,t){return i(e,"edge_".concat(t))}))}),[])(r.initData.initialDiagram),l=Fs(),u=w(function(e){const[t,n]=s(e),r=c((e=>n((t=>As(e,t)))),[]);return[t,n,r]}(o),3),f=u[0],p=u[1],m=u[2],y=w(function(e){const[t,n]=s(e),r=c((e=>n((t=>Ps(e,t)))),[]);return[t,n,r]}(a),3),b=y[0],_=y[1],S=y[2],E=l.getNode,k=l.getNodes,C=l.getEdges,M=w(gu("gadget_"),1)[0],A=d(void 0),P=Yi(Bu);h((function(){if(void 0!==A.current){var e=document.querySelector("[data-id='".concat(A.current.id,"']"));null==e||e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:A.current.position.x,clientY:A.current.position.y}))}A.current=void 0}),[P]),Mu({setProblemSolved:r.setProblemSolved,nodes:f,edges:b});var I=c((function(e){var t,n;return{from:e.source,to:[e.target,(t=e.targetHandle,n=t.split("_")[1],JSON.parse(n))]}}),[]),N=c((function(e){e.map((function(e){var t=I(e);r.removeEquation(t.from,t.to)}))}),[b,r]),O=c((function(e){var t=E(e.source).data.terms,n=E(e.target).data.terms;return[Vc(e.sourceHandle,t),Vc(e.targetHandle,n)]}),[E]),R=c((function(e){var t=k(),n=C(),r=t.find((function(t){return t.id===e.target})),o=function(r,i){var s,a;if(void 0===i&&(i=new Set),i.has(r.id))return!1;i.add(r.id);try{for(var l=v(Or(r,t,n)),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.id===e.source)return!0;if(o(u,i))return!0}}catch(e){s={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}};return r.id!==e.source&&!o(r)}),[k,C]),T=c((function(e){var t=C().filter((function(t){return Cu(t,e)}));N(t),_((function(t){return t.filter((function(t){return!Cu(t,e)}))}))}),[C,_,r]),L=c((function(e){T(e.targetHandle);var t=O(e),n=I(e);r.addEquation(n.from,n.to,t),_((function(t){return Co(g(g({},e),{type:"edgeWithEquation",animated:!0,data:{eq:dp(n.from,n.to)}}),t)}))}),[r,_,O]);var D={axioms:r.initData.axioms,makeGadget:function(e,t){var n=M(),o={id:n,type:"gadgetNode",position:l.screenToFlowPosition(t),dragging:!0,deletable:!0,data:du(e,n)};r.addGadget(n,e),p((function(e){return e.concat(o)})),A.current={id:n,position:t}}},B=c((function(){p((function(e){return e.map((function(e){return g(g({},e),{data:g(g({},e.data),{displayHoleFocus:!1})})}))}))}),[]),z=c((function(e,t){"target"===t.handleType&&T(t.handleId),B()}),[T]),$=c((function(){p((function(e){return e.map((function(e){return g(g({},e),{data:g(g({},e.data),{displayHoleFocus:!0})})}))}))}),[]),j=c((function(e){L(e),$()}),[]),H=c((function(e){return C().some((function(t){return t.sourceHandle===e.sourceHandle&&t.targetHandle===e.targetHandle}))}),[b,O]),F=c((function(e){var t,n,r=w(O(e),2),o=r[0],i=r[1],s=(n=i,"args"in(t=o)&&"args"in n&&t.args.length===n.args.length),a=function(e,t){return"label"in e&&"label"in t&&e.label===t.label}(o,i),l=R(e),c=!H(e);return a&&s&&l&&c}),[O,C,k]),U=r.isSatisfied,V=c((function(){function e(e){var t,n=document.querySelector('[data-handleid="'.concat(e,'"]'));n&&(t=n.children[0].classList).add.apply(t,x([],w(Nu),!1))}document.querySelectorAll("[data-handleid]").forEach((function(e){var t;(t=e.children[0].classList).remove.apply(t,x([],w(Nu),!1))})),_((function(t){return t.map((function(t){var n=U.get(t.data.eq);if(void 0===n)throw new Error("There is an edge in the diagram without a corresponding equation");return!1===n&&(e(t.sourceHandle),e(t.targetHandle)),g(g({},t),{animated:!n})}))}))}),[U,_]);h((function(){V()}),[U,_,p]);var q=w(r.proximityConnectEnabled?Iu(l,F,L):[function(e,t){},function(e,t){}],2),Q=q[0],W=q[1],G=c((function(e,t){if(o={x:e.clientX,y:e.clientY},a=document.getElementById("gadget_palette"),l=null==a?void 0:a.getBoundingClientRect(),s=o,(i=l).left<=s.x&&s.x<=i.right&&i.top<=s.y&&s.y<=i.bottom){r.removeGadget(t.id);var n=C().filter((function(e){return t.id===e.source||t.id===e.target}));N(n),p((function(e){return e.filter((function(e){return e.id!==t.id||!1===e.deletable}))})),_((function(e){return e.filter((function(e){return t.id!==e.source&&t.id!==e.target}))}))}else W(e,t);var o,i,s,a,l;r.setUserIsDraggingOrNavigating(!1)}),[]),Y=c((function(e){N(e)}),[]),Z=c((function(e){e.map((function(e){return r.removeGadget(e.id)}))}),[]),X=r.zoomEnabled?{minZoom:.1}:{minZoom:1,maxZoom:1};return t(n,{children:[0!==r.initData.axioms.length&&e(yu,g({},D)),e(xl,g({nodes:f,edges:b,onNodesChange:m,onEdgesChange:S,onConnect:j,onEdgesDelete:Y,onNodesDelete:Z,edgeTypes:Du,nodeTypes:Lu,onInit:function(){return function(e,t){var n;if("ORIGIN_AT_RIGHT"===t){var r=null===(n=document.getElementById("root"))||void 0===n?void 0:n.getBoundingClientRect(),o=4*r.width/5,i=r.height/2,s=e.screenToFlowPosition({x:o,y:i}),a=e.getZoom();e.setViewport({x:s.x,y:s.y,zoom:a})}else e.fitView()}(l,r.initialViewportSetting)},onConnectStart:z,isValidConnection:F},X,{onNodeDrag:Q,onNodeDragStart:function(){return r.setUserIsDraggingOrNavigating(!0)},onNodeDragStop:G,nodeOrigin:[.5,.5],onMoveStart:function(){return r.setUserIsDraggingOrNavigating(!0)},onMoveEnd:function(){return r.setUserIsDraggingOrNavigating(!1)}})),e(ku,{rf:l,zoomEnabled:r.zoomEnabled})]})}function ju(e,t,n){if(e.isAssigned(t)){var r=e.getAssignedValue(t);return Hu(e,[r,n])}return tu(n,t)?"variable"in n:(e.assign(t,n),!0)}function Hu(e,t){var n=w(t,2),r=n[0],o=n[1];if("variable"in r)return"variable"in o?function(e,t,n){if(e.isAssigned(t)){var r=e.getAssignedValue(t);if(e.isAssigned(n)){var o=e.getAssignedValue(n);return Hu(e,[r,o])}return Hu(e,[r,{variable:n}])}if(e.isAssigned(n))return o=e.getAssignedValue(n),Hu(e,[{variable:t},o]);return e.unite(t,n),!0}(e,r.variable,o.variable):ju(e,r.variable,o);if("variable"in o)return ju(e,o.variable,r);if(r.label!==o.label)return!1;if(r.args.length!==o.args.length)return!1;for(var i=[],s=0;s<r.args.length;s++){var a=r.args[s],l=o.args[s];i.push(Hu(e,[a,l]))}return!i.includes(!1)}function Fu(e){var t=function(e){return"variable"in e||isNaN(Number(e.label))||e.args.length>0?void 0:Number(e.label)}(e);return void 0===t?"variable"in e?[]:e.args.flatMap(Fu):[t]}function Uu(e){return e.hypotheses.flatMap(Fu).concat(Fu(e.conclusion))}function Vu(e){return 1+Math.max.apply(Math,x([],w((t=e,n=Array.from(Tu(t.initialDiagram.gadgets).values()).map((function(e){return e.statement})).flatMap((function(e){return Ou(e)?Fu(e.goal):Uu(e.axiom)})),t.axioms.flatMap(Uu).concat(n))),!1));var t,n}function qu(e,t){if("variable"in e){var n=t.getAssignedValue(e.variable);return n?tu(n,e.variable)?e:qu(n,t):e}var r=e.args.map((function(e){return qu(e,t)}));return{label:e.label,args:r}}var Qu,Wu,Gu,Yu,Zu,Xu=function(){function e(e){this.offset=e,this.enumeration=new Map}return e.prototype.getIdentifier=function(e){var t=function(e){var t=new Jc;return ou(e).forEach((function(e){return t.assign(e,{variable:""})})),nu(e,t)}(e);return eu(t)},e.prototype.insert=function(e,t){var n=this.getIdentifier(e);this.enumeration.set(n,t)},e.prototype.isEnumerated=function(e){var t=this.getIdentifier(e);return this.enumeration.has(t)},e.prototype.getNumber=function(e){var t=this.getIdentifier(e);return this.enumeration.get(t)},e.prototype.getNextFreeHoleValue=function(){for(var e=new Set(this.enumeration.values()),t=this.offset;;t++)if(!e.has(t))return t},e.prototype.removeSuperfluousTerms=function(e){var t,n,r=e.map(this.getIdentifier);try{for(var o=v(this.enumeration.keys()),i=o.next();!i.done;i=o.next()){var s=i.value;r.includes(s)||this.enumeration.delete(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.enumerateTerms=function(e){var t,n;try{for(var r=v(e),o=r.next();!o.done;o=r.next()){var i=o.value,s=this.getNextFreeHoleValue();this.insert(i,s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.enumerateNewTerms=function(e){var t=this,n=e.filter((function(e){return!t.isEnumerated(e)}));this.enumerateTerms(n)},e.prototype.updateEnumeration=function(e){var t=e.getAssignedValues(),n=t.filter((function(e){return!function(e){return"label"in e&&0===e.args.length}(e)})),r=n.map((function(t){return qu(t,e)}));this.removeSuperfluousTerms(r),this.enumerateNewTerms(r)},e.prototype.toHoleValue=function(e,t){var n=qu(e,t);if("variable"in n)throw Error("Cannot get hole value for a variable"+n);if(0===n.args.length)return n.label;var r=this.getNumber(n);return r?r.toString():"?"},e.prototype.getHoleValueAssignment=function(e){var t=this;return function(n){if("variable"in n){var r=e.getAssignedValue(n.variable);return r?t.toHoleValue(r,e):""}return t.toHoleValue(n,e)}},e}(),Ku=function(){function e(e){this.completed=!1,this.startTime=new Date,this.log=[],this.problemId=e}return e.prototype.logEvent=function(e){this.log.push([e,new Date])},e}(),Ju=Object.create,ed=Object.defineProperty,td=Object.getOwnPropertyDescriptor,nd=Object.getOwnPropertyNames,rd=Object.getPrototypeOf,od=Object.prototype.hasOwnProperty,id=(e,t)=>ed(e,"name",{value:t,configurable:!0}),sd=(e,t)=>()=>(e&&(t=e(e=0)),t),ad=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ld=(e,t)=>{for(var n in t)ed(e,n,{get:t[n],enumerable:!0})},cd=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of nd(t))!od.call(e,o)&&o!==n&&ed(e,o,{get:()=>t[o],enumerable:!(r=td(t,o))||r.enumerable});return e},ud=(e,t,n)=>(n=null!=e?Ju(rd(e)):{},cd(!t&&e&&e.__esModule?n:ed(n,"default",{value:e,enumerable:!0}),e)),dd=e=>cd(ed({},"__esModule",{value:!0}),e),hd=(e,t,n)=>((e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),fd=ad((e=>{md(),e.byteLength=a,e.toByteArray=c,e.fromByteArray=h;var t,n=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,64;t<64;++t)n[t]=i[t],r[i.charCodeAt(t)]=t;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function l(e,t,n){return 3*(t+n)/4-n}function c(e){var t,n,i=s(e),a=i[0],c=i[1],u=new o(l(0,a,c)),d=0,h=c>0?a-4:a;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[d++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u}function u(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function d(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(u(r));return o.join("")}function h(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(d(e,a,a+s>l?l:a+s));return 1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")}r[45]=62,r[95]=63,id(s,"getLens"),id(a,"byteLength"),id(l,"_byteLength"),id(c,"toByteArray"),id(u,"tripletToBase64"),id(d,"encodeChunk"),id(h,"fromByteArray")})),pd=ad((e=>{md(),e.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?o-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+e[t+d],d+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),i-=c}return(f?-1:1)*s*Math.pow(2,i-r)},e.write=function(e,t,n,r,o,i){var s,a,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*g}})),gd=ad((e=>{md();var t=fd(),n=pd(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;var o=2147483647;function i(){try{let e=new Uint8Array(1),t={foo:id((function(){return 42}),"foo")};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return h(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return g(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);let o=m(e);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e,t,n){return c(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}function d(e){return c(e),s(e<0?0:0|y(e))}function h(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=0|v(e,t),r=s(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function f(e){let t=e.length<0?0:0|y(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e){if(oe(e,Uint8Array)){let t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return f(e)}function g(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function m(e){if(a.isBuffer(e)){let t=0|y(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||ie(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}function y(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),a.alloc(+e)}function v(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ne(e).length;default:if(o)return r?-1:J(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function x(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ie(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,o){let i,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(id(c,"read"),o){let r=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===l)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+l>a&&(n=a-l),i=n;i>=0;i--){let n=!0;for(let r=0;r<l;r++)if(c(e,i+r)!==c(t,r)){n=!1;break}if(n)return i}return-1}function E(e,t,n,r){n=Number(n)||0;let o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;let i,s=t.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){let r=parseInt(t.substr(2*i,2),16);if(ie(r))return i;e[n+i]=r}return i}function k(e,t,n,r){return re(J(t,e.length-n),e,n,r)}function C(e,t,n,r){return re(ee(t),e,n,r)}function M(e,t,n,r){return re(ne(t),e,n,r)}function A(e,t,n,r){return re(te(t,e.length-n),e,n,r)}function P(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function I(e,t,n){n=Math.min(e.length,n);let r=[],o=t;for(;o<n;){let t=e[o],i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,a,l;switch(s){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(i=l));break;case 3:n=e[o+1],r=e[o+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return O(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),id(i,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:id((function(){if(a.isBuffer(this))return this.buffer}),"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:id((function(){if(a.isBuffer(this))return this.byteOffset}),"get")}),id(s,"createBuffer"),id(a,"Buffer"),a.poolSize=8192,id(l,"from"),a.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),id(c,"assertSize"),id(u,"alloc"),a.alloc=function(e,t,n){return u(e,t,n)},id(d,"allocUnsafe"),a.allocUnsafe=function(e){return d(e)},a.allocUnsafeSlow=function(e){return d(e)},id(h,"fromString"),id(f,"fromArrayLike"),id(p,"fromArrayView"),id(g,"fromArrayBuffer"),id(m,"fromObject"),id(y,"checked"),id(b,"SlowBuffer"),a.isBuffer=id((function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype}),"isBuffer"),a.compare=id((function(e,t){if(oe(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}),"compare"),a.isEncoding=id((function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}}),"isEncoding"),a.concat=id((function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let t=e[n];if(oe(t,Uint8Array))o+t.length>r.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!a.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r}),"concat"),id(v,"byteLength"),a.byteLength=v,id(w,"slowToString"),a.prototype._isBuffer=!0,id(x,"swap"),a.prototype.swap16=id((function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)x(this,t,t+1);return this}),"swap16"),a.prototype.swap32=id((function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this}),"swap32"),a.prototype.swap64=id((function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this}),"swap64"),a.prototype.toString=id((function(){let e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):w.apply(this,arguments)}),"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=id((function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)}),"equals"),a.prototype.inspect=id((function(){let t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"}),"inspect"),r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=id((function(e,t,n,r,o){if(oe(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n);for(let e=0;e<l;++e)if(c[e]!==u[e]){i=c[e],s=u[e];break}return i<s?-1:s<i?1:0}),"compare"),id(_,"bidirectionalIndexOf"),id(S,"arrayIndexOf"),a.prototype.includes=id((function(e,t,n){return-1!==this.indexOf(e,t,n)}),"includes"),a.prototype.indexOf=id((function(e,t,n){return _(this,e,t,n,!0)}),"indexOf"),a.prototype.lastIndexOf=id((function(e,t,n){return _(this,e,t,n,!1)}),"lastIndexOf"),id(E,"hexWrite"),id(k,"utf8Write"),id(C,"asciiWrite"),id(M,"base64Write"),id(A,"ucs2Write"),a.prototype.write=id((function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}let o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}}),"write"),a.prototype.toJSON=id((function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}}),"toJSON"),id(P,"base64Slice"),id(I,"utf8Slice");var N=4096;function O(e){let t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=N));return n}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function L(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=t;r<n;++r)o+=se[e[r]];return o}function D(e,t,n){let r=e.slice(t,n),o="";for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $(e,t,n,r,o){G(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function j(e,t,n,r,o){G(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function H(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,r,o,i){return t=+t,r>>>=0,i||H(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function U(e,t,r,o,i){return t=+t,r>>>=0,i||H(e,0,r,8),n.write(e,t,r,o,52,8),r+8}id(O,"decodeCodePointsArray"),id(R,"asciiSlice"),id(T,"latin1Slice"),id(L,"hexSlice"),id(D,"utf16leSlice"),a.prototype.slice=id((function(e,t){let n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r}),"slice"),id(B,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=id((function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r}),"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=id((function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r}),"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=id((function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]}),"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=id((function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8}),"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=id((function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]}),"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]}),"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])}),"readUInt32BE"),a.prototype.readBigUInt64LE=ae(id((function(e){Y(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&Z(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))}),"readBigUInt64LE")),a.prototype.readBigUInt64BE=ae(id((function(e){Y(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&Z(e,this.length-8);let r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)}),"readBigUInt64BE")),a.prototype.readIntLE=id((function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r}),"readIntLE"),a.prototype.readIntBE=id((function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i}),"readIntBE"),a.prototype.readInt8=id((function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]}),"readInt8"),a.prototype.readInt16LE=id((function(e,t){e>>>=0,t||B(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n}),"readInt16LE"),a.prototype.readInt16BE=id((function(e,t){e>>>=0,t||B(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n}),"readInt16BE"),a.prototype.readInt32LE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24}),"readInt32LE"),a.prototype.readInt32BE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]}),"readInt32BE"),a.prototype.readBigInt64LE=ae(id((function(e){Y(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&Z(e,this.length-8);let r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),"readBigInt64LE")),a.prototype.readBigInt64BE=ae(id((function(e){Y(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&Z(e,this.length-8);let r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),"readBigInt64BE")),a.prototype.readFloatLE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),n.read(this,e,!0,23,4)}),"readFloatLE"),a.prototype.readFloatBE=id((function(e,t){return e>>>=0,t||B(e,4,this.length),n.read(this,e,!1,23,4)}),"readFloatBE"),a.prototype.readDoubleLE=id((function(e,t){return e>>>=0,t||B(e,8,this.length),n.read(this,e,!0,52,8)}),"readDoubleLE"),a.prototype.readDoubleBE=id((function(e,t){return e>>>=0,t||B(e,8,this.length),n.read(this,e,!1,52,8)}),"readDoubleBE"),id(z,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=id((function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){z(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n}),"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=id((function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){z(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n}),"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,255,0),this[t]=255&e,t+1}),"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2}),"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2}),"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4}),"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4}),"writeUInt32BE"),id($,"wrtBigUInt64LE"),id(j,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=ae(id((function(e,t=0){return $(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=ae(id((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),"writeBigUInt64BE")),a.prototype.writeIntLE=id((function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);z(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+n}),"writeIntLE"),a.prototype.writeIntBE=id((function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);z(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+n}),"writeIntBE"),a.prototype.writeInt8=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1}),"writeInt8"),a.prototype.writeInt16LE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2}),"writeInt16LE"),a.prototype.writeInt16BE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2}),"writeInt16BE"),a.prototype.writeInt32LE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4}),"writeInt32LE"),a.prototype.writeInt32BE=id((function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4}),"writeInt32BE"),a.prototype.writeBigInt64LE=ae(id((function(e,t=0){return $(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),"writeBigInt64LE")),a.prototype.writeBigInt64BE=ae(id((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),"writeBigInt64BE")),id(H,"checkIEEE754"),id(F,"writeFloat"),a.prototype.writeFloatLE=id((function(e,t,n){return F(this,e,t,!0,n)}),"writeFloatLE"),a.prototype.writeFloatBE=id((function(e,t,n){return F(this,e,t,!1,n)}),"writeFloatBE"),id(U,"writeDouble"),a.prototype.writeDoubleLE=id((function(e,t,n){return U(this,e,t,!0,n)}),"writeDoubleLE"),a.prototype.writeDoubleBE=id((function(e,t,n){return U(this,e,t,!1,n)}),"writeDoubleBE"),a.prototype.copy=id((function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o}),"copy"),a.prototype.fill=id((function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{let i=a.isBuffer(e)?e:a.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this}),"fill");var V={};function q(e,t,n){var r;V[e]=(r=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}},id(r,"NodeError"),r)}function Q(e){let t="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function W(e,t,n){Y(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&Z(t,e.length-(n+1))}function G(e,t,n,r,o,i){if(e>n||e<t){let r,o="bigint"==typeof t?"n":"";throw r=i>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(i+1)}${o}`:`>= -(2${o} ** ${8*(i+1)-1}${o}) and < 2 ** ${8*(i+1)-1}${o}`:`>= ${t}${o} and <= ${n}${o}`,new V.ERR_OUT_OF_RANGE("value",r,e)}W(r,o,i)}function Y(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,n){throw Math.floor(e)!==e?(Y(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}id(q,"E"),q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=Q(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=Q(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError),id(Q,"addNumericalSeparator"),id(W,"checkBounds"),id(G,"checkIntBI"),id(Y,"validateNumber"),id(Z,"boundsError");var X=/[^+/0-9A-Za-z-_]/g;function K(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function J(e,t){t=t||1/0;let n,r=e.length,o=null,i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function ee(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function te(e,t){let n,r,o,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function ne(e){return t.toByteArray(K(e))}function re(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ie(e){return e!=e}id(K,"base64clean"),id(J,"utf8ToBytes"),id(ee,"asciiToBytes"),id(te,"utf16leToBytes"),id(ne,"base64ToBytes"),id(re,"blitBuffer"),id(oe,"isInstance"),id(ie,"numberIsNaN");var se=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function ae(e){return typeof BigInt>"u"?le:e}function le(){throw new Error("BigInt not supported")}id(ae,"defineBigIntMethod"),id(le,"BufferBigIntNotDefined")})),md=sd((()=>{Qu=globalThis,Wu=globalThis.setImmediate??(e=>setTimeout(e,0)),(Gu=globalThis.crypto??{}).subtle??(Gu.subtle={}),Yu="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:gd().Buffer,(Zu=globalThis.process??{}).env??(Zu.env={});try{Zu.nextTick((()=>{}))}catch{let e=Promise.resolve();Zu.nextTick=e.then.bind(e)}})),yd=ad(((e,t)=>{md();var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:id((function(e,t,n){return Function.prototype.apply.call(e,t,n)}),"ReflectApply");function i(e){console&&console.warn&&console.warn(e)}n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?id((function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}),"ReflectOwnKeys"):id((function(e){return Object.getOwnPropertyNames(e)}),"ReflectOwnKeys"),id(i,"ProcessEmitWarning");var s=Number.isNaN||id((function(e){return e!=e}),"NumberIsNaN");function a(){a.init.call(this)}id(a,"EventEmitter"),t.exports=a,t.exports.once=v,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var o,s,a;if(c(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"==typeof a?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,i(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?b(o):m(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function v(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}id(o,"errorListener"),id(i,"resolver"),x(e,t,i,{once:!0}),"error"!==t&&w(e,o,{once:!0})}))}function w(e,t,n){"function"==typeof e.on&&x(e,"error",t,n)}function x(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,id((function o(i){r.once&&e.removeEventListener(t,o),n(i)}),"wrapListener"))}}id(c,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:id((function(){return l}),"get"),set:id((function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}),"set")}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=id((function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this}),"setMaxListeners"),id(u,"_getMaxListeners"),a.prototype.getMaxListeners=id((function(){return u(this)}),"getMaxListeners"),a.prototype.emit=id((function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)o(u[n],this,t)}return!0}),"emit"),id(d,"_addListener"),a.prototype.addListener=id((function(e,t){return d(this,e,t,!1)}),"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=id((function(e,t){return d(this,e,t,!0)}),"prependListener"),id(h,"onceWrapper"),id(f,"_onceWrap"),a.prototype.once=id((function(e,t){return c(t),this.on(e,f(this,e,t)),this}),"once"),a.prototype.prependOnceListener=id((function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this}),"prependOnceListener"),a.prototype.removeListener=id((function(e,t){var n,r,o,i,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():y(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this}),"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=id((function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this}),"removeAllListeners"),id(p,"_listeners"),a.prototype.listeners=id((function(e){return p(this,e,!0)}),"listeners"),a.prototype.rawListeners=id((function(e){return p(this,e,!1)}),"rawListeners"),a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,id(g,"listenerCount"),a.prototype.eventNames=id((function(){return this._eventsCount>0?n(this._events):[]}),"eventNames"),id(m,"arrayClone"),id(y,"spliceOne"),id(b,"unwrapListeners"),id(v,"once"),id(w,"addErrorHandlerIfEventEmitter"),id(x,"eventTargetAgnosticAddListener")})),bd={};ld(bd,{default:()=>vd});var vd,wd=sd((()=>{md(),vd={}}));function xd(e){let t=1779033703,n=3144134277,r=1013904242,o=2773480762,i=1359893119,s=2600822924,a=528734635,l=1541459225,c=0,u=0,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=id(((e,t)=>e>>>t|e<<32-t),"rrot"),f=new Uint32Array(64),p=new Uint8Array(64),g=id((()=>{for(let e=0,t=0;e<16;e++,t+=4)f[e]=p[t]<<24|p[t+1]<<16|p[t+2]<<8|p[t+3];for(let e=16;e<64;e++){let t=h(f[e-15],7)^h(f[e-15],18)^f[e-15]>>>3,n=h(f[e-2],17)^h(f[e-2],19)^f[e-2]>>>10;f[e]=f[e-16]+t+f[e-7]+n|0}let e=t,c=n,g=r,m=o,y=i,b=s,v=a,w=l;for(let t=0;t<64;t++){let n=w+(h(y,6)^h(y,11)^h(y,25))+(y&b^~y&v)+d[t]+f[t]|0,r=e&c^e&g^c&g;w=v,v=b,b=y,y=m+n|0,m=g,g=c,c=e,e=n+((h(e,2)^h(e,13)^h(e,22))+r|0)|0}t=t+e|0,n=n+c|0,r=r+g|0,o=o+m|0,i=i+y|0,s=s+b|0,a=a+v|0,l=l+w|0,u=0}),"process"),m=id((e=>{"string"==typeof e&&(e=(new TextEncoder).encode(e));for(let t=0;t<e.length;t++)p[u++]=e[t],64===u&&g();c+=e.length}),"add"),y=id((()=>{if(p[u++]=128,64==u&&g(),u+8>64){for(;u<64;)p[u++]=0;g()}for(;u<58;)p[u++]=0;let e=8*c;p[u++]=e/1099511627776&255,p[u++]=e/4294967296&255,p[u++]=e>>>24,p[u++]=e>>>16&255,p[u++]=e>>>8&255,p[u++]=255&e,g();let d=new Uint8Array(32);return d[0]=t>>>24,d[1]=t>>>16&255,d[2]=t>>>8&255,d[3]=255&t,d[4]=n>>>24,d[5]=n>>>16&255,d[6]=n>>>8&255,d[7]=255&n,d[8]=r>>>24,d[9]=r>>>16&255,d[10]=r>>>8&255,d[11]=255&r,d[12]=o>>>24,d[13]=o>>>16&255,d[14]=o>>>8&255,d[15]=255&o,d[16]=i>>>24,d[17]=i>>>16&255,d[18]=i>>>8&255,d[19]=255&i,d[20]=s>>>24,d[21]=s>>>16&255,d[22]=s>>>8&255,d[23]=255&s,d[24]=a>>>24,d[25]=a>>>16&255,d[26]=a>>>8&255,d[27]=255&a,d[28]=l>>>24,d[29]=l>>>16&255,d[30]=l>>>8&255,d[31]=255&l,d}),"digest");return void 0===e?{add:m,digest:y}:(m(e),y())}var _d,Sd,Ed=sd((()=>{md(),id(xd,"sha256")})),kd=sd((()=>{md(),_d=class e{constructor(){hd(this,"_dataLength",0),hd(this,"_bufferLength",0),hd(this,"_state",new Int32Array(4)),hd(this,"_buffer",new ArrayBuffer(68)),hd(this,"_buffer8"),hd(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(t){let n,r,o,i,s=e.hexChars,a=e.hexOut;for(i=0;i<4;i+=1)for(r=8*i,n=t[i],o=0;o<8;o+=2)a[r+1+o]=s.charAt(15&n),n>>>=4,a[r+0+o]=s.charAt(15&n),n>>>=4;return a.join("")}static _md5cycle(e,t){let n=e[0],r=e[1],o=e[2],i=e[3];n+=(r&o|~r&i)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this}appendStr(t){let n,r,o=this._buffer8,i=this._buffer32,s=this._bufferLength;for(r=0;r<t.length;r+=1){if(n=t.charCodeAt(r),n<128)o[s++]=n;else if(n<2048)o[s++]=192+(n>>>6),o[s++]=63&n|128;else if(n<55296||n>56319)o[s++]=224+(n>>>12),o[s++]=n>>>6&63|128,o[s++]=63&n|128;else{if(n=1024*(n-55296)+(t.charCodeAt(++r)-56320)+65536,n>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[s++]=240+(n>>>18),o[s++]=n>>>12&63|128,o[s++]=n>>>6&63|128,o[s++]=63&n|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this}appendAsciiStr(t){let n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;for(;;){for(n=Math.min(t.length-s,64-i);n--;)r[i++]=t.charCodeAt(s++);if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this}appendByteArray(t){let n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;for(;;){for(n=Math.min(t.length-s,64-i);n--;)r[i++]=t[s++];if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t,n=e.buffer,r=e.state,o=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)}end(t=!1){let n=this._bufferLength,r=this._buffer8,o=this._buffer32,i=1+(n>>2);this._dataLength+=n;let s=8*this._dataLength;if(r[n]=128,r[n+1]=r[n+2]=r[n+3]=0,o.set(e.buffer32Identity.subarray(i),i),n>55&&(e._md5cycle(this._state,o),o.set(e.buffer32Identity)),s<=4294967295)o[14]=s;else{let e=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let t=parseInt(e[2],16),n=parseInt(e[1],16)||0;o[14]=t,o[15]=n}return e._md5cycle(this._state,o),t?this._state:e._hex(this._state)}},id(_d,"Md5"),hd(_d,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),hd(_d,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),hd(_d,"hexChars","0123456789abcdef"),hd(_d,"hexOut",[]),hd(_d,"onePassHasher",new _d),Sd=_d})),Cd={};function Md(e){return Gu.getRandomValues(Yu.alloc(e))}function Ad(e){if("sha256"===e)return{update:id((function(e){return{digest:id((function(){return Yu.from(xd(e))}),"digest")}}),"update")};if("md5"===e)return{update:id((function(e){return{digest:id((function(){return"string"==typeof e?Sd.hashStr(e):Sd.hashByteArray(e)}),"digest")}}),"update")};throw new Error(`Hash type '${e}' not supported`)}function Pd(e,t){if("sha256"!==e)throw new Error(`Only sha256 is supported (requested: '${e}')`);return{update:id((function(e){return{digest:id((function(){"string"==typeof t&&(t=(new TextEncoder).encode(t)),"string"==typeof e&&(e=(new TextEncoder).encode(e));let n=t.length;if(n>64)t=xd(t);else if(n<64){let e=new Uint8Array(64);e.set(t),t=e}let r=new Uint8Array(64),o=new Uint8Array(64);for(let e=0;e<64;e++)r[e]=54^t[e],o[e]=92^t[e];let i=new Uint8Array(e.length+64);i.set(r,0),i.set(e,64);let s=new Uint8Array(96);return s.set(o,0),s.set(xd(i),64),Yu.from(xd(s))}),"digest")}}),"update")}}ld(Cd,{createHash:()=>Ad,createHmac:()=>Pd,randomBytes:()=>Md});var Id=sd((()=>{md(),Ed(),kd(),id(Md,"randomBytes"),id(Ad,"createHash"),id(Pd,"createHmac")})),Nd=ad((e=>{md(),e.parse=function(e,t){return new n(e,t).parse()};var t=class e{constructor(e,t){this.source=e,this.transform=t||r,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"===(t=this.recorded.join(""))&&!e&&(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(t){var n,r,o;for(this.consumeDimensions();!this.isEof();)if("{"!==(n=this.nextCharacter()).value||o){if("}"!==n.value||o)'"'!==n.value||n.escaped?","!==n.value||o?this.record(n.value):this.newEntry():(o&&this.newEntry(!0),o=!o);else if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else this.dimension++,this.dimension>1&&(r=new e(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}};id(t,"ArrayParser");var n=t;function r(e){return e}id(r,"identity")})),Od=ad(((e,t)=>{md();var n=Nd();t.exports={create:id((function(e,t){return{parse:id((function(){return n.parse(e,t)}),"parse")}}),"create")}})),Rd=ad(((e,t)=>{md();var n=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,r=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,o=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;function s(e){var t=r.exec(e);if(t){var n=parseInt(t[1],10);!!t[4]&&(n=l(n));var o=parseInt(t[2],10)-1,i=t[3],s=new Date(n,o,i);return c(n)&&s.setFullYear(n),s}}function a(e){if(e.endsWith("+00"))return 0;var t=o.exec(e.split(" ")[1]);if(t){var n=t[1];if("Z"===n)return 0;var r="-"===n?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*r*1e3}}function l(e){return-(e-1)}function c(e){return e>=0&&e<100}t.exports=id((function(e){if(i.test(e))return Number(e.replace("i","I"));var t=n.exec(e);if(!t)return s(e)||null;var r=!!t[8],o=parseInt(t[1],10);r&&(o=l(o));var u=parseInt(t[2],10)-1,d=t[3],h=parseInt(t[4],10),f=parseInt(t[5],10),p=parseInt(t[6],10),g=t[7];g=g?1e3*parseFloat(g):0;var m,y=a(e);return null!=y?(m=new Date(Date.UTC(o,u,d,h,f,p,g)),c(o)&&m.setUTCFullYear(o),0!==y&&m.setTime(m.getTime()-y)):(m=new Date(o,u,d,h,f,p,g),c(o)&&m.setFullYear(o)),m}),"parseDate"),id(s,"getDate"),id(a,"timeZoneOffset"),id(l,"bcYearToNegativeYear"),id(c,"is0To99")})),Td=ad(((e,t)=>{md(),t.exports=r;var n=Object.prototype.hasOwnProperty;function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e}id(r,"extend")})),Ld=ad(((e,t)=>{md();var n=Td();function r(e){if(!(this instanceof r))return new r(e);n(this,f(e))}t.exports=r,id(r,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];r.prototype.toPostgres=function(){var e=o.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},s=["years","months","days"],a=["hours","minutes","seconds"];r.prototype.toISOString=r.prototype.toISO=function(){return"P"+s.map(e,this).join("")+"T"+a.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+i[e]}};var l="([+-]?\\d+)",c=new RegExp([l+"\\s+years?",l+"\\s+mons?",l+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),u={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},d=["hours","minutes","seconds","milliseconds"];function h(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function f(e){if(!e)return{};var t=c.exec(e),n="-"===t[8];return Object.keys(u).reduce((function(e,r){var o=u[r],i=t[o];return!i||!(i="milliseconds"===r?h(i):parseInt(i,10))||(n&&~d.indexOf(r)&&(i*=-1),e[r]=i),e}),{})}id(h,"parseMilliseconds"),id(f,"parse")})),Dd=ad(((e,t)=>{md(),t.exports=id((function(e){if(/^\\x/.test(e))return new Yu(e.substr(2),"hex");for(var t="",n=0;n<e.length;)if("\\"!==e[n])t+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))t+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var r=1;n+r<e.length&&"\\"===e[n+r];)r++;for(var o=0;o<Math.floor(r/2);++o)t+="\\";n+=2*Math.floor(r/2)}return new Yu(t,"binary")}),"parseBytea")})),Bd=ad(((e,t)=>{md();var n=Nd(),r=Od(),o=Rd(),i=Ld(),s=Dd();function a(e){return id((function(t){return null===t?t:e(t)}),"nullAllowed")}function l(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function c(e){return e?n.parse(e,l):null}function u(e){return parseInt(e,10)}function d(e){return e?n.parse(e,a(u)):null}function h(e){return e?n.parse(e,a((function(e){return w(e).trim()}))):null}id(a,"allowNull"),id(l,"parseBool"),id(c,"parseBoolArray"),id(u,"parseBaseTenInt"),id(d,"parseIntegerArray"),id(h,"parseBigIntegerArray");var f=id((function(e){if(!e)return null;var t=r.create(e,(function(e){return null!==e&&(e=_(e)),e}));return t.parse()}),"parsePointArray"),p=id((function(e){if(!e)return null;var t=r.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e}));return t.parse()}),"parseFloatArray"),g=id((function(e){return e?r.create(e).parse():null}),"parseStringArray"),m=id((function(e){if(!e)return null;var t=r.create(e,(function(e){return null!==e&&(e=o(e)),e}));return t.parse()}),"parseDateArray"),y=id((function(e){if(!e)return null;var t=r.create(e,(function(e){return null!==e&&(e=i(e)),e}));return t.parse()}),"parseIntervalArray"),b=id((function(e){return e?n.parse(e,a(s)):null}),"parseByteAArray"),v=id((function(e){return parseInt(e,10)}),"parseInteger"),w=id((function(e){var t=String(e);return/^\d+$/.test(t)?t:e}),"parseBigInteger"),x=id((function(e){return e?n.parse(e,a(JSON.parse)):null}),"parseJsonArray"),_=id((function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})}),"parsePoint"),S=id((function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",n="",r=!1,o=2;o<e.length-1;o++)r||(t+=e[o]),")"!==e[o]?r&&","!==e[o]&&(n+=e[o]):r=!0;var i=_(t);return i.radius=parseFloat(n),i}),"parseCircle"),E=id((function(e){e(20,w),e(21,v),e(23,v),e(26,v),e(700,parseFloat),e(701,parseFloat),e(16,l),e(1082,o),e(1114,o),e(1184,o),e(600,_),e(651,g),e(718,S),e(1e3,c),e(1001,b),e(1005,d),e(1007,d),e(1028,d),e(1016,h),e(1017,f),e(1021,p),e(1022,p),e(1231,p),e(1014,g),e(1015,g),e(1008,g),e(1009,g),e(1040,g),e(1041,g),e(1115,m),e(1182,m),e(1185,m),e(1186,i),e(1187,y),e(17,s),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,x),e(3807,x),e(3907,g),e(2951,g),e(791,g),e(1183,g),e(1270,g)}),"init");t.exports={init:E}})),zd=ad(((e,t)=>{md();var n=1e6;function r(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),o="";t<0&&(t=~t+(0===r),r=1+~r>>>0,o="-");var i,s,a,l,c,u,d="";if(i=t%n,t=t/n>>>0,a=""+((s=4294967296*i+r)-n*(r=s/n>>>0)),0===r&&0===t)return o+a+d;for(l="",c=6-a.length,u=0;u<c;u++)l+="0";if(d=l+a+d,i=t%n,t=t/n>>>0,a=""+((s=4294967296*i+r)-n*(r=s/n>>>0)),0===r&&0===t)return o+a+d;for(l="",c=6-a.length,u=0;u<c;u++)l+="0";if(d=l+a+d,i=t%n,t=t/n>>>0,a=""+((s=4294967296*i+r)-n*(r=s/n>>>0)),0===r&&0===t)return o+a+d;for(l="",c=6-a.length,u=0;u<c;u++)l+="0";return d=l+a+d,o+(a=""+(s=4294967296*(i=t%n)+r)%n)+d}id(r,"readInt8"),t.exports=r})),$d=ad(((e,t)=>{md();var n=zd(),r=id((function(e,t,n,r,o){r=r||!1,o=o||function(e,t,n){return e*Math.pow(2,n)+t};var i=(n=n||0)>>3,s=id((function(e){return r?255&~e:e}),"inv"),a=255,l=8-n%8;t<l&&(a=255<<8-t&255,l=t),n&&(a>>=n%8);var c=0;n%8+t>=8&&(c=o(0,s(e[i])&a,l));for(var u=t+n>>3,d=i+1;d<u;d++)c=o(c,s(e[d]),8);var h=(t+n)%8;return h>0&&(c=o(c,s(e[u])>>8-h,h)),c}),"parseBits"),o=id((function(e,t,n){var o=Math.pow(2,n-1)-1,i=r(e,1),s=r(e,n,1);if(0===s)return 0;var a=1,l=id((function(e,t,n){0===e&&(e=1);for(var r=1;r<=n;r++)a/=2,(t&1<<n-r)>0&&(e+=a);return e}),"parsePrecisionBits"),c=r(e,t,n+1,!1,l);return s==Math.pow(2,n+1)-1?0===c?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,s-o)*c}),"parseFloatFromBits"),i=id((function(e){return 1==r(e,1)?-1*(r(e,15,1,!0)+1):r(e,15,1)}),"parseInt16"),s=id((function(e){return 1==r(e,1)?-1*(r(e,31,1,!0)+1):r(e,31,1)}),"parseInt32"),a=id((function(e){return o(e,23,8)}),"parseFloat32"),l=id((function(e){return o(e,52,11)}),"parseFloat64"),c=id((function(e){var t=r(e,16,32);if(49152==t)return NaN;for(var n=Math.pow(1e4,r(e,16,16)),o=0,i=r(e,16),s=0;s<i;s++)o+=r(e,16,64+16*s)*n,n/=1e4;var a=Math.pow(10,r(e,16,48));return(0===t?1:-1)*Math.round(o*a)/a}),"parseNumeric"),u=id((function(e,t){var n=r(t,1),o=r(t,63,1),i=new Date((0===n?1:-1)*o/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=o%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i}),"parseDate"),d=id((function(e){for(var t=r(e,32),n=(r(e,32,32),r(e,32,64)),o=96,i=[],s=0;s<t;s++)i[s]=r(e,32,o),o+=32,o+=32;var a=id((function(t){var n,i=r(e,32,o);return o+=32,4294967295==i?null:23==t||20==t?(n=r(e,8*i,o),o+=8*i,n):25==t?n=e.toString(this.encoding,o>>3,(o+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)}),"parseElement"),l=id((function(e,t){var n,r=[];if(e.length>1){var o=e.shift();for(n=0;n<o;n++)r[n]=l(e,t);e.unshift(o)}else for(n=0;n<e[0];n++)r[n]=a(t);return r}),"parse");return l(i,n)}),"parseArray"),h=id((function(e){return e.toString("utf8")}),"parseText"),f=id((function(e){return null===e?null:r(e,8)>0}),"parseBool"),p=id((function(e){e(20,n),e(21,i),e(23,s),e(26,s),e(1700,c),e(700,a),e(701,l),e(16,f),e(1114,u.bind(null,!1)),e(1184,u.bind(null,!0)),e(1e3,d),e(1007,d),e(1016,d),e(1008,d),e(1009,d),e(25,h)}),"init");t.exports={init:p}})),jd=ad(((e,t)=>{md(),t.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}})),Hd=ad((e=>{md();var t=Bd(),n=$d(),r=Od(),o=jd();e.getTypeParser=a,e.setTypeParser=l,e.arrayParser=r,e.builtins=o;var i={text:{},binary:{}};function s(e){return String(e)}function a(e,t){return i[t=t||"text"]&&i[t][e]||s}function l(e,t,n){"function"==typeof t&&(n=t,t="text"),i[t][e]=n}id(s,"noParse"),id(a,"getTypeParser"),id(l,"setTypeParser"),t.init((function(e,t){i.text[e]=t})),n.init((function(e,t){i.binary[e]=t}))})),Fd=ad(((e,t)=>{md(),t.exports={host:"localhost",user:"win32"===Zu.platform?Zu.env.USERNAME:Zu.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var n=Hd(),r=n.getTypeParser(20,"text"),o=n.getTypeParser(1016,"text");t.exports.__defineSetter__("parseInt8",(function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):r),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):o)}))})),Ud=ad(((e,t)=>{md();var n=(Id(),dd(Cd)),r=Fd();function o(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function i(e){for(var t="{",n=0;n<e.length;n++)n>0&&(t+=","),null===e[n]||typeof e[n]>"u"?t+="NULL":Array.isArray(e[n])?t+=i(e[n]):e[n]instanceof Yu?t+="\\\\x"+e[n].toString("hex"):t+=o(s(e[n]));return t+="}"}id(o,"escapeElement"),id(i,"arrayString");var s=id((function(e,t){if(null==e)return null;if(e instanceof Yu)return e;if(ArrayBuffer.isView(e)){var n=Yu.from(e.buffer,e.byteOffset,e.byteLength);return n.length===e.byteLength?n:n.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?r.parseInputDatesAsUTC?u(e):c(e):Array.isArray(e)?i(e):"object"==typeof e?a(e,t):e.toString()}),"prepareValue");function a(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),s(e.toPostgres(s),t)}return JSON.stringify(e)}function l(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function c(e){var t=-e.getTimezoneOffset(),n=e.getFullYear(),r=n<1;r&&(n=Math.abs(n)+1);var o=l(n,4)+"-"+l(e.getMonth()+1,2)+"-"+l(e.getDate(),2)+"T"+l(e.getHours(),2)+":"+l(e.getMinutes(),2)+":"+l(e.getSeconds(),2)+"."+l(e.getMilliseconds(),3);return t<0?(o+="-",t*=-1):o+="+",o+=l(Math.floor(t/60),2)+":"+l(t%60,2),r&&(o+=" BC"),o}function u(e){var t=e.getUTCFullYear(),n=t<1;n&&(t=Math.abs(t)+1);var r=l(t,4)+"-"+l(e.getUTCMonth()+1,2)+"-"+l(e.getUTCDate(),2)+"T"+l(e.getUTCHours(),2)+":"+l(e.getUTCMinutes(),2)+":"+l(e.getUTCSeconds(),2)+"."+l(e.getUTCMilliseconds(),3);return r+="+00:00",n&&(r+=" BC"),r}function d(e,t,n){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),n&&(e.callback=n),e}id(a,"prepareObject"),id(l,"pad"),id(c,"dateToString"),id(u,"dateToStringUTC"),id(d,"normalizeQueryConfig");var h=id((function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")}),"md5"),f=id((function(e,t,n){var r=h(t+e);return"md5"+h(Yu.concat([Yu.from(r),n]))}),"postgresMd5PasswordHash");t.exports={prepareValue:id((function(e){return s(e)}),"prepareValueWrapper"),normalizeQueryConfig:d,postgresMd5PasswordHash:f,md5:h}})),Vd=ad(((e,t)=>{md();var n=(Id(),dd(Cd));function r(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let t=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}}function o(e,t,n){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let r=c(n);if(!r.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(r.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");var o=p(t,Yu.from(r.salt,"base64"),r.iteration),i=f(o,"Client Key"),s=h(i),a="n=*,r="+e.clientNonce,l="r="+r.nonce+",s="+r.salt+",i="+r.iteration,u="c=biws,r="+r.nonce,g=a+","+l+","+u,m=d(i,f(s,g)).toString("base64"),y=f(o,"Server Key"),b=f(y,g);e.message="SASLResponse",e.serverSignature=b.toString("base64"),e.response=u+",p="+m}function i(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");if("string"!=typeof t)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=u(t);if(n!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function s(e){if("string"!=typeof e)throw new TypeError("SASL: text must be a string");return e.split("").map(((t,n)=>e.charCodeAt(n))).every((e=>e>=33&&e<=43||e>=45&&e<=126))}function a(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function l(e){if("string"!=typeof e)throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map((e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]})))}function c(e){let t=l(e),n=t.get("r");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!s(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");let r=t.get("s");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!a(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");let o=t.get("i");if(!o)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");if(!/^[1-9][0-9]*$/.test(o))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");return{nonce:n,salt:r,iteration:parseInt(o,10)}}function u(e){let t=l(e).get("v");if(!t)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");if(!a(t))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:t}}function d(e,t){if(!Yu.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Yu.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(0===e.length)throw new Error("Buffers cannot be empty");return Yu.from(e.map(((n,r)=>e[r]^t[r])))}function h(e){return n.createHash("sha256").update(e).digest()}function f(e,t){return n.createHmac("sha256",e).update(t).digest()}function p(e,t,n){for(var r=f(e,Yu.concat([t,Yu.from([0,0,0,1])])),o=r,i=0;i<n-1;i++)o=d(o,r=f(e,r));return o}id(r,"startSession"),id(o,"continueSession"),id(i,"finalizeSession"),id(s,"isPrintableChars"),id(a,"isBase64"),id(l,"parseAttributePairs"),id(c,"parseServerFirstMessage"),id(u,"parseServerFinalMessage"),id(d,"xorBuffers"),id(h,"sha256"),id(f,"hmacSha256"),id(p,"Hi"),t.exports={startSession:r,continueSession:o,finalizeSession:i}})),qd={};function Qd(...e){return e.join("/")}ld(qd,{join:()=>Qd});var Wd=sd((()=>{md(),id(Qd,"join")})),Gd={};function Yd(e,t){t(new Error("No filesystem"))}ld(Gd,{stat:()=>Yd});var Zd=sd((()=>{md(),id(Yd,"stat")})),Xd={};ld(Xd,{default:()=>Kd});var Kd,Jd=sd((()=>{md(),Kd={}})),eh={};ld(eh,{StringDecoder:()=>nh});var th,nh,rh=sd((()=>{md(),th=class{constructor(e){hd(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},id(th,"StringDecoder"),nh=th})),oh=ad(((e,t)=>{md();var{Transform:n}=(Jd(),dd(Xd)),{StringDecoder:r}=(rh(),dd(eh)),o=Symbol("last"),i=Symbol("decoder");function s(e,t,n){let r;if(this.overflow){if(r=this[i].write(e).split(this.matcher),1===r.length)return n();r.shift(),this.overflow=!1}else this[o]+=this[i].write(e),r=this[o].split(this.matcher);this[o]=r.pop();for(let e=0;e<r.length;e++)try{l(this,this.mapper(r[e]))}catch(e){return n(e)}this.overflow=this[o].length>this.maxLength,!this.overflow||this.skipOverflow?n():n(new Error("maximum buffer reached"))}function a(e){if(this[o]+=this[i].end(),this[o])try{l(this,this.mapper(this[o]))}catch(t){return e(t)}e()}function l(e,t){void 0!==t&&e.push(t)}function c(e){return e}function u(e,t,l){switch(e=e||/\r?\n/,t=t||c,l=l||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"==typeof e&&!(e instanceof RegExp)&&!e[Symbol.split]&&(l=e,e=/\r?\n/);break;case 2:"function"==typeof e?(l=t,t=e,e=/\r?\n/):"object"==typeof t&&(l=t,t=c)}(l=Object.assign({},l)).autoDestroy=!0,l.transform=s,l.flush=a,l.readableObjectMode=!0;let u=new n(l);return u[o]="",u[i]=new r("utf8"),u.matcher=e,u.mapper=t,u.maxLength=l.maxLength,u.skipOverflow=l.skipOverflow||!1,u.overflow=!1,u._destroy=function(e,t){this._writableState.errorEmitted=!1,t(e)},u}id(s,"transform"),id(a,"flush"),id(l,"push"),id(c,"noop"),id(u,"split"),t.exports=u})),ih=ad(((e,t)=>{md();var n=(Wd(),dd(qd)),r=(Jd(),dd(Xd)).Stream,o=oh(),i=(wd(),dd(bd)),s="win32"===Zu.platform,a=Zu.stderr;function l(e){return 32768==(61440&e)}id(l,"isRegFile");var c=["host","port","database","user","password"],u=c.length,d=c[u-1];function h(){if(a instanceof r&&!0===a.writable){var e=Array.prototype.slice.call(arguments).concat("\n");a.write(i.format.apply(i,e))}}id(h,"warn"),Object.defineProperty(t.exports,"isWin",{get:id((function(){return s}),"get"),set:id((function(e){s=e}),"set")}),t.exports.warnTo=function(e){var t=a;return a=e,t},t.exports.getFileName=function(e){var t=e||Zu.env;return t.PGPASSFILE||(s?n.join(t.APPDATA||"./","postgresql","pgpass.conf"):n.join(t.HOME||"./",".pgpass"))},t.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(Zu.env,"PGPASSWORD")&&(!!s||(t=t||"<unkn>",l(e.mode)?!(63&e.mode)||(h('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):(h('WARNING: password file "%s" is not a plain file',t),!1)))};var f=t.exports.match=function(e,t){return c.slice(0,-1).reduce((function(n,r,o){return 1==o&&Number(e[r]||5432)===Number(t[r])?n&&!0:n&&("*"===t[r]||t[r]===e[r])}),!0)};t.exports.getPassword=function(e,t,n){var r,i=t.pipe(o());function s(t){var n=p(t);n&&g(n)&&f(e,n)&&(r=n[d],i.end())}id(s,"onLine");var a=id((function(){t.destroy(),n(r)}),"onEnd"),l=id((function(e){t.destroy(),h("WARNING: error on reading file: %s",e),n(void 0)}),"onErr");t.on("error",l),i.on("data",s).on("end",a).on("error",l)};var p=t.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",n="",r=0,o=0,i={},s=id((function(t,n,r){var o=e.substring(n,r);Object.hasOwnProperty.call(Zu.env,"PGPASS_NO_DEESCAPE")||(o=o.replace(/\\([:\\])/g,"$1")),i[c[t]]=o}),"addToObj"),a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),n=e.charAt(a),r==u-1){s(r,o);break}a>=0&&":"==t&&"\\"!==n&&(s(r,o,a+1),o=a+2,r+=1)}return i=Object.keys(i).length===u?i:null},g=t.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},n=0;n<c.length;n+=1){if(!(0,t[n])(e[c[n]]||""))return!1}return!0}})),sh=ad(((e,t)=>{md(),Wd(),dd(qd);var n=(Zd(),dd(Gd)),r=ih();t.exports=function(e,t){var o=r.getFileName();n.stat(o,(function(i,s){if(i||!r.usePgPass(s,o))return t(void 0);var a=n.createReadStream(o);r.getPassword(e,a,t)}))},t.exports.warnTo=r.warnTo})),ah=ad(((e,t)=>{md();var n=Hd();function r(e){this._types=e||n,this.text={},this.binary={}}id(r,"TypeOverrides"),r.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},r.prototype.setTypeParser=function(e,t,n){"function"==typeof t&&(n=t,t="text"),this.getOverrides(t)[e]=n},r.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},t.exports=r})),lh={};ld(lh,{default:()=>ch});var ch,uh=sd((()=>{md(),ch={}})),dh={};function hh(e,t=!1){let{protocol:n}=new URL(e),r="http:"+e.substring(n.length),{username:o,password:i,host:s,hostname:a,port:l,pathname:c,search:u,searchParams:d,hash:h}=new URL(r);return i=decodeURIComponent(i),o=decodeURIComponent(o),c=decodeURIComponent(c),{href:e,protocol:n,auth:o+":"+i,username:o,password:i,host:s,hostname:a,port:l,pathname:c,search:u,query:t?Object.fromEntries(d.entries()):u,hash:h}}ld(dh,{parse:()=>hh});var fh=sd((()=>{md(),id(hh,"parse")})),ph=ad(((e,t)=>{md();var n=(fh(),dd(dh)),r=(Zd(),dd(Gd));function o(e){if("/"===e.charAt(0))return{host:(o=e.split(" "))[0],database:o[1]};var t=n.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),o=t.query;for(var i in o)Array.isArray(o[i])&&(o[i]=o[i][o[i].length-1]);var s=(t.auth||":").split(":");if(o.user=s[0],o.password=s.splice(1).join(":"),o.port=t.port,"socket:"==t.protocol)return o.host=decodeURI(t.pathname),o.database=t.query.db,o.client_encoding=t.query.encoding,o;o.host||(o.host=t.hostname);var a=t.pathname;if(!o.host&&a&&/^%2f/i.test(a)){var l=a.split("/");o.host=decodeURIComponent(l[0]),a=l.splice(1).join("/")}switch(a&&"/"===a.charAt(0)&&(a=a.slice(1)||null),o.database=a&&decodeURI(a),("true"===o.ssl||"1"===o.ssl)&&(o.ssl=!0),"0"===o.ssl&&(o.ssl=!1),(o.sslcert||o.sslkey||o.sslrootcert||o.sslmode)&&(o.ssl={}),o.sslcert&&(o.ssl.cert=r.readFileSync(o.sslcert).toString()),o.sslkey&&(o.ssl.key=r.readFileSync(o.sslkey).toString()),o.sslrootcert&&(o.ssl.ca=r.readFileSync(o.sslrootcert).toString()),o.sslmode){case"disable":o.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":o.ssl.rejectUnauthorized=!1}return o}id(o,"parse"),t.exports=o,o.parse=o})),gh=ad(((e,t)=>{md();var n=(uh(),dd(lh)),r=Fd(),o=ph().parse,i=id((function(e,t,n){return void 0===n?n=Zu.env["PG"+e.toUpperCase()]:!1===n||(n=Zu.env[n]),t[e]||n||r[e]}),"val"),s=id((function(){switch(Zu.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return r.ssl}),"readSSLConfigFromEnvironment"),a=id((function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}),"quoteParamValue"),l=id((function(e,t,n){var r=t[n];null!=r&&e.push(n+"="+a(r))}),"add"),c=class{constructor(e){(e="string"==typeof e?o(e):e||{}).connectionString&&(e=Object.assign({},e,o(e.connectionString))),this.user=i("user",e),this.database=i("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(i("port",e),10),this.host=i("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",e)}),this.binary=i("binary",e),this.options=i("options",e),this.ssl=typeof e.ssl>"u"?s():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",e),this.replication=i("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",e,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",e,!1),this.statement_timeout=i("statement_timeout",e,!1),this.lock_timeout=i("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",e,!1),this.query_timeout=i("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=Zu.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];l(t,this,"user"),l(t,this,"password"),l(t,this,"port"),l(t,this,"application_name"),l(t,this,"fallback_application_name"),l(t,this,"connect_timeout"),l(t,this,"options");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(t,r,"sslmode"),l(t,r,"sslca"),l(t,r,"sslkey"),l(t,r,"sslcert"),l(t,r,"sslrootcert"),this.database&&t.push("dbname="+a(this.database)),this.replication&&t.push("replication="+a(this.replication)),this.host&&t.push("host="+a(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+a(this.client_encoding)),n.lookup(this.host,(function(n,r){return n?e(n,null):(t.push("hostaddr="+a(r)),e(null,t.join(" ")))}))}};id(c,"ConnectionParameters");var u=c;t.exports=u})),mh=ad(((e,t)=>{md();var n=Hd(),r=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,o=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var t;(t=e.text?r.exec(e.text):r.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;n++){var o=e[n];t[n]=null!==o?this._parsers[n](o):null}return t}parseRow(e){for(var t={},n=0,r=e.length;n<r;n++){var o=e[n],i=this.fields[n].name;t[i]=null!==o?this._parsers[n](o):null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=n.getTypeParser(r.dataTypeID,r.format||"text")}}};id(o,"Result");var i=o;t.exports=i})),yh=ad(((e,t)=>{md();var{EventEmitter:n}=yd(),r=mh(),o=Ud(),i=class extends n{constructor(e,t,n){super(),e=o.normalizeQueryConfig(e,t,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,Zu.domain&&e.callback&&(this.callback=Zu.domain.bind(e.callback)),this._result=new r(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!(!this.name&&!this.rows)||!(!this.text||!this.values)&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new r(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){Zu.nextTick((()=>{throw e}))}this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");let t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:o.prepareValue})}catch(t){return void this.handleError(t,e)}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};id(i,"Query");var s=i;t.exports=s})),bh={};function vh(e){return 0}ld(bh,{Socket:()=>Sh,isIP:()=>vh});var wh,xh,_h,Sh,Eh=sd((()=>{md(),wh=ud(yd(),1),id(vh,"isIP"),xh=id((e=>e.replace(/^[^.]+\./,"api.")),"transformHost"),_h=class e extends wh.EventEmitter{constructor(){super(...arguments),hd(this,"opts",{}),hd(this,"connecting",!1),hd(this,"pending",!0),hd(this,"writable",!0),hd(this,"encrypted",!1),hd(this,"authorized",!1),hd(this,"destroyed",!1),hd(this,"ws",null),hd(this,"writeBuffer"),hd(this,"tlsState",0),hd(this,"tlsRead"),hd(this,"tlsWrite")}static get poolQueryViaFetch(){return e.opts.poolQueryViaFetch??e.defaults.poolQueryViaFetch}static set poolQueryViaFetch(t){e.opts.poolQueryViaFetch=t}static get fetchEndpoint(){return e.opts.fetchEndpoint??e.defaults.fetchEndpoint}static set fetchEndpoint(t){e.opts.fetchEndpoint=t}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return e.opts.fetchFunction??e.defaults.fetchFunction}static set fetchFunction(t){e.opts.fetchFunction=t}static get webSocketConstructor(){return e.opts.webSocketConstructor??e.defaults.webSocketConstructor}static set webSocketConstructor(t){e.opts.webSocketConstructor=t}get webSocketConstructor(){return this.opts.webSocketConstructor??e.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return e.opts.wsProxy??e.defaults.wsProxy}static set wsProxy(t){e.opts.wsProxy=t}get wsProxy(){return this.opts.wsProxy??e.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return e.opts.coalesceWrites??e.defaults.coalesceWrites}static set coalesceWrites(t){e.opts.coalesceWrites=t}get coalesceWrites(){return this.opts.coalesceWrites??e.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return e.opts.useSecureWebSocket??e.defaults.useSecureWebSocket}static set useSecureWebSocket(t){e.opts.useSecureWebSocket=t}get useSecureWebSocket(){return this.opts.useSecureWebSocket??e.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return e.opts.forceDisablePgSSL??e.defaults.forceDisablePgSSL}static set forceDisablePgSSL(t){e.opts.forceDisablePgSSL=t}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??e.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return e.opts.disableSNI??e.defaults.disableSNI}static set disableSNI(t){e.opts.disableSNI=t}get disableSNI(){return this.opts.disableSNI??e.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return e.opts.pipelineConnect??e.defaults.pipelineConnect}static set pipelineConnect(t){e.opts.pipelineConnect=t}get pipelineConnect(){return this.opts.pipelineConnect??e.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return e.opts.subtls??e.defaults.subtls}static set subtls(t){e.opts.subtls=t}get subtls(){return this.opts.subtls??e.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return e.opts.pipelineTLS??e.defaults.pipelineTLS}static set pipelineTLS(t){e.opts.pipelineTLS=t}get pipelineTLS(){return this.opts.pipelineTLS??e.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return e.opts.rootCerts??e.defaults.rootCerts}static set rootCerts(t){e.opts.rootCerts=t}get rootCerts(){return this.opts.rootCerts??e.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let n=this.wsProxy;if(void 0===n)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof n?n(e,t):`${n}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,n){this.connecting=!0,n&&this.once("connect",n);let r,o=id((()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")}),"handleWebSocketOpen"),i=id(((e,t=!1)=>{e.binaryType="arraybuffer",e.addEventListener("error",(e=>{this.emit("error",e),this.emit("close")})),e.addEventListener("message",(e=>{if(0===this.tlsState){let t=Yu.from(e.data);this.emit("data",t)}})),e.addEventListener("close",(()=>{this.emit("close")})),t?o():e.addEventListener("open",o)}),"configureWebSocket");try{r=this.wsProxyAddrForHost(t,"string"==typeof e?parseInt(e,10):e)}catch(e){return this.emit("error",e),void this.emit("close")}try{let e=(this.useSecureWebSocket?"wss:":"ws:")+"//"+r;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(e),i(this.ws);else try{this.ws=new WebSocket(e),i(this.ws)}catch{this.ws=new __unstable_WebSocket(e),i(this.ws)}}catch(e){let t=(this.useSecureWebSocket?"https:":"http:")+"//"+r;fetch(t,{headers:{Upgrade:"websocket"}}).then((t=>{if(this.ws=t.webSocket,null==this.ws)throw e;this.ws.accept(),i(this.ws,!0)})).catch((e=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${e.message}`)),this.emit("close")}))}}async startTls(e){if(void 0===this.subtls)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),r=n.read.bind(n),o=this.rawWrite.bind(this),[i,s]=await this.subtls.startTls(e,t,r,o,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=i,this.tlsWrite=s,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(void 0===e)break;{let t=Yu.from(e);this.emit("data",t)}}}rawWrite(e){if(this.coalesceWrites)if(void 0===this.writeBuffer)this.writeBuffer=e,setTimeout((()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0}),0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}else this.ws.send(e)}write(e,t="utf8",n=e=>{}){return 0===e.length?(n(),!0):("string"==typeof e&&(e=Yu.from(e,t)),0===this.tlsState?(this.rawWrite(e),n()):1===this.tlsState?this.once("secureConnection",(()=>{this.write(e,t,n)})):(this.tlsWrite(e),n()),!0)}end(e=Yu.alloc(0),t="utf8",n=()=>{}){return this.write(e,t,(()=>{this.ws.close(),n()})),this}destroy(){return this.destroyed=!0,this.end()}},id(_h,"Socket"),hd(_h,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:id((e=>"https://"+xh(e)+"/sql"),"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:id((e=>e+"/v2"),"wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),hd(_h,"opts",{}),Sh=_h})),kh=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:"parseComplete",length:5},e.bindComplete={name:"bindComplete",length:5},e.closeComplete={name:"closeComplete",length:5},e.noData={name:"noData",length:5},e.portalSuspended={name:"portalSuspended",length:5},e.replicationStart={name:"replicationStart",length:4},e.emptyQuery={name:"emptyQuery",length:4},e.copyDone={name:"copyDone",length:4};var t=class extends Error{constructor(e,t,n){super(e),this.length=t,this.name=n}};id(t,"DatabaseError");var n=t;e.DatabaseError=n;var r=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};id(r,"CopyDataMessage");var o=r;e.CopyDataMessage=o;var i=class{constructor(e,t,n,r){this.length=e,this.name=t,this.binary=n,this.columnTypes=new Array(r)}};id(i,"CopyResponse");var s=i;e.CopyResponse=s;var a=class{constructor(e,t,n,r,o,i,s){this.name=e,this.tableID=t,this.columnID=n,this.dataTypeID=r,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=s}};id(a,"Field");var l=a;e.Field=l;var c=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};id(c,"RowDescriptionMessage");var u=c;e.RowDescriptionMessage=u;var d=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};id(d,"ParameterDescriptionMessage");var h=d;e.ParameterDescriptionMessage=h;var f=class{constructor(e,t,n){this.length=e,this.parameterName=t,this.parameterValue=n,this.name="parameterStatus"}};id(f,"ParameterStatusMessage");var p=f;e.ParameterStatusMessage=p;var g=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};id(g,"AuthenticationMD5Password");var m=g;e.AuthenticationMD5Password=m;var y=class{constructor(e,t,n){this.length=e,this.processID=t,this.secretKey=n,this.name="backendKeyData"}};id(y,"BackendKeyDataMessage");var b=y;e.BackendKeyDataMessage=b;var v=class{constructor(e,t,n,r){this.length=e,this.processId=t,this.channel=n,this.payload=r,this.name="notification"}};id(v,"NotificationResponseMessage");var w=v;e.NotificationResponseMessage=w;var x=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};id(x,"ReadyForQueryMessage");var _=x;e.ReadyForQueryMessage=_;var S=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};id(S,"CommandCompleteMessage");var E=S;e.CommandCompleteMessage=E;var k=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};id(k,"DataRowMessage");var C=k;e.DataRowMessage=C;var M=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};id(M,"NoticeMessage");var A=M;e.NoticeMessage=A})),Ch=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;var t=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Yu.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,n=t.length+(t.length>>1)+e;this.buffer=Yu.allocUnsafe(n),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Yu.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=Yu.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Yu.allocUnsafe(this.size),t}};id(t,"Writer");var n=t;e.Writer=n})),Mh=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var t=Ch(),n=new t.Writer,r=id((e=>{n.addInt16(3).addInt16(0);for(let t of Object.keys(e))n.addCString(t).addCString(e[t]);n.addCString("client_encoding").addCString("UTF8");var r=n.addCString("").flush(),o=r.length+4;return(new t.Writer).addInt32(o).add(r).flush()}),"startup"),o=id((()=>{let e=Yu.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e}),"requestSsl"),i=id((e=>n.addCString(e).flush(112)),"password"),s=id((function(e,t){return n.addCString(e).addInt32(Yu.byteLength(t)).addString(t),n.flush(112)}),"sendSASLInitialResponseMessage"),a=id((function(e){return n.addString(e).flush(112)}),"sendSCRAMClientFinalMessage"),l=id((e=>n.addCString(e).flush(81)),"query"),c=[],u=id((e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||c;for(var o=r.length,i=n.addCString(t).addCString(e.text).addInt16(o),s=0;s<o;s++)i.addInt32(r[s]);return n.flush(80)}),"parse"),d=new t.Writer,h=id((function(e,t){for(let r=0;r<e.length;r++){let o=t?t(e[r],r):e[r];null==o?(n.addInt16(0),d.addInt32(-1)):o instanceof Yu?(n.addInt16(1),d.addInt32(o.length),d.add(o)):(n.addInt16(0),d.addInt32(Yu.byteLength(o)),d.addString(o))}}),"writeValues"),f=id(((e={})=>{let t=e.portal||"",r=e.statement||"",o=e.binary||!1,i=e.values||c,s=i.length;return n.addCString(t).addCString(r),n.addInt16(s),h(i,e.valueMapper),n.addInt16(s),n.add(d.flush()),n.addInt16(o?1:0),n.flush(66)}),"bind"),p=Yu.from([69,0,0,0,9,0,0,0,0,0]),g=id((e=>{if(!e||!e.portal&&!e.rows)return p;let t=e.portal||"",n=e.rows||0,r=Yu.byteLength(t),o=4+r+1+4,i=Yu.allocUnsafe(1+o);return i[0]=69,i.writeInt32BE(o,1),i.write(t,5,"utf-8"),i[r+5]=0,i.writeUInt32BE(n,i.length-4),i}),"execute"),m=id(((e,t)=>{let n=Yu.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(e,8),n.writeInt32BE(t,12),n}),"cancel"),y=id(((e,t)=>{let n=4+Yu.byteLength(t)+1,r=Yu.allocUnsafe(1+n);return r[0]=e,r.writeInt32BE(n,1),r.write(t,5,"utf-8"),r[n]=0,r}),"cstringMessage"),b=n.addCString("P").flush(68),v=n.addCString("S").flush(68),w=id((e=>e.name?y(68,`${e.type}${e.name||""}`):"P"===e.type?b:v),"describe"),x=id((e=>{let t=`${e.type}${e.name||""}`;return y(67,t)}),"close"),_=id((e=>n.add(e).flush(100)),"copyData"),S=id((e=>y(102,e)),"copyFail"),E=id((e=>Yu.from([e,0,0,0,4])),"codeOnlyBuffer"),k=E(72),C=E(83),M=E(88),A=E(99),P={startup:r,password:i,requestSsl:o,sendSASLInitialResponseMessage:s,sendSCRAMClientFinalMessage:a,query:l,parse:u,bind:f,execute:g,describe:w,close:x,flush:id((()=>k),"flush"),sync:id((()=>C),"sync"),end:id((()=>M),"end"),copyData:_,copyDone:id((()=>A),"copyDone"),copyFail:S,cancel:m};e.serialize=P})),Ah=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;var t=Yu.allocUnsafe(0),n=class{constructor(e=0){this.offset=e,this.buffer=t,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){let e=this.offset,t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};id(n,"BufferReader");var r=n;e.BufferReader=r})),Ph=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=kh(),n=Ah(),r=Yu.allocUnsafe(0),o=class{constructor(e){if(this.buffer=r,this.bufferLength=0,this.bufferOffset=0,this.reader=new n.BufferReader,"binary"===e?.mode)throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,t){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,o=this.bufferOffset;for(;o+5<=n;){let e=this.buffer[o],r=this.buffer.readUInt32BE(o+1),i=1+r;if(!(i+o<=n))break;t(this.handlePacket(o+5,e,r,this.buffer)),o+=i}o===n?(this.buffer=r,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-o,this.bufferOffset=o)}mergeBuffer(e){if(this.bufferLength>0){let t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let n=2*this.buffer.byteLength;for(;t>=n;)n*=2;e=Yu.allocUnsafe(n)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,n,r,o){switch(n){case 50:return t.bindComplete;case 49:return t.parseComplete;case 51:return t.closeComplete;case 110:return t.noData;case 115:return t.portalSuspended;case 99:return t.copyDone;case 87:return t.replicationStart;case 73:return t.emptyQuery;case 68:return this.parseDataRowMessage(e,r,o);case 67:return this.parseCommandCompleteMessage(e,r,o);case 90:return this.parseReadyForQueryMessage(e,r,o);case 65:return this.parseNotificationMessage(e,r,o);case 82:return this.parseAuthenticationResponse(e,r,o);case 83:return this.parseParameterStatusMessage(e,r,o);case 75:return this.parseBackendKeyData(e,r,o);case 69:return this.parseErrorMessage(e,r,o,"error");case 78:return this.parseErrorMessage(e,r,o,"notice");case 84:return this.parseRowDescriptionMessage(e,r,o);case 116:return this.parseParameterDescriptionMessage(e,r,o);case 71:return this.parseCopyInMessage(e,r,o);case 72:return this.parseCopyOutMessage(e,r,o);case 100:return this.parseCopyData(e,r,o);default:return new t.DatabaseError("received invalid response: "+n.toString(16),r,"error")}}parseReadyForQueryMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.string(1);return new t.ReadyForQueryMessage(n,o)}parseCommandCompleteMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.cstring();return new t.CommandCompleteMessage(n,o)}parseCopyData(e,n,r){let o=r.slice(e,e+(n-4));return new t.CopyDataMessage(n,o)}parseCopyInMessage(e,t,n){return this.parseCopyMessage(e,t,n,"copyInResponse")}parseCopyOutMessage(e,t,n){return this.parseCopyMessage(e,t,n,"copyOutResponse")}parseCopyMessage(e,n,r,o){this.reader.setBuffer(e,r);let i=0!==this.reader.byte(),s=this.reader.int16(),a=new t.CopyResponse(n,o,i,s);for(let e=0;e<s;e++)a.columnTypes[e]=this.reader.int16();return a}parseNotificationMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int32(),i=this.reader.cstring(),s=this.reader.cstring();return new t.NotificationResponseMessage(n,o,i,s)}parseRowDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int16(),i=new t.RowDescriptionMessage(n,o);for(let e=0;e<o;e++)i.fields[e]=this.parseField();return i}parseField(){let e=this.reader.cstring(),n=this.reader.int32(),r=this.reader.int16(),o=this.reader.int32(),i=this.reader.int16(),s=this.reader.int32(),a=0===this.reader.int16()?"text":"binary";return new t.Field(e,n,r,o,i,s,a)}parseParameterDescriptionMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int16(),i=new t.ParameterDescriptionMessage(n,o);for(let e=0;e<o;e++)i.dataTypeIDs[e]=this.reader.int32();return i}parseDataRowMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int16(),i=new Array(o);for(let e=0;e<o;e++){let t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new t.DataRowMessage(n,i)}parseParameterStatusMessage(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.cstring(),i=this.reader.cstring();return new t.ParameterStatusMessage(n,o,i)}parseBackendKeyData(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int32(),i=this.reader.int32();return new t.BackendKeyDataMessage(n,o,i)}parseAuthenticationResponse(e,n,r){this.reader.setBuffer(e,r);let o=this.reader.int32(),i={name:"authenticationOk",length:n};switch(o){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";let e=this.reader.bytes(4);return new t.AuthenticationMD5Password(n,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(n-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(n-8);break;default:throw new Error("Unknown authenticationOk message type "+o)}return i}parseErrorMessage(e,n,r,o){this.reader.setBuffer(e,r);let i={},s=this.reader.string(1);for(;"\0"!==s;)i[s]=this.reader.cstring(),s=this.reader.string(1);let a=i.M,l="notice"===o?new t.NoticeMessage(n,a):new t.DatabaseError(a,n,o);return l.severity=i.S,l.code=i.C,l.detail=i.D,l.hint=i.H,l.position=i.P,l.internalPosition=i.p,l.internalQuery=i.q,l.where=i.W,l.schema=i.s,l.table=i.t,l.column=i.c,l.dataType=i.d,l.constraint=i.n,l.file=i.F,l.line=i.L,l.routine=i.R,l}};id(o,"Parser");var i=o;e.Parser=i})),Ih=ad((e=>{md(),Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;var t=kh();Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:id((function(){return t.DatabaseError}),"get")});var n=Mh();Object.defineProperty(e,"serialize",{enumerable:!0,get:id((function(){return n.serialize}),"get")});var r=Ph();function o(e,t){let n=new r.Parser;return e.on("data",(e=>n.parse(e,t))),new Promise((t=>e.on("end",(()=>t()))))}id(o,"parse"),e.parse=o})),Nh={};function Oh({socket:e,servername:t}){return e.startTls(t),e}ld(Nh,{connect:()=>Oh});var Rh=sd((()=>{md(),id(Oh,"connect")})),Th=ad(((e,t)=>{md();var n=(Eh(),dd(bh)),r=yd().EventEmitter,{parse:o,serialize:i}=Ih(),s=i.flush(),a=i.sync(),l=i.end(),c=class extends r{constructor(e){super(),e=e||{},this.stream=e.stream||new n.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))}connect(e,t){var r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",(function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit("connect")}));let o=id((function(e){r._ending&&("ECONNRESET"===e.code||"EPIPE"===e.code)||r.emit("error",e)}),"reportStreamError");if(this.stream.on("error",o),this.stream.on("close",(function(){r.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return r.stream.end(),r.emit("error",new Error("The server does not support SSL connections"));default:return r.stream.end(),r.emit("error",new Error("There was an error establishing an SSL connection"))}var i=(Rh(),dd(Nh));let s={socket:r.stream};!0!==r.ssl&&(Object.assign(s,r.ssl),"key"in r.ssl&&(s.key=r.ssl.key)),0===n.isIP(t)&&(s.servername=t);try{r.stream=i.connect(s)}catch(e){return r.emit("error",e)}r.attachListeners(r.stream),r.stream.on("error",o),r.emit("sslconnect")}))}attachListeners(e){e.on("end",(()=>{this.emit("end")})),o(e,(e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)}))}requestSsl(){this.stream.write(i.requestSsl())}startup(e){this.stream.write(i.startup(e))}cancel(e,t){this._send(i.cancel(e,t))}password(e){this._send(i.password(e))}sendSASLInitialResponseMessage(e,t){this._send(i.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(i.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(i.query(e))}parse(e){this._send(i.parse(e))}bind(e){this._send(i.bind(e))}execute(e){this._send(i.execute(e))}flush(){this.stream.writable&&this.stream.write(s)}sync(){this._ending=!0,this._send(s),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(l,(()=>{this.stream.end()}));this.stream.end()}close(e){this._send(i.close(e))}describe(e){this._send(i.describe(e))}sendCopyFromChunk(e){this._send(i.copyData(e))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(e){this._send(i.copyFail(e))}};id(c,"Connection");var u=c;t.exports=u})),Lh=ad(((e,t)=>{md();var n=yd().EventEmitter;wd(),dd(bd);var r=Ud(),o=Vd(),i=sh(),s=ah(),a=gh(),l=yh(),c=Fd(),u=Th(),d=class extends n{constructor(e){super(),this.connectionParameters=new a(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||Qu.Promise,this._types=new s(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new u({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||c.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){let t=id((t=>{Zu.nextTick((()=>{t.handleError(e,this.connection)}))}),"enqueueError");this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let t=new Error("Client has already been connected. You cannot reuse a client.");Zu.nextTick((()=>{e(t)}))}else this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout((()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))}),this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",(function(){t.ssl?n.requestSsl():n.startup(t.getStartupConf())})),n.on("sslconnect",(function(){n.startup(t.getStartupConf())})),this._attachListeners(n),n.once("end",(()=>{let e=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),Zu.nextTick((()=>{this.emit("end")}))}))}connect(e){if(!e)return new this._Promise(((e,t)=>{this._connect((n=>{n?t(n):e()}))}));this._connect(e)}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let t=this.connection;"function"==typeof this.password?this._Promise.resolve().then((()=>this.password())).then((n=>{if(void 0!==n){if("string"!=typeof n)return void t.emit("error",new TypeError("Password must be a string"));this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()})).catch((e=>{t.emit("error",e)})):null!==this.password?e():i(this.connectionParameters,(t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()}))}_handleAuthCleartextPassword(e){this._checkPgPass((()=>{this.connection.password(this.password)}))}_handleAuthMD5Password(e){this._checkPgPass((()=>{let t=r.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)}))}_handleAuthSASL(e){this._checkPgPass((()=>{this.saslSession=o.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}))}_handleAuthSASLContinue(e){o.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){o.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,this.connection)):this._handleErrorEvent(e)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(t.application_name=n),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var n=this.connection;this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",(function(){n.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,n){return this._types.setTypeParser(e,t,n)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var t=!1,n="'",r=0;r<e.length;r++){var o=e[r];"'"===o?n+=o+o:"\\"===o?(n+=o+o,t=!0):n+=o}return n+="'",!0===t&&(n=" E"+n),n}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&Zu.nextTick((()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()}))}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,t,n){var r,o,i,s,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(i=e.query_timeout||this.connectionParameters.query_timeout,o=r=e,"function"==typeof t&&(r.callback=r.callback||t)):(i=this.connectionParameters.query_timeout,(r=new l(e,t,n)).callback||(o=new this._Promise(((e,t)=>{r.callback=(n,r)=>n?t(n):e(r)})))),i&&(a=r.callback,s=setTimeout((()=>{var e=new Error("Query read timeout");Zu.nextTick((()=>{r.handleError(e,this.connection)})),a(e),r.callback=()=>{};var t=this.queryQueue.indexOf(r);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()}),i),r.callback=(e,t)=>{clearTimeout(s),a(e,t)}),this.binary&&!r.binary&&(r.binary=!0),r._result&&!r._result._types&&(r._result._types=this._types),this._queryable?this._ending?(Zu.nextTick((()=>{r.handleError(new Error("Client was closed and is not queryable"),this.connection)})),o):(this.queryQueue.push(r),this._pulseQueryQueue(),o):(Zu.nextTick((()=>{r.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)})),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise((e=>{this.connection.once("end",e)}));this.connection.once("end",e)}};id(d,"Client");var h=d;h.Query=l,t.exports=h})),Dh=ad(((e,t)=>{md();var n=yd().EventEmitter,r=id((function(){}),"NOOP"),o=id(((e,t)=>{let n=e.findIndex(t);return-1===n?void 0:e.splice(n,1)[0]}),"removeWhere"),i=class{constructor(e,t,n){this.client=e,this.idleListener=t,this.timeoutId=n}};id(i,"IdleItem");var s=i,a=class{constructor(e){this.callback=e}};id(a,"PendingItem");var l=a;function c(){throw new Error("Release called on client which has already been released to the pool.")}function u(e,t){if(t)return{callback:t,result:void 0};let n,r,o=id((function(e,t){e?n(e):r(t)}),"cb"),i=new e((function(e,t){r=e,n=t})).catch((e=>{throw Error.captureStackTrace(e),e}));return{callback:o,result:i}}function d(e,t){return id((function n(r){r.client=t,t.removeListener("error",n),t.on("error",(()=>{e.log("additional client error after disconnection due to error",r)})),e._remove(t),e.emit("error",r,t)}),"idleListener")}id(c,"throwOnDoubleRelease"),id(u,"promisify"),id(d,"makeIdleListener");var h=class extends n{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||Vh().Client,this.Promise=this.options.Promise||Qu.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map((e=>{this._remove(e.client)})),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let t=this._idle.pop();clearTimeout(t.timeoutId);let n=t.client;n.ref&&n.ref();let r=t.idleListener;return this._acquireClient(n,e,r,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){let t=o(this._idle,(t=>t.client===e));void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter((t=>t!==e)),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}let t=u(this.Promise,e),n=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Zu.nextTick((()=>this._pulseQueue())),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(t.callback)),n;let e=id(((e,n,r)=>{clearTimeout(i),t.callback(e,n,r)}),"queueCallback"),r=new l(e),i=setTimeout((()=>{o(this._pendingQueue,(t=>t.callback===e)),r.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))}),this.options.connectionTimeoutMillis);return this._pendingQueue.push(r),n}return this.newClient(new l(t.callback)),n}newClient(e){let t=new this.Client(this.options);this._clients.push(t);let n=d(this,t);this.log("checking client timeout");let o,i=!1;this.options.connectionTimeoutMillis&&(o=setTimeout((()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()}),this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect((s=>{if(o&&clearTimeout(o),t.on("error",n),!s){if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let e=setTimeout((()=>{this.log("ending client due to expired lifetime"),this._expired.add(t),-1!==this._idle.findIndex((e=>e.client===t))&&this._acquireClient(t,new l(((e,t,n)=>n())),n,!1)}),1e3*this.options.maxLifetimeSeconds);e.unref(),t.once("end",(()=>clearTimeout(e)))}return this._acquireClient(t,e,n,!0)}this.log("client failed to connect",s),this._clients=this._clients.filter((e=>e!==t)),i&&(s.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(s,void 0,r)}))}_acquireClient(e,t,n,o){o&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),t.timedOut?o&&this.options.verify?this.options.verify(e,e.release):e.release():o&&this.options.verify?this.options.verify(e,(n=>{if(n)return e.release(n),t.callback(n,void 0,r);t.callback(void 0,e,e.release)})):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let n=!1;return r=>{n&&c(),n=!0,this._release(e,t,r)}}_release(e,t,n){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),void this._pulseQueue();if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e),void this._pulseQueue();let r;this.options.idleTimeoutMillis&&(r=setTimeout((()=>{this.log("remove idle client"),this._remove(e)}),this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&r.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new s(e,t,r)),this._pulseQueue()}query(e,t,n){if("function"==typeof e){let t=u(this.Promise,e);return Wu((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(n=t,t=void 0);let r=u(this.Promise,n);return n=r.callback,this.connect(((r,o)=>{if(r)return n(r);let i=!1,s=id((e=>{i||(i=!0,o.release(e),n(e))}),"onError");o.once("error",s),this.log("dispatching query");try{o.query(e,t,((e,t)=>{if(this.log("query dispatched"),o.removeListener("error",s),!i)return i=!0,o.release(e),e?n(e):n(void 0,t)}))}catch(e){return o.release(e),n(e)}})),r.result}end(e){if(this.log("ending"),this.ending){let t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;let t=u(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce(((e,t)=>e+(this._expired.has(t)?1:0)),0)}get totalCount(){return this._clients.length}};id(h,"Pool");var f=h;t.exports=f})),Bh={};ld(Bh,{default:()=>zh});var zh,$h=sd((()=>{md(),zh={}})),jh=ad(((e,t)=>{t.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}})),Hh=ad(((e,t)=>{md();var n=yd().EventEmitter,r=(wd(),dd(bd)),o=Ud(),i=t.exports=function(e,t,r){n.call(this),e=o.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))};r.inherits(i,n);var s={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var n in t){e[s[n]||n]=t[n]}this.callback?this.callback(e):this.emit("error",e),this.state="error"},i.prototype.then=function(e,t){return this._getPromise().then(e,t)},i.prototype.catch=function(e){return this._getPromise().catch(e)},i.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this))),this._promise},i.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var n=id((function(n,r,o){if(e.native.arrayMode=!1,Wu((function(){t.emit("_done")})),n)return t.handleError(n);t._emitRowEvents&&(o.length>1?r.forEach(((e,n)=>{e.forEach((e=>{t.emit("row",e,o[n])}))})):r.forEach((function(e){t.emit("row",e,o)}))),t.state="end",t.emit("end",o),t.callback&&t.callback(null,o)}),"after");if(Zu.domain&&(n=Zu.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var r=(this.values||[]).map(o.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return n(e)}return e.native.execute(this.name,r,n)}return e.native.prepare(this.name,this.text,r.length,(function(o){return o?n(o):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,r,n))}))}if(this.values){if(!Array.isArray(this.values)){let e=new Error("Query values must be an array");return n(e)}var i=this.values.map(o.prepareValue);e.native.query(this.text,i,n)}else e.native.query(this.text,n)}})),Fh=ad(((e,t)=>{md();var n=($h(),dd(Bh)),r=ah();jh();var o=yd().EventEmitter,i=(wd(),dd(bd)),s=gh(),a=Hh(),l=t.exports=function(e){o.call(this),e=e||{},this._Promise=e.Promise||Qu.Promise,this._types=new r(e.types),this.native=new n({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new s(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};l.Query=a,i.inherits(l,o),l.prototype._errorAllQueries=function(e){let t=id((t=>{Zu.nextTick((()=>{t.native=this.native,t.handleError(e)}))}),"enqueueError");this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},l.prototype._connect=function(e){var t=this;this._connecting?Zu.nextTick((()=>e(new Error("Client has already been connected. You cannot reuse a client.")))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(n,r){if(n)return e(n);t.native.connect(r,(function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},l.prototype.connect=function(e){if(!e)return new this._Promise(((e,t)=>{this._connect((n=>{n?t(n):e()}))}));this._connect(e)},l.prototype.query=function(e,t,n){var r,o,i,s,l;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)i=e.query_timeout||this.connectionParameters.query_timeout,o=r=e,"function"==typeof t&&(e.callback=t);else if(i=this.connectionParameters.query_timeout,!(r=new a(e,t,n)).callback){let e,t;o=new this._Promise(((n,r)=>{e=n,t=r})),r.callback=(n,r)=>n?t(n):e(r)}return i&&(l=r.callback,s=setTimeout((()=>{var e=new Error("Query read timeout");Zu.nextTick((()=>{r.handleError(e,this.connection)})),l(e),r.callback=()=>{};var t=this._queryQueue.indexOf(r);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()}),i),r.callback=(e,t)=>{clearTimeout(s),l(e,t)}),this._queryable?this._ending?(r.native=this.native,Zu.nextTick((()=>{r.handleError(new Error("Client was closed and is not queryable"))})),o):(this._queryQueue.push(r),this._pulseQueryQueue(),o):(r.native=this.native,Zu.nextTick((()=>{r.handleError(new Error("Client has encountered a connection error and is not queryable"))})),o)},l.prototype.end=function(e){var t,n=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,n){e=id((e=>e?n(e):t()),"cb")}))),this.native.end((function(){n._errorAllQueries(new Error("Connection terminated")),Zu.nextTick((()=>{n.emit("end"),e&&e()}))})),t},l.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},l.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(!t)return void(e||this.emit("drain"));this._activeQuery=t,t.submit(this);var n=this;t.once("_done",(function(){n._pulseQueryQueue()}))}},l.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},l.prototype.ref=function(){},l.prototype.unref=function(){},l.prototype.setTypeParser=function(e,t,n){return this._types.setTypeParser(e,t,n)},l.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}})),Uh=ad(((e,t)=>{md(),t.exports=Fh()})),Vh=ad(((e,t)=>{md();var n=Lh(),r=Fd(),o=Th(),i=Dh(),{DatabaseError:s}=Ih(),a=id((e=>{var t;return t=class extends i{constructor(t){super(t,e)}},id(t,"BoundPool"),t}),"poolFactory"),l=id((function(e){this.defaults=r,this.Client=e,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=o,this.types=Hd(),this.DatabaseError=s}),"PG");typeof Zu.env.NODE_PG_FORCE_NATIVE<"u"?t.exports=new l(Uh()):(t.exports=new l(n),Object.defineProperty(t.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new l(Uh())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(t.exports,"native",{value:e}),e}}))}));md();var qh=ud(Vh());Eh(),md(),fh(),Eh();var Qh=ud(Ud()),Wh=class extends Error{constructor(){super(...arguments),hd(this,"name","NeonDbError"),hd(this,"severity"),hd(this,"code"),hd(this,"detail"),hd(this,"hint"),hd(this,"position"),hd(this,"internalPosition"),hd(this,"internalQuery"),hd(this,"where"),hd(this,"schema"),hd(this,"table"),hd(this,"column"),hd(this,"dataType"),hd(this,"constraint"),hd(this,"file"),hd(this,"line"),hd(this,"routine"),hd(this,"sourceError")}};id(Wh,"NeonDbError");var Gh=Wh,Yh="transaction() expects an array of queries, or a function returning an array of queries",Zh=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function Xh(e,{arrayMode:t,fullResults:n,fetchOptions:r,isolationLevel:o,readOnly:i,deferrable:s,queryCallback:a,resultCallback:l}={}){if(!e)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let c;try{c=hh(e)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(e))}let{protocol:u,username:d,password:h,hostname:f,port:p,pathname:g}=c;if("postgres:"!==u&&"postgresql:"!==u||!d||!h||!f||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function m(e,...t){let n,r;if("string"==typeof e)n=e,r=t[1],t=t[0]??[];else{n="";for(let r=0;r<e.length;r++)n+=e[r],r<t.length&&(n+="$"+(r+1))}let o={query:n,params:t=t.map((e=>(0,Qh.prepareValue)(e)))};return a&&a(o),Kh(y,o,r)}async function y(a,c,u){let{fetchEndpoint:d,fetchFunction:h}=Sh,g="function"==typeof d?d(f,p):d,m=Array.isArray(a)?{queries:a}:a,y=r??{},b=t??!1,v=n??!1,w=o,x=i,_=s;void 0!==u&&(void 0!==u.fetchOptions&&(y={...y,...u.fetchOptions}),void 0!==u.arrayMode&&(b=u.arrayMode),void 0!==u.fullResults&&(v=u.fullResults),void 0!==u.isolationLevel&&(w=u.isolationLevel),void 0!==u.readOnly&&(x=u.readOnly),void 0!==u.deferrable&&(_=u.deferrable)),void 0!==c&&!Array.isArray(c)&&void 0!==c.fetchOptions&&(y={...y,...c.fetchOptions});let S,E={"Neon-Connection-String":e,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};Array.isArray(a)&&(void 0!==w&&(E["Neon-Batch-Isolation-Level"]=w),void 0!==x&&(E["Neon-Batch-Read-Only"]=String(x)),void 0!==_&&(E["Neon-Batch-Deferrable"]=String(_)));try{S=await(h??fetch)(g,{method:"POST",body:JSON.stringify(m),headers:E,...y})}catch(e){let t=new Gh(`Error connecting to database: ${e.message}`);throw t.sourceError=e,t}if(S.ok){let e=await S.json();if(Array.isArray(a)){let t=e.results;if(!Array.isArray(t))throw new Gh("Neon internal error: unexpected result format");return t.map(((e,t)=>{let n=c[t]??{};return Jh(e,{arrayMode:n.arrayMode??b,fullResults:n.fullResults??v,parameterizedQuery:a[t],resultCallback:l})}))}{let t=c??{};return Jh(e,{arrayMode:t.arrayMode??b,fullResults:t.fullResults??v,parameterizedQuery:a,resultCallback:l})}}{let{status:e}=S;if(400===e){let e=await S.json(),t=new Gh(e.message);for(let n of Zh)t[n]=e[n]??void 0;throw t}{let t=await S.text();throw new Gh(`Server error (HTTP status ${e}): ${t}`)}}}return id(m,"resolve"),m.transaction=async(e,t)=>{if("function"==typeof e&&(e=e(m)),!Array.isArray(e))throw new Error(Yh);e.forEach((e=>{if("NeonQueryPromise"!==e[Symbol.toStringTag])throw new Error(Yh)}));let n=e.map((e=>e.parameterizedQuery)),r=e.map((e=>e.opts??{}));return y(n,r,t)},id(y,"execute"),m}function Kh(e,t,n){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:t,opts:n,then:id(((r,o)=>e(t,n).then(r,o)),"then"),catch:id((r=>e(t,n).catch(r)),"catch"),finally:id((r=>e(t,n).finally(r)),"finally")}}function Jh(e,{arrayMode:t,fullResults:n,parameterizedQuery:r,resultCallback:o}){let i=e.fields.map((e=>e.name)),s=e.fields.map((e=>tf.types.getTypeParser(e.dataTypeID))),a=!0===t?e.rows.map((e=>e.map(((e,t)=>null===e?null:s[t](e))))):e.rows.map((e=>Object.fromEntries(e.map(((e,t)=>[i[t],null===e?null:s[t](e)])))));return o&&o(r,e,a,{arrayMode:t,fullResults:n}),n?(e.viaNeonFetch=!0,e.rowAsArray=t,e.rows=a,e):a}id(Xh,"neon"),id(Kh,"createNeonQueryPromise"),id(Jh,"processQueryResult");var ef=ud(gh()),tf=ud(Vh()),nf=class extends qh.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=void 0!==this.config?.host||void 0!==this.config?.connectionString||void 0!==Zu.env.PGHOST,r=Zu.env.USER??Zu.env.USERNAME;if(!n&&"localhost"===this.host&&this.user===r&&this.database===r&&null===this.password)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${r}, db: ${r}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let o=super.connect(e),i=t.pipelineTLS&&this.ssl,s="password"===t.pipelineConnect;if(!i&&!t.pipelineConnect)return o;let a=this.connection;if(i&&a.on("connect",(()=>a.stream.emit("data","S"))),s){a.removeAllListeners("authenticationCleartextPassword"),a.removeAllListeners("readyForQuery"),a.once("readyForQuery",(()=>a.on("readyForQuery",this._handleReadyForQuery.bind(this))));let e=this.ssl?"sslconnect":"connect";a.on(e,(()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()}))}return o}async _handleAuthSASLContinue(e){let t=this.saslSession,n=this.password,r=e.data;if("SASLInitialResponse"!==t.message||"string"!=typeof n||"string"!=typeof r)throw new Error("SASL: protocol error");let o=Object.fromEntries(r.split(",").map((e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))),i=o.r,s=o.s,a=o.i;if(!i||!/^[!-+--~]+$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!s||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!a||!/^[1-9][0-9]*$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!i.startsWith(t.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(i.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let l=parseInt(a,10),c=Yu.from(s,"base64"),u=new TextEncoder,d=u.encode(n),h=await Gu.subtle.importKey("raw",d,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),f=new Uint8Array(await Gu.subtle.sign("HMAC",h,Yu.concat([c,Yu.from([0,0,0,1])]))),p=f;for(var g=0;g<l-1;g++)f=new Uint8Array(await Gu.subtle.sign("HMAC",h,f)),p=Yu.from(p.map(((e,t)=>p[t]^f[t])));let m=p,y=await Gu.subtle.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),b=new Uint8Array(await Gu.subtle.sign("HMAC",y,u.encode("Client Key"))),v=await Gu.subtle.digest("SHA-256",b),w="c=biws,r="+i,x="n=*,r="+t.clientNonce+","+("r="+i+",s="+s+",i="+l)+","+w,_=await Gu.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var S=new Uint8Array(await Gu.subtle.sign("HMAC",_,u.encode(x))),E=Yu.from(b.map(((e,t)=>b[t]^S[t]))).toString("base64");let k=await Gu.subtle.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),C=await Gu.subtle.sign("HMAC",k,u.encode("Server Key")),M=await Gu.subtle.importKey("raw",C,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var A=Yu.from(await Gu.subtle.sign("HMAC",M,u.encode(x)));t.message="SASLResponse",t.serverSignature=A.toString("base64"),t.response=w+",p="+E,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};id(nf,"NeonClient");var rf=nf;function of(e,t){if(t)return{callback:t,result:void 0};let n,r,o=id((function(e,t){e?n(e):r(t)}),"cb"),i=new e((function(e,t){r=e,n=t}));return{callback:o,result:i}}id(of,"promisify");var sf=class extends qh.Pool{constructor(){super(...arguments),hd(this,"Client",rf),hd(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return"error"!==e&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,n){if(!Sh.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof e)return super.query(e,t,n);"function"==typeof t&&(n=t,t=void 0);let r=of(this.Promise,n);n=r.callback;try{let r=new ef.default(this.options),o=encodeURIComponent,i=encodeURI,s=`postgresql://${o(r.user)}:${o(r.password)}@${o(r.host)}/${i(r.database)}`,a="string"==typeof e?e:e.text,l=t??e.values??[];Xh(s,{fullResults:!0,arrayMode:"array"===e.rowMode})(a,l).then((e=>n(void 0,e))).catch((e=>n(e)))}catch(e){n(e)}return r.result}};id(sf,"NeonPool");var af=sf;tf.ClientBase,tf.Connection,tf.DatabaseError,tf.Query,tf.defaults,tf.types;
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
var lf=class extends Error{constructor(e,t){super(`VercelPostgresError - '${e}': ${t}`),this.code=e,this.name="VercelPostgresError"}};function cf(e,...t){var n,r;if(!function(e){return Array.isArray(e)&&"raw"in e&&Array.isArray(e.raw)}(e)||!Array.isArray(t))throw new lf("incorrect_tagged_template_call","It looks like you tried to call `sql` as a function. Make sure to use it as a tagged template.\n\tExample: sql`SELECT * FROM users`, not sql('SELECT * FROM users')");let o=null!=(n=e[0])?n:"";for(let t=1;t<e.length;t++)o+=`$${t}${null!=(r=e[t])?r:""}`;return[o,t]}var uf,df=class extends rf{async sql(e,...t){const[n,r]=cf(e,...t);return this.query(n,r)}},hf=class extends af{constructor(e){var t;super(e),this.Client=df,this.connectionString=null!=(t=e.connectionString)?t:""}async sql(e,...t){const[n,r]=cf(e,...t);return Xh(this.connectionString,{fullResults:!0})(n,r)}connect(e){return super.connect(e)}};function ff(e){const t=null!=void 0?undefined:function(e="pool"){let t;switch(e){case"pool":t=process.env.POSTGRES_URL;break;case"direct":t=process.env.POSTGRES_URL_NON_POOLING;break;default:throw new lf("invalid_connection_type",`Unhandled type: ${e}`)}return"undefined"===t&&(t=void 0),t}("pool");if(!t)throw new lf("missing_connection_string","You did not supply a 'connectionString' and no 'POSTGRES_URL' env var was found.");if(!function(e){try{const t=e.replace(/^postgresql:\/\//,"https://");return"localhost"===new URL(t).hostname}catch(e){if(e instanceof TypeError)return!1;if("object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&"Invalid URL"===e.message)return!1;throw e}}(t)&&!function(e){return e.includes("-pooler.")}(t))throw new lf("invalid_connection_string","This connection string is meant to be used with a direct connection. Make sure to use a pooled connection string or try `createClient()` instead.");let n,r;"undefined"!=typeof EdgeRuntime&&(n&&1!==n&&console.warn("@vercel/postgres: Overriding `maxUses` to 1 because the EdgeRuntime does not support client reuse."),r&&1e4!==r&&console.warn("@vercel/postgres: Overriding `max` to 10,000 because the EdgeRuntime does not support client reuse."),n=1,r=1e4);return new hf({...e,connectionString:t,maxUses:n,max:r})}var pf=new Proxy((()=>{}),{get(e,t){uf||(uf=ff());const n=Reflect.get(uf,t);return"function"==typeof n?n.bind(uf):n},apply:(e,t,n)=>(uf||(uf=ff()),uf.sql(...n))}),gf=mi((function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}));Sh&&(Sh.webSocketConstructor=gf);var mf={exports:{}},yf={},bf={},vf=Object.defineProperty,wf=Object.getOwnPropertyDescriptor,xf=Object.getOwnPropertyNames,_f=Object.prototype.hasOwnProperty,Sf={};((e,t)=>{for(var n in t)vf(e,n,{get:t[n],enumerable:!0})})(Sf,{RequestCookies:()=>Rf,ResponseCookies:()=>Tf,parseCookie:()=>Mf,parseSetCookie:()=>Af,stringifyCookie:()=>Cf});var Ef,kf=(Ef=Sf,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of xf(t))_f.call(e,o)||o===n||vf(e,o,{get:()=>t[o],enumerable:!(r=wf(t,o))||r.enumerable});return e})(vf({},"__esModule",{value:!0}),Ef));function Cf(e){var t;const n=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),r=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===n.length?r:`${r}; ${n.join("; ")}`}function Mf(e){const t=new Map;for(const n of e.split(/; */)){if(!n)continue;const e=n.indexOf("=");if(-1===e){t.set(n,"true");continue}const[r,o]=[n.slice(0,e),n.slice(e+1)];try{t.set(r,decodeURIComponent(null!=o?o:"true"))}catch{}}return t}function Af(e){if(!e)return;const[[t,n],...r]=Mf(e),{domain:o,expires:i,httponly:s,maxage:a,path:l,samesite:c,secure:u,partitioned:d,priority:h}=Object.fromEntries(r.map((([e,t])=>[e.toLowerCase(),t])));return function(e){const t={};for(const n in e)e[n]&&(t[n]=e[n]);return t}({name:t,value:decodeURIComponent(n),domain:o,...i&&{expires:new Date(i)},...s&&{httpOnly:!0},..."string"==typeof a&&{maxAge:Number(a)},path:l,...c&&{sameSite:If(c)},...u&&{secure:!0},...h&&{priority:Of(h)},...d&&{partitioned:!0}})}var Pf=["strict","lax","none"];function If(e){return e=e.toLowerCase(),Pf.includes(e)?e:void 0}var Nf=["low","medium","high"];function Of(e){return e=e.toLowerCase(),Nf.includes(e)?e:void 0}var Rf=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t){const e=Mf(t);for(const[t,n]of e)this._parsed.set(t,{name:t,value:n})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){const t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;const n=Array.from(this._parsed);if(!e.length)return n.map((([e,t])=>t));const r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return n.filter((([e])=>e===r)).map((([e,t])=>t))}has(e){return this._parsed.has(e)}set(...e){const[t,n]=1===e.length?[e[0].name,e[0].value]:e,r=this._parsed;return r.set(t,{name:t,value:n}),this._headers.set("cookie",Array.from(r).map((([e,t])=>Cf(t))).join("; ")),this}delete(e){const t=this._parsed,n=Array.isArray(e)?e.map((e=>t.delete(e))):t.delete(e);return this._headers.set("cookie",Array.from(t).map((([e,t])=>Cf(t))).join("; ")),n}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map((e=>`${e.name}=${encodeURIComponent(e.value)}`)).join("; ")}},Tf=class{constructor(e){var t,n,r;this._parsed=new Map,this._headers=e;const o=null!=(r=null!=(n=null==(t=e.getSetCookie)?void 0:t.call(e))?n:e.get("set-cookie"))?r:[],i=Array.isArray(o)?o:function(e){if(!e)return[];var t,n,r,o,i,s=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,i=!1;l();)if(","===(n=e.charAt(a))){for(r=a,a+=1,l(),o=a;a<e.length&&"="!==(n=e.charAt(a))&&";"!==n&&","!==n;)a+=1;a<e.length&&"="===e.charAt(a)?(i=!0,a=o,s.push(e.substring(t,r)),t=a):a=r+1}else a+=1;(!i||a>=e.length)&&s.push(e.substring(t,e.length))}return s}(o);for(const e of i){const t=Af(e);t&&this._parsed.set(t.name,t)}}get(...e){const t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;const n=Array.from(this._parsed.values());if(!e.length)return n;const r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return n.filter((e=>e.name===r))}has(e){return this._parsed.has(e)}set(...e){const[t,n,r]=1===e.length?[e[0].name,e[0].value,e[0]]:e,o=this._parsed;return o.set(t,function(e={name:"",value:""}){"number"==typeof e.expires&&(e.expires=new Date(e.expires));e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge));null!==e.path&&void 0!==e.path||(e.path="/");return e}({name:t,value:n,...r})),function(e,t){t.delete("set-cookie");for(const[,n]of e){const e=Cf(n);t.append("set-cookie",e)}}(o,this._headers),this}delete(...e){const[t,n,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:n,domain:r,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(Cf).join("; ")}};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{RequestCookies:function(){return t.RequestCookies},ResponseCookies:function(){return t.ResponseCookies}});const t=kf}(bf);var Lf={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(e,t,n){const r=Reflect.get(e,t,n);return"function"==typeof r?r.bind(e):r}static set(e,t,n,r){return Reflect.set(e,t,n,r)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}}(Lf);var Df={exports:{}},Bf={exports:{}},zf={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createAsyncLocalStorage",{enumerable:!0,get:function(){return i}});const n=new Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class r{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}}const o=globalThis.AsyncLocalStorage;function i(){return o?new o:new r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(zf,zf.exports);var $f=zf.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationAsyncStorage",{enumerable:!0,get:function(){return n}});const n=(0,$f.createAsyncLocalStorage)();("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Bf,Bf.exports);var jf=Bf.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationAsyncStorage",{enumerable:!0,get:function(){return n.staticGenerationAsyncStorage}});const n=jf;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Df,Df.exports);var Hf=Df.exports;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{MutableRequestCookiesAdapter:function(){return c},ReadonlyRequestCookiesError:function(){return o},RequestCookiesAdapter:function(){return i},appendMutableCookies:function(){return l},getModifiedCookieValues:function(){return a}});const t=bf,n=Lf,r=Hf;class o extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new o}}class i{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return o.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}}const s=Symbol.for("next.mutated.cookies");function a(e){const t=e[s];return t&&Array.isArray(t)&&0!==t.length?t:[]}function l(e,n){const r=a(n);if(0===r.length)return!1;const o=new t.ResponseCookies(e),i=o.getAll();for(const e of r)o.set(e);for(const e of i)o.set(e);return!0}class c{static wrap(e,o){const i=new t.ResponseCookies(new Headers);for(const t of e.getAll())i.set(t);let a=[];const l=new Set,c=()=>{const e=r.staticGenerationAsyncStorage.getStore();e&&(e.pathWasRevalidated=!0);const n=i.getAll();if(a=n.filter((e=>l.has(e.name))),o){const e=[];for(const n of a){const r=new t.ResponseCookies(new Headers);r.set(n),e.push(r.toString())}o(e)}};return new Proxy(i,{get(e,t,r){switch(t){case s:return a;case"delete":return function(...t){l.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{c()}};case"set":return function(...t){l.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{c()}};default:return n.ReflectAdapter.get(e,t,r)}}})}}}(yf);var Ff={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{HeadersAdapter:function(){return r},ReadonlyHeadersError:function(){return n}});const t=Lf;class n extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new n}}class r extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(n,r,o){if("symbol"==typeof r)return t.ReflectAdapter.get(n,r,o);const i=r.toLowerCase(),s=Object.keys(e).find((e=>e.toLowerCase()===i));return void 0!==s?t.ReflectAdapter.get(n,s,o):void 0},set(n,r,o,i){if("symbol"==typeof r)return t.ReflectAdapter.set(n,r,o,i);const s=r.toLowerCase(),a=Object.keys(e).find((e=>e.toLowerCase()===s));return t.ReflectAdapter.set(n,a??r,o,i)},has(n,r){if("symbol"==typeof r)return t.ReflectAdapter.has(n,r);const o=r.toLowerCase(),i=Object.keys(e).find((e=>e.toLowerCase()===o));return void 0!==i&&t.ReflectAdapter.has(n,i)},deleteProperty(n,r){if("symbol"==typeof r)return t.ReflectAdapter.deleteProperty(n,r);const o=r.toLowerCase(),i=Object.keys(e).find((e=>e.toLowerCase()===o));return void 0===i||t.ReflectAdapter.deleteProperty(n,i)}})}static seal(e){return new Proxy(e,{get(e,r,o){switch(r){case"append":case"delete":case"set":return n.callable;default:return t.ReflectAdapter.get(e,r,o)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new r(e)}append(e,t){const n=this.headers[e];"string"==typeof n?this.headers[e]=[n,t]:Array.isArray(n)?n.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){const t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(const[n,r]of this.entries())e.call(t,r,n,this)}*entries(){for(const e of Object.keys(this.headers)){const t=e.toLowerCase(),n=this.get(t);yield[t,n]}}*keys(){for(const e of Object.keys(this.headers)){const t=e.toLowerCase();yield t}}*values(){for(const e of Object.keys(this.headers)){const t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}}(Ff);var Uf={exports:{}},Vf={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorage",{enumerable:!0,get:function(){return n}});const n=(0,$f.createAsyncLocalStorage)();("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Vf,Vf.exports);var qf=Vf.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorage",{enumerable:!0,get:function(){return n.actionAsyncStorage}});const n=qf;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Uf,Uf.exports);var Qf=Uf.exports,Wf={exports:{}},Gf={},Yf={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{DynamicServerError:function(){return r},isDynamicServerError:function(){return o}});const n="DYNAMIC_SERVER_USAGE";class r extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=n}}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Yf,Yf.exports);var Zf=Yf.exports,Xf={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{StaticGenBailoutError:function(){return r},isStaticGenBailoutError:function(){return o}});const n="NEXT_STATIC_GEN_BAILOUT";class r extends Error{constructor(...e){super(...e),this.code=n}}function o(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Xf,Xf.exports);var Kf=Xf.exports,Jf={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{getPathname:function(){return n},isFullStringUrl:function(){return r}});const t="http://n";function n(e){return function(e){return new URL(e,t)}(e).pathname}function r(e){return/https?:\/\//.test(e)}}(Jf),function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{Postpone:function(){return d},createPostponedAbortSignal:function(){return y},createPrerenderState:function(){return l},formatDynamicAPIAccesses:function(){return g},markCurrentScopeAsDynamic:function(){return c},trackDynamicDataAccessed:function(){return u},trackDynamicFetch:function(){return h},usedDynamicAPIs:function(){return p}});const t=s(r),n=Zf,o=Kf,i=Jf;function s(e){return e&&e.__esModule?e:{default:e}}const a="function"==typeof t.default.unstable_postpone;function l(e){return{isDebugSkeleton:e,dynamicAccesses:[]}}function c(e,t){const r=(0,i.getPathname)(e.urlPathname);if(!e.isUnstableCacheCallback){if(e.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)f(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){const o=new n.DynamicServerError(`Route ${r} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=o.stack,o}}}function u(e,t){const r=(0,i.getPathname)(e.urlPathname);if(e.isUnstableCacheCallback)throw new Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)f(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){const o=new n.DynamicServerError(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=o.stack,o}}function d({reason:e,prerenderState:t,pathname:n}){f(t,e,n)}function h(e,t){e.prerenderState&&f(e.prerenderState,t,e.urlPathname)}function f(e,n,r){m();const o=`Route ${r} needs to bail out of prerendering at this point because it used ${n}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;e.dynamicAccesses.push({stack:e.isDebugSkeleton?(new Error).stack:void 0,expression:n}),t.default.unstable_postpone(o)}function p(e){return e.dynamicAccesses.length>0}function g(e){return e.dynamicAccesses.filter((e=>"string"==typeof e.stack&&e.stack.length>0)).map((({expression:e,stack:t})=>`Dynamic API Usage Debug - ${e}:\n${t=t.split("\n").slice(4).filter((e=>!e.includes("node_modules/next/")&&(!e.includes(" (<anonymous>)")&&!e.includes(" (node:")))).join("\n")}`))}function m(){if(!a)throw new Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function y(e){m();const n=new AbortController;try{t.default.unstable_postpone(e)}catch(e){n.abort(e)}return n.signal}}(Gf),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return o}});const n=Hf,r=Gf;class o{get isEnabled(){return this._provider.isEnabled}enable(){const e=n.staticGenerationAsyncStorage.getStore();return e&&(0,r.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){const e=n.staticGenerationAsyncStorage.getStore();return e&&(0,r.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(Wf,Wf.exports);var ep=Wf.exports,tp={exports:{}},np={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"requestAsyncStorage",{enumerable:!0,get:function(){return n}});const n=(0,$f.createAsyncLocalStorage)();("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(np,np.exports);var rp=np.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getExpectedRequestStore:function(){return r},requestAsyncStorage:function(){return n.requestAsyncStorage}});const n=rp;function r(e){const t=n.requestAsyncStorage.getStore();if(t)return t;throw new Error("`"+e+"` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context")}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(tp,tp.exports);var op=tp.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{cookies:function(){return d},draftMode:function(){return h},headers:function(){return u}});const n=yf,r=Ff,o=bf,i=Qf,s=ep,a=Gf,l=Hf,c=op;function u(){const e="headers",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return r.HeadersAdapter.seal(new Headers({}));(0,a.trackDynamicDataAccessed)(t,e)}return(0,c.getExpectedRequestStore)(e).headers}function d(){const e="cookies",t=l.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return n.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({})));(0,a.trackDynamicDataAccessed)(t,e)}const r=(0,c.getExpectedRequestStore)(e),s=i.actionAsyncStorage.getStore();return(null==s?void 0:s.isAction)||(null==s?void 0:s.isAppRoute)?r.mutableCookies:r.cookies}function h(){const e=(0,c.getExpectedRequestStore)("draftMode");return new s.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(mf,mf.exports);var ip,sp,ap=mf.exports;function lp(){return y(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){return void 0===(e=ap.cookies().get("id"))?(t=Math.random().toString(36).substring(2),ap.cookies().set("id",t,{expires:new Date(Date.now()+31536e6)}),[2,t]):[2,e.value]}))}))}function cp(e){return y(this,void 0,void 0,(function(){var t,n,r,o;return b(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,lp()];case 1:return t=i.sent(),0===(n=JSON.parse(e)).log.length||void 0===n.problemId?[3,5]:(r=JSON.stringify(n.log),n.lastSynchronized=(new Date).toISOString(),"pilot1"!==ap.cookies().get("config").value?[3,3]:[4,pf(ip||(ip=_(["INSERT INTO pilot1 (player_id, problem_id, start, latest, history, completed) VALUES \n                    (",", ",", ",", ",", ",", ",")\n                    ON CONFLICT (player_id, problem_id, start) DO UPDATE\n                    SET latest= ",", \n                        history= ",",\n                        completed=","\n                    WHERE pilot1.completed=false;"],["INSERT INTO pilot1 (player_id, problem_id, start, latest, history, completed) VALUES \n                    (",", ",", ",", ",", ",", ",")\n                    ON CONFLICT (player_id, problem_id, start) DO UPDATE\n                    SET latest= ",", \n                        history= ",",\n                        completed=","\n                    WHERE pilot1.completed=false;"])),t,n.problemId,n.startTime,n.lastSynchronized,r,n.completed,n.lastSynchronized,r,n.completed)]);case 2:return i.sent(),[3,5];case 3:return[4,pf(sp||(sp=_(["INSERT INTO testing_0 (player_id, problem_id, start, latest, history, completed) VALUES \n                    (",", ",", ",", ",", ",", ",")\n                    ON CONFLICT (player_id, problem_id, start) DO UPDATE\n                    SET latest= ",", \n                        history= ",",\n                        completed=","\n                    WHERE testing_0.completed=false;"],["INSERT INTO testing_0 (player_id, problem_id, start, latest, history, completed) VALUES \n                    (",", ",", ",", ",", ",", ",")\n                    ON CONFLICT (player_id, problem_id, start) DO UPDATE\n                    SET latest= ",", \n                        history= ",",\n                        completed=","\n                    WHERE testing_0.completed=false;"])),t,n.problemId,n.startTime,n.lastSynchronized,r,n.completed,n.lastSynchronized,r,n.completed)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return o=i.sent(),console.log("Error synchronizing history."),console.log(o),[3,7];case 7:return[2]}}))}))}function up(e){var t=new Map;return e.initialDiagram.connections.forEach((function(n){var r=dp(n.from,n.to),o=function(e,t){try{var n=Tu(t.gadgets).get(e.from),r=Tu(t.gadgets).get(e.to[0]);if(Ou(n.statement))throw new Error("Invalid connection in initial diagram: goal gadget cannot be a source.");var o=n.statement.axiom.conclusion,i=Ou(r.statement)?r.statement.goal:r.statement.axiom.hypotheses[e.to[1]];return[iu(o,e.from),iu(i,e.to[0])]}catch(t){throw new Error("Invalid connection in initial diagram: possibly gadget ".concat(e.from," or ").concat(e.to," is missing in the diagram."))}}(n,e.initialDiagram);t.set(r,o)})),t}function dp(e,t){return"equation-".concat(e,"-to-").concat(t[0],"_").concat(t[1])}function hp(t){var n=Vu(t.initData),r=w(s(up(t.initData)),2),o=r[0],i=r[1],a=d(new Xu(n)),l=d(new Ku(t.problemId)),f=w(u((function(){var e=function(e){var t=new Map,n=new Jc;return e.forEach((function(e,r){var o=Hu(n,e);t.set(r,o)})),{assignment:n,equationIsSatisfied:t}}(o);return a.current.updateEnumeration(e.assignment),[a.current.getHoleValueAssignment(e.assignment),e.equationIsSatisfied]}),[o]),2),p=f[0],m=f[1];var y=c((function(e,t,n){l.current.logEvent({EquationAdded:{from:e,to:t}}),new Map(o).set(dp(e,t),n),i((function(r){return new Map(r).set(dp(e,t),n)}))}),[o]),b=c((function(e,t){l.current.logEvent({EquationRemoved:{from:e,to:t}}),i((function(n){var r=new Map(n);return r.delete(dp(e,t)),r}))}),[o]),v=c((function(){t.setProblemSolved(),l.current.completed||(l.current.logEvent({Completed:null}),l.current.completed=!0,t.historyRecorded&&cp(JSON.stringify(l.current)))}),[]);h((function(){try{var e=JSON.stringify(l.current);t.historyRecorded&&cp(e)}catch(e){console.error(e)}}),[o]);var x=t.initialViewportSetting||"ORIGIN_AT_RIGHT";return e(Ql.Provider,g({value:p},{children:e(yl,{children:e($u,{initData:t.initData,addGadget:function(e,n){l.current.logEvent({GadgetAdded:{gadgetId:e,axiom:pu(n)}}),t.historyRecorded&&cp(JSON.stringify(l.current))},removeGadget:function(e){l.current.logEvent({GadgetRemoved:{gadgetId:e}}),t.historyRecorded&&cp(JSON.stringify(l.current))},addEquation:y,removeEquation:b,isSatisfied:m,setProblemSolved:v,setUserIsDraggingOrNavigating:t.setUserIsDraggingOrNavigating,proximityConnectEnabled:t.proximityConnectEnabled,zoomEnabled:t.zoomEnabled,initialViewportSetting:x})})}))}function fp(t){return console.log(t),e("div",g({className:"w-full h-screen max-w-full mx-auto"},{children:e(hp,{initData:t,setProblemSolved:function(){},historyRecorded:!1,proximityConnectEnabled:!0,setUserIsDraggingOrNavigating:function(){},zoomEnabled:!0,initialViewportSetting:"FIT_INITIAL_DIAGRAM"})}))}export{fp as default};
